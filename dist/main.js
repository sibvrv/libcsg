/*!
 * LibCSG version 0.8.0
 * Build Date: 2020-05-09T09:42:01.139Z
 * Homepage: https://github.com/sibvrv/libcsg
 * Repository: git+https://github.com/sibvrv/libcsg.git
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.libcsg=t():e.libcsg=t()}(global,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=34)}([function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(37)),n(r(38)),n(r(39)),n(r(40)),n(r(41)),n(r(42)),n(r(46)),n(r(47)),n(r(48)),n(r(49)),n(r(50)),n(r(51)),n(r(52)),n(r(53)),n(r(68)),n(r(69)),n(r(70)),n(r(71)),n(r(72))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._CSGDEBUG=!1,t.defaultResolution2D=32,t.defaultResolution3D=12,t.EPS=1e-5,t.angleEPS=.1,t.areaEPS=.5*t.EPS*t.EPS*Math.sin(t.angleEPS),t.all=0,t.top=1,t.bottom=2,t.left=3,t.right=4,t.front=5,t.back=6,t.staticTag=1,t.getTag=function(){return t.staticTag++}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fnNumberSort=function(e,t){return e-t},t.fnSortByIndex=function(e,t){return e.index-t.index},t.IsFloat=function(e){return!isNaN(e)||e===1/0||e===-1/0},t.solve2Linear=function(e,t,r,n,o,i){var s=1/(e*n-t*r),a=o*n-t*i,u=-o*r+e*i;return[a*=s,u*=s]},t.insertSorted=function(e,t,r){for(var n=0,o=e.length;o>n;){var i=Math.floor((n+o)/2);r(t,e[i])>0?n=i+1:o=i}e.splice(n,0,t)},t.interpolateBetween2DPointsForY=function(e,t,r){var n,o=r-e.y,i=t.y-e.y;return i<0&&(o=-o,i=-i),n=o<=0?0:o>=i?1:i<1e-10?.5:o/i,e.x+n*(t.x-e.x)},t.isCAG=function(e){return"sides"in e&&"length"in e.sides},t.isCSG=function(e){return"polygons"in e&&"length"in e.polygons}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(5);t.fromPolygons=function(e){var t=new o.CSG;return t.polygons=e,t.isCanonicalized=!1,t.isRetesselated=!1,t},t.fromSlices=function(e){return n.Polygon3.createFromPoints([[0,0,0],[1,0,0],[1,1,0],[0,1,0]]).solidFromSlices(e)},t.fromObject=function(e){var r=e.polygons.map((function(e){return n.Polygon3.fromObject(e)})),o=t.fromPolygons(r);return o.isCanonicalized=e.isCanonicalized,o.isRetesselated=e.isRetesselated,o},t.fromCompactBinary=function(e){if("CSG"!==e.class)throw new Error("Not a CSG");for(var r,o,i,s,a,u,l=[],c=e.planeData,p=c.length/4,f=0,h=0;h<p;h++)r=c[f++],o=c[f++],i=c[f++],s=c[f++],a=n.Vector3.Create(r,o,i),u=new n.Plane(a,s),l.push(u);var d,v,y=[],g=e.vertexData,m=g.length/3;f=0;for(var x=0;x<m;x++)r=g[f++],o=g[f++],i=g[f++],d=n.Vector3.Create(r,o,i),v=new n.Vertex3(d),y.push(v);var w,_,P,b,O=e.shared.map((function(e){return n.Polygon3.Shared.fromObject(e)})),V=[],M=e.numPolygons,C=e.numVerticesPerPolygon,A=e.polygonVertices,S=e.polygonPlaneIndexes,j=e.polygonSharedIndexes;f=0;for(var T=0;T<M;T++){w=C[T],_=[];for(var E=0;E<w;E++)_.push(y[A[f++]]);u=l[S[T]],P=O[j[T]],b=new n.Polygon3(_,P,u),V.push(b)}var z=t.fromPolygons(V);return z.isCanonicalized=!0,z.isRetesselated=!0,z}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1),i=r(17),s=r(10),a=r(6);t.fromSides=function(e){var t=new a.CAG;return t.sides=e,t},t.fromFakeCSG=function(e){var r=e.polygons.map((function(e){return n.Side._fromFakePolygon(e)})).filter(Boolean);return t.fromSides(r)},t.fromPoints=function(e){if(!e)throw new Error("points parameter must be defined");if(!Array.isArray(e))throw new Error("points parameter must be an array");if(void 0!==e[0].x||"number"==typeof e[0][0])return t.fromPointsArray(e);if("object"==typeof e[0][0])return t.fromNestedPointsArray(e);throw new Error("Unsupported points list format")},t.fromPointsArray=function(e){if(e.length<3)throw new Error("CAG shape needs at least 3 points");var r=[],s=new n.Vertex2(new n.Vector2(e[e.length-1]));e.map((function(e){var t=new n.Vertex2(new n.Vector2(e));r.push(new n.Side(s,t)),s=t}));var a=t.fromSides(r);if(i.isSelfIntersecting(a))throw new Error("Polygon is self intersecting!");var u=a.area();if(Math.abs(u)<o.areaEPS)throw new Error("Degenerate polygon!");return u<0&&(a=a.flipped()),a.canonicalized()},t.fromNestedPointsArray=function(e){if(1===e.length)return t.fromPoints(e[0]);var r=[];e.forEach((function(e){r.push(t.fromPointsArray(e))}));var n={};r.forEach((function(e,t){r.forEach((function(r,o){e!==r&&(n[t]||(n[t]={parents:[],isHole:!1}),n[o]||(n[o]={parents:[],isHole:!1}),i.contains(r,e)&&(n[t].parents.push(o),n[t].isHole=!!(n[t].parents.length%2),n[o].isHole=!!(n[o].parents.length%2)))}))}));var o=null,a=function(e){(o=n[e]).isHole&&(delete n[e],o.parents.forEach((function(t){r[t]=s.difference(r[t],r[e])})))};for(var u in n)a(u);var l=t.fromSides([]);for(var u in n)l=s.union(l,r[u]);return l},t.fromObject=function(e){var r=e.sides.map((function(e){return n.Side.fromObject(e)})),o=t.fromSides(r);return o.isCanonicalized=e.isCanonicalized,o},t.fromPointsNoCheck=function(e){var r=[],o=new n.Vector2(e[e.length-1]),i=new n.Vertex2(o);return e.map((function(e){var t=new n.Vector2(e),o=new n.Vertex2(t),s=new n.Side(i,o);r.push(s),i=o})),t.fromSides(r)},t.fromPath2=function(e){if(!e.isClosed())throw new Error("The path should be closed!");return t.fromPoints(e.getPoints())},t.fromCompactBinary=function(e){if("CAG"!==e.class)throw new Error("Not a CAG");for(var r=[],o=e.vertexData,i=o.length/2,s=0,a=0;a<i;a++){var u=o[s++],l=o[s++],c=new n.Vector2(u,l),p=new n.Vertex2(c);r.push(p)}var f=[],h=e.sideVertexIndices.length/2;s=0;for(var d=0;d<h;d++){var v=e.sideVertexIndices[s++],y=e.sideVertexIndices[s++],g=new n.Side(r[v],r[y]);f.push(g)}var m=t.fromSides(f);return m.isCanonicalized=!0,m}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(55),s=r(0),a=r(18),u=r(59),l=r(19),c=r(22),p=r(61),f=r(62),h=r(23),d=r(63),v=r(24),y=r(25),g=r(1),m=r(66),x=r(3),w=r(8),_=r(7),P=r(67),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.polygons=[],t.properties=new a.Properties,t.isCanonicalized=!0,t.isRetesselated=!0,t}return o(t,e),t.prototype.union=function(e){var t,r;for(e instanceof Array?(t=e.slice(0)).push(this):t=[this,e],r=1;r<t.length;r+=2)t.push(t[r-1].unionSub(t[r]));return t[r-1].reTesselated().canonicalized()},t.prototype.unionSub=function(e,t,r){if(this.mayOverlap(e)){var n=new i.Tree(this.polygons),o=new i.Tree(e.polygons);n.clipTo(o,!1),o.clipTo(n),o.invert(),o.clipTo(n),o.invert();var s=n.allPolygons().concat(o.allPolygons()),a=x.fromPolygons(s);return a.properties=this.properties._merge(e.properties),t&&(a=a.reTesselated()),r&&(a=a.canonicalized()),a}return this.unionForNonIntersecting(e)},t.prototype.unionForNonIntersecting=function(e){var t=this.polygons.concat(e.polygons),r=x.fromPolygons(t);return r.properties=this.properties._merge(e.properties),r.isCanonicalized=this.isCanonicalized&&e.isCanonicalized,r.isRetesselated=this.isRetesselated&&e.isRetesselated,r},t.prototype.subtract=function(e){var t;t=e instanceof Array?e:[e];for(var r=this,n=0;n<t.length;n++){var o=n===t.length-1;r=r.subtractSub(t[n],o,o)}return r},t.prototype.subtractSub=function(e,t,r){var n=new i.Tree(this.polygons),o=new i.Tree(e.polygons);n.invert(),n.clipTo(o),o.clipTo(n,!0),n.addPolygons(o.allPolygons()),n.invert();var s=x.fromPolygons(n.allPolygons());return s.properties=this.properties._merge(e.properties),t&&(s=s.reTesselated()),r&&(s=s.canonicalized()),s},t.prototype.intersect=function(e){var t;t=e instanceof Array?e:[e];for(var r=this,n=0;n<t.length;n++){var o=n===t.length-1;r=r.intersectSub(t[n],o,o)}return r},t.prototype.intersectSub=function(e,t,r){var n=new i.Tree(this.polygons),o=new i.Tree(e.polygons);n.invert(),o.clipTo(n),o.invert(),n.clipTo(o),o.clipTo(n),n.addPolygons(o.allPolygons()),n.invert();var s=x.fromPolygons(n.allPolygons());return s.properties=this.properties._merge(e.properties),t&&(s=s.reTesselated()),r&&(s=s.canonicalized()),s},t.prototype.invert=function(){var e=this.polygons.map((function(e){return e.flipped()}));return x.fromPolygons(e)},t.prototype.transform1=function(e){var t=this.polygons.map((function(t){return t.transform(e)})),r=x.fromPolygons(t);return r.properties=this.properties._transform(e),r.isRetesselated=this.isRetesselated,r},t.prototype.transform=function(e){var t=e.isMirroring(),r={},n={},o=this.polygons.map((function(o){var i,a=o.plane,u=a.getTag();u in n?i=n[u]:(i=a.transform(e),n[u]=i);var l=o.vertices.map((function(t){var n,o=t.getTag();return o in r?n=r[o]:(n=t.transform(e),r[o]=n),n}));return t&&l.reverse(),new s.Polygon3(l,o.shared,i)})),i=x.fromPolygons(o);return i.properties=this.properties._transform(e),i.isRetesselated=this.isRetesselated,i.isCanonicalized=this.isCanonicalized,i},t.prototype.center=function(e){return v.center({axes:e},[this])},t.prototype.expand=function(e,t){return y.expand(this,e,t)},t.prototype.contract=function(e,t){return y.contract(this,e,t)},t.prototype.expandedShell=function(e,t,r){return y.expandedShellOfCCSG(this,e,t,r)},t.prototype.stretchAtPlane=function(e,t,r){var n=s.Plane.fromNormalAndPoint(e,t),o=new s.OrthoNormalBasis(n),i=this.sectionCut(o).extrudeInOrthonormalBasis(o,r),a=this.cutByPlane(n),u=this.cutByPlane(n.flipped());return a.union([i,u.translate(n.normal.times(r))])},t.prototype.canonicalized=function(){return l.canonicalize(this)},t.prototype.reTesselated=function(){return c.reTesselate(this)},t.prototype.fixTJunctions=function(){return u.fixTJunctions(x.fromPolygons,this)},t.prototype.getBounds=function(){return p.bounds(this)},t.prototype.mayOverlap=function(e){if(0===this.polygons.length||0===e.polygons.length)return!1;var t=p.bounds(this),r=p.bounds(e);return!(t[1].x<r[0].x)&&(!(t[0].x>r[1].x)&&(!(t[1].y<r[0].y)&&(!(t[0].y>r[1].y)&&(!(t[1].z<r[0].z)&&!(t[0].z>r[1].z)))))},t.prototype.cutByPlane=function(e){return d.cutByPlane(this,e)},t.prototype.connectTo=function(e,t,r,n){var o=e.getTransformationTo(t,r,n);return this.transform(o)},t.prototype.setShared=function(e){var t=this.polygons.map((function(t){return new s.Polygon3(t.vertices,e,t.plane)})),r=x.fromPolygons(t);return r.properties=this.properties,r.isRetesselated=this.isRetesselated,r.isCanonicalized=this.isCanonicalized,r},t.prototype.setColor=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=(e=s.Polygon3.Shared).fromColor.apply(e,t);return this.setShared(n)},t.prototype.getTransformationAndInverseTransformationToFlatLying=function(){return h.getTransformationAndInverseTransformationToFlatLying(this)},t.prototype.getTransformationToFlatLying=function(){return h.getTransformationToFlatLying(this)},t.prototype.lieFlat=function(){return h.lieFlat(this)},t.prototype.projectToOrthoNormalBasis=function(e){return f.projectToOrthoNormalBasis(this,e)},t.prototype.sectionCut=function(e){return d.sectionCut(this,e)},t.prototype.getFeatures=function(e){var t=Array.isArray(e)?e:[e],r=this.toTriangles().map((function(e){return e.getTetraFeatures(t)})).reduce((function(e,t){return t.map((function(t,r){return t+(0===e?0:e[r])}))}),0);return 1===r.length?r[0]:r},t.prototype.toPolygons=function(){return this.polygons},t.prototype.toString=function(){var e="CSG solid:\n";return this.polygons.map((function(t){e+=t.toString()})),e},t.prototype.toCompactBinary=function(){var e=this.canonicalized(),t=e.polygons.length,r=0,n=0,o={},i=[],s=0,a={},u=[],l=[],c={},p=0;e.polygons.map((function(e){e.vertices.map((function(e){++r;var t=e.getTag();t in o||(o[t]=n++,i.push(e))}));var t=e.plane.getTag();t in a||(a[t]=s++,u.push(e.plane));var f=e.shared.getTag();f in c||(c[f]=p++,l.push(e.shared))}));for(var f=new Uint32Array(t),h=new Uint32Array(t),d=new Uint32Array(r),v=new Uint32Array(t),y=new Float64Array(3*n),g=new Float64Array(4*s),m=0,x=0;x<t;++x){var w=e.polygons[x];f[x]=w.vertices.length,w.vertices.map((function(e){var t=e.getTag(),r=o[t];d[m++]=r}));var _=w.plane.getTag(),P=a[_];v[x]=P;var b=w.shared.getTag(),O=c[b];h[x]=O}var V=0;i.map((function(e){var t=e.pos;y[V++]=t._x,y[V++]=t._y,y[V++]=t._z}));var M=0;return u.map((function(e){var t=e.normal;g[M++]=t._x,g[M++]=t._y,g[M++]=t._z,g[M++]=e.w})),{class:"CSG",numPolygons:t,numVerticesPerPolygon:f,polygonPlaneIndexes:v,polygonSharedIndexes:h,polygonVertices:d,vertexData:y,planeData:g,shared:l}},t.prototype.toTriangles=function(){var e=[];return this.polygons.forEach((function(t){for(var r=t.vertices[0],n=t.vertices.length-3;n>=0;n--)e.push(new s.Polygon3([r,t.vertices[n+1],t.vertices[n+2]],t.shared,t.plane))})),e},t.Vector2D=s.Vector2,t.Vector3D=s.Vector3,t.Vertex=s.Vertex3,t.Plane=s.Plane,t.Polygon=s.Polygon3,t.Polygon2D=s.Polygon2D,t.Line2D=s.Line2D,t.Line3D=s.Line3D,t.Path2D=s.Path2D,t.OrthoNormalBasis=s.OrthoNormalBasis,t.Matrix4x4=s.Matrix4x4,t.Connector=_.Connector,t.ConnectorList=P.ConnectorList,t.Properties=a.Properties,t._CSGDEBUG=g._CSGDEBUG,t.defaultResolution2D=g.defaultResolution2D,t.defaultResolution3D=g.defaultResolution3D,t.EPS=g.EPS,t.angleEPS=g.angleEPS,t.areaEPS=g.areaEPS,t.all=g.all,t.top=g.top,t.bottom=g.bottom,t.left=g.left,t.right=g.right,t.front=g.front,t.back=g.back,t.staticTag=g.staticTag,t.getTag=g.getTag,t.sphere=m.sphere,t.cube=m.cube,t.roundedCube=m.roundedCube,t.cylinder=m.cylinder,t.roundedCylinder=m.roundedCylinder,t.cylinderElliptic=m.cylinderElliptic,t.polyhedron=m.polyhedron,t.fromCompactBinary=x.fromCompactBinary,t.fromObject=x.fromObject,t.fromSlices=x.fromSlices,t.fromPolygons=x.fromPolygons,t.parseOptionAs2DVector=w.parseOptionAs2DVector,t.parseOptionAs3DVector=w.parseOptionAs3DVector,t.parseOptionAs3DVectorList=w.parseOptionAs3DVectorList,t.parseOptionAsBool=w.parseOptionAsBool,t.parseOptionAsFloat=w.parseOptionAsFloat,t.parseOptionAsInt=w.parseOptionAsInt,t}(s.TransformationMethods);t.CSG=b},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(7),s=r(0),a=r(3),u=r(4),l=r(19),c=r(22),p=r(17),f=r(73),h=r(23),d=r(13),v=r(84),y=r(24),g=r(25),m=r(85),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sides=[],t.isCanonicalized=!1,t}return o(t,e),t.prototype.union=function(e){var t=Array.isArray(e)?e:[e],r=this._toCSGWall(-1,1);return r=r.union(t.map((function(e){return e._toCSGWall(-1,1).reTesselated()}))),u.fromFakeCSG(r).canonicalized()},t.prototype.subtract=function(e){var t=Array.isArray(e)?e:[e],r=this._toCSGWall(-1,1);t.forEach((function(e){r=r.subtractSub(e._toCSGWall(-1,1),!1,!1)})),r=(r=r.reTesselated()).canonicalized();var n=u.fromFakeCSG(r);return n=n.canonicalized()},t.prototype.intersect=function(e){var t=Array.isArray(e)?e:[e],r=this._toCSGWall(-1,1);t.map((function(e){r=r.intersectSub(e._toCSGWall(-1,1),!1,!1)})),r=(r=r.reTesselated()).canonicalized();var n=u.fromFakeCSG(r);return n=n.canonicalized()},t.prototype.transform=function(e){var t=e.isMirroring(),r=this.sides.map((function(t){return t.transform(e)})),n=u.fromSides(r);return t&&(n=n.flipped()),n},t.prototype.flipped=function(){var e=this.sides.map((function(e){return e.flipped()}));return e.reverse(),u.fromSides(e)},t.prototype.center=function(e){return y.center({axes:e},[this])},t.prototype.expandedShell=function(e,t){return g.expandedShellOfCAG(this,e,t)},t.prototype.expand=function(e,t){return g.expand(this,e,t)},t.prototype.contract=function(e,t){return g.contract(this,e,t)},t.prototype.area=function(){return f.area(this)},t.prototype.getBounds=function(){return f.getBounds(this)},t.prototype.isSelfIntersecting=function(e){return p.isSelfIntersecting(this,e)},t.prototype.extrudeInOrthonormalBasis=function(e,t,r){return d.extrudeInOrthonormalBasis(this,e,t,r)},t.prototype.extrudeInPlane=function(e,t,r,n){return d.extrudeInPlane(this,e,t,r,n)},t.prototype.extrude=function(e){return d.extrude(this,e)},t.prototype.rotateExtrude=function(e){return d.rotateExtrude(this,e)},t.prototype.check=function(){return p.isCAGValid(this)},t.prototype.canonicalized=function(){return l.canonicalize(this)},t.prototype.reTesselated=function(){return c.reTesselate(this)},t.prototype.getOutlinePaths=function(){return v.cagOutlinePaths(this)},t.prototype.overCutInsideCorners=function(e){return h.overCutInsideCorners(this,e)},t.prototype.hasPointInside=function(e){return p.hasPointInside(this,e)},t.prototype.toString=function(){var e="CAG ("+this.sides.length+" sides):\n";return this.sides.map((function(t){e+="  "+t.toString()+"\n"})),e},t.prototype._toCSGWall=function(e,t){var r=this.sides.map((function(r){return r.toPolygon3D(e,t)}));return a.fromPolygons(r)},t.prototype._toVector3DPairs=function(e){var t=this.sides.map((function(e){var t=e.vertex0.pos,r=e.vertex1.pos;return[s.Vector3.Create(t.x,t.y,0),s.Vector3.Create(r.x,r.y,0)]}));return void 0!==e&&(t=t.map((function(t){return t.map((function(t){return t.transform(e)}))}))),t},t.prototype._toPlanePolygons=function(e){var t=(e=Object.assign({},{flipped:!1},e)).flipped,r=[0,0,0],n=[0,0,1],o=[0,1,0],u=new i.Connector(r,n,o),l=e.translation||r,c=e.axisVector||n,p=e.normalVector||o,f=e.toConnector||new i.Connector(l,c,p),h=u.getTransformationTo(f,!1,0),d=this.getBounds();d[0]=d[0].minus(new s.Vector2(1,1)),d[1]=d[1].plus(new s.Vector2(1,1));var v=this._toCSGWall(-1,1),y=a.fromPolygons([new s.Polygon3([new s.Vertex3(new s.Vector3(d[0].x,d[0].y,0)),new s.Vertex3(new s.Vector3(d[1].x,d[0].y,0)),new s.Vertex3(new s.Vector3(d[1].x,d[1].y,0)),new s.Vertex3(new s.Vector3(d[0].x,d[1].y,0))])]);t&&(y=y.invert());var g=(y=y.intersectSub(v)).polygons.filter((function(e){return Math.abs(e.plane.normal.z)>.99}));return g.forEach((function(e){e.vertices.forEach((function(e){e.uv=new s.Vector2(e.pos.x,e.pos.y)}))})),g.map((function(e){return e.transform(h)}))},t.prototype._toWallPolygons=function(e,t){void 0===t&&(t=0);var r=new i.Connector([0,0,0],[0,0,1],[0,1,0]),n=e.toConnector1,o=e.toConnector2;if(!(n instanceof i.Connector&&o instanceof i.Connector))throw new Error("could not parse Connector arguments toConnector1 or toConnector2");if(e.cag&&e.cag.sides.length!==this.sides.length)throw new Error("target cag needs same sides count as start cag");var a=e.cag||this,u=r.getTransformationTo(n,n.axisvector.z<0,0),l=r.getTransformationTo(o,o.axisvector.z<0,0),c=this._toVector3DPairs(u),p=a._toVector3DPairs(l),f=n.axisvector.z<0,h=[],d=[],v=[c[0]],y=[p[0]],g=0;for(g=1;g<c.length;++g)c[g][1].equals(c[g-1][0])||c[g][0].equals(c[g-1][1])||(h.push(v),v=[],d.push(y),y=[]),v.push(c[g]),y.push(p[g]);h.push(v),d.push(y);var m=[];return h.forEach((function(e,r){var n=0,o=0;p=d[r],e.forEach((function(e,r){var i=n+e[0].distanceTo(e[1]),a=o+p[r][0].distanceTo(p[r][1]),u=e[0].distanceTo(p[r][0]),l=e[1].distanceTo(p[r][1]),c=new s.Polygon3([s.Vertex3.fromPosAndUV(p[r][1],new s.Vector2(a,l*(1+t))),s.Vertex3.fromPosAndUV(p[r][0],new s.Vector2(o,u*(1+t))),s.Vertex3.fromPosAndUV(e[0],new s.Vector2(n,u*t))]),h=new s.Polygon3([s.Vertex3.fromPosAndUV(p[r][1],new s.Vector2(a,l*(1+t))),s.Vertex3.fromPosAndUV(e[0],new s.Vector2(n,u*t)),s.Vertex3.fromPosAndUV(e[1],new s.Vector2(i,l*t))]);f&&(c.plane=c.plane.flipped(),h.plane=h.plane.flipped()),m.push(c),m.push(h),n=i,o=a}))})),m},t.prototype.toPoints=function(){var e=this.sides.map((function(e){return e.vertex0.pos}));return e.length>0&&e.push(e.shift()),e},t.prototype.toCompactBinary=function(){var e=this.canonicalized(),t=e.sides.length,r={},n=[],o=0,i=new Uint32Array(2*t),s=0;e.sides.map((function(e){[e.vertex0,e.vertex1].map((function(e){var t,a=e.getTag();a in r?t=r[a]:(t=o++,r[a]=t,n.push(e)),i[s++]=t}))}));var a=new Float64Array(2*o),u=0;return n.map((function(e){var t=e.pos;a[u++]=t._x,a[u++]=t._y})),{class:"CAG",sideVertexIndices:i,vertexData:a}},t.Vertex=s.Vertex2,t.Side=s.Side,t.circle=m.circle,t.ellipse=m.ellipse,t.rectangle=m.rectangle,t.roundedRectangle=m.roundedRectangle,t.fromSides=u.fromSides,t.fromObject=u.fromObject,t.fromPoints=u.fromPoints,t.fromPointsNoCheck=u.fromPointsNoCheck,t.fromPath2=u.fromPath2,t.fromFakeCSG=u.fromFakeCSG,t.fromCompactBinary=u.fromCompactBinary,t}(s.TransformationMethods);t.CAG=x},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),s=function(e){function t(t,r,n){var o=e.call(this)||this;return o.point=new i.Vector3(t),o.axisvector=new i.Vector3(r).unit(),o.normalvector=new i.Vector3(n).unit(),o}return o(t,e),t.prototype.normalized=function(){var e=this.axisvector.unit(),r=this.normalvector.cross(e).unit(),n=e.cross(r);return new t(this.point,e,n)},t.prototype.transform=function(e){var r=this.point.multiply4x4(e);return new t(r,this.point.plus(this.axisvector).multiply4x4(e).minus(r),this.point.plus(this.normalvector).multiply4x4(e).minus(r))},t.prototype.getTransformationTo=function(e,t,r){t=!!t,r=r?Number(r):0;var n=this.normalized();e=e.normalized();var o=i.Matrix4x4.translation(this.point.negated()),s=i.Plane.anyPlaneFromVector3Ds(new i.Vector3(0,0,0),n.axisvector,e.axisvector),a=new i.OrthoNormalBasis(s),u=a.to2D(n.axisvector).angle(),l=a.to2D(e.axisvector).angle(),c=180*(l-u)/Math.PI;t&&(c+=180),o=(o=(o=o.multiply(a.getProjectionMatrix())).multiply(i.Matrix4x4.rotationZ(c))).multiply(a.getInverseProjectionMatrix());var p=n.transform(o),f=i.Plane.fromNormalAndPoint(e.axisvector,new i.Vector3(0,0,0)),h=new i.OrthoNormalBasis(f);return u=h.to2D(p.normalvector).angle(),c=180*((l=h.to2D(e.normalvector).angle())-u)/Math.PI,c+=r,o=(o=(o=(o=o.multiply(h.getProjectionMatrix())).multiply(i.Matrix4x4.rotationZ(c))).multiply(h.getInverseProjectionMatrix())).multiply(i.Matrix4x4.translation(e.point))},t.prototype.axisLine=function(){return new i.Line3D(this.point,this.axisvector)},t.prototype.extend=function(e){return new t(this.point.plus(this.axisvector.unit().times(e)),this.axisvector,this.normalvector)},t}(i.TransformationMethods);t.Connector=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.parseOption=function(e,t,r){var n=r;return e&&t in e&&(n=e[t]),n},t.parseOptionAs3DVector=function(e,r,o){var i=t.parseOption(e,r,o);return i=new n.Vector3(i)},t.parseOptionAs3DVectorList=function(e,r,o){return t.parseOption(e,r,o).map((function(e){return new n.Vector3(e)}))},t.parseOptionAs2DVector=function(e,r,o){var i=t.parseOption(e,r,o);return i=new n.Vector2(i)},t.parseOptionAsFloat=function(e,r,n){var o=t.parseOption(e,r,n);if("string"==typeof o&&(o=Number(o)),isNaN(o)||"number"!=typeof o)throw new Error("Parameter "+r+" should be a number");return o},t.parseOptionAsInt=function(e,r,n){var o=t.parseOption(e,r,n);if(o=Number(Math.floor(o)),isNaN(o))throw new Error("Parameter "+r+" should be a number");return o},t.parseOptionAsBool=function(e,r,n){var o=t.parseOption(e,r,n);return"string"==typeof o&&("true"===o?o=!0:("false"===o||"0"===o)&&(o=!1)),o=!!o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(90);t.translate=n.translate;var o=r(91);t.scale=o.scale;var i=r(92);t.rotate=i.rotate;var s=r(93);t.transform=s.transform;var a=r(94);t.center=a.center;var u=r(95);t.mirror=u.mirror;var l=r(96);t.expand=l.expand;var c=r(97);t.contract=c.contract;var p=r(98);t.minkowski=p.minkowski;var f=r(27);t.hull=f.hull;var h=r(101);t.chain_hull=h.chain_hull},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(43);t.union=n.union;var o=r(44);t.difference=o.difference;var i=r(45);t.intersection=i.intersection},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(2),s=r(5),a=r(3);t.expandedShellOfCCSG=function(e,t,r,u){var l,c=e.reTesselated();l=u?c:new s.CSG,c.polygons.map((function(e){var r=e.plane.normal.unit().times(2*t),n=e.translate(r.times(-.5)).extrude(r);l=l.unionSub(n,!1,!1)}));var p={};for(var f in c.polygons.map((function(e){for(var t=e.vertices.length,r=e.vertices[t-1],n=r.getTag(),o=0;o<t;o++){var i=e.vertices[o],s=i.getTag(),a=void 0,u=void 0;(a=s<n?s+"-"+n:n+"-"+s)in p?u=p[a]:(u={v1:r,v2:i,planenormals:[]},p[a]=u),u.planenormals.push(e.plane.normal),n=s,r=i}})),p){for(var h=p[f],d=h.v1.pos,v=h.v2.pos,y=v.minus(d).unit(),g=h.planenormals[0].unit(),m=g.cross(y),x=[],w=0;w<r;w++)x.push(w*Math.PI*2/r);w=0;for(var _=h.planenormals.length;w<_;w++){var P=h.planenormals[w],b=m.dot(P),O=g.dot(P);(T=Math.atan2(b,O))<0&&(T+=2*Math.PI),x.push(T),(T=Math.atan2(-b,-O))<0&&(T+=2*Math.PI),x.push(T)}var V=(x=x.sort(i.fnNumberSort)).length,M=void 0,C=void 0,A=[],S=[],j=[];for(w=-1;w<V;w++){var T=x[w<0?w+V:w],E=(b=Math.sin(T),O=Math.cos(T),g.times(O*t).plus(m.times(b*t))),z=d.plus(E),D=v.plus(E),k=!1;if(w>=0&&z.distanceTo(M)<n.EPS&&(k=!0),!k){if(w>=0){A.push(new o.Vertex3(z)),S.push(new o.Vertex3(D));var F=[new o.Vertex3(C),new o.Vertex3(D),new o.Vertex3(z),new o.Vertex3(M)],I=new o.Polygon3(F);j.push(I)}M=z,C=D}}S.reverse(),j.push(new o.Polygon3(A)),j.push(new o.Polygon3(S));var B=a.fromPolygons(j);l=l.unionSub(B,!1,!1)}var G={};for(var N in c.polygons.map((function(e){e.vertices.map((function(t){var r,n=t.getTag();n in G?r=G[n]:(r={pos:t.pos,normals:[]},G[n]=r),r.normals.push(e.plane.normal)}))})),G){var R=G[N],q=R.normals[0].unit(),L=null,Z=0;for(w=1;w<R.normals.length;w++){var Y=R.normals[w].unit(),U=q.cross(Y).length();U>.05&&U>Z&&(Z=U,L=Y)}L||(L=q.randomNonParallelVector());var X=q.cross(L).unit(),W=X.cross(q),H=s.CSG.sphere({center:R.pos,radius:t,resolution:r,axes:[q,X,W]});l=l.unionSub(H,!1,!1)}return l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(4),s=r(6);t.expandedShellOfCAG=function(e,t,r){(r=r||8)<4&&(r=4);var a=[],u={},l=e.canonicalized();for(var c in l.sides.map((function(e){var r=e.vertex1.pos.minus(e.vertex0.pos),o=r.length();if(o>n.EPS){var s=(r=r.times(1/o)).normal().times(t),l=[e.vertex1.pos.plus(s),e.vertex1.pos.minus(s),e.vertex0.pos.minus(s),e.vertex0.pos.plus(s)],c=i.fromPoints(l);a.push(c);for(var p=0;p<2;p++){var f=0===p?e.vertex0.pos:e.vertex1.pos,h=0===p?e.vertex1.pos:e.vertex0.pos,d=f.x+" "+f.y;d in u||(u[d]=[]),u[d].push({p1:f,p2:h})}}})),u){var p=u[c],f=void 0,h=void 0,d=p[0].p1;if(2===p.length){var v=p[0].p2,y=p[1].p2;if(f=v.minus(d).angleDegrees(),(h=y.minus(d).angleDegrees())<f&&(h+=360),h>=f+360&&(h-=360),h<f+180){var g=h;h=f+360,f=g}f+=90,h-=90}else f=0,h=360;var m=h>f+359.999;if(m&&(f=0,h=360),h>f+n.angleEPS){var x=[];m||x.push(d);var w=Math.round(r*(h-f)/360);w<1&&(w=1);for(var _=0;_<=w;_++){var P=f+_/w*(h-f);_===w&&(P=h);var b=d.plus(o.Vector2.fromAngleDegrees(P).times(t));(!m||_>0)&&x.push(b)}var O=i.fromPointsNoCheck(x);a.push(O)}}var V=new s.CAG;return V=V.union(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26);t.extrudeInOrthonormalBasis=n.extrudeInOrthonormalBasis;var o=r(74);t.extrudeInPlane=o.extrudeInPlane;var i=r(75);t.extrude=i.extrude;var s=r(76);t.rotateExtrude=s.rotateExtrude;var a=r(77);t.linear_extrude=a.linear_extrude;var u=r(78);t.rotate_extrude=u.rotate_extrude;var l=r(83);t.rectangular_extrude=l.rectangular_extrude},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=r(15);t.vectorChar=function(e,t){void 0===t&&(t="?");var r=o.vectorParams(e,t),i=r.xOffset,s=r.yOffset,a=r.input,u=r.font,l=r.height,c=r.extrudeOffset,p=a.charCodeAt(0);p&&u[p]||(p=63);for(var f=n(u[p]),h=(l-c)/u.height,d=c/2,v=f.shift()*h,y=[],g=[],m=0,x=f.length;m<x;m+=2){var w=h*f[m]+i,_=h*f[m+1]+s+d;void 0===f[m]?(y.push(g),g=[],m--):g.push([w,_])}return g.length&&y.push(g),{width:v,height:l,segments:y}}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(117);t.defaultsVectorParams={xOffset:0,yOffset:0,input:"?",align:"left",font:o.hersheyFont,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0},t.vectorParams=function(e,r){return void 0===r&&(r="?"),n(n(n({},t.defaultsVectorParams),{input:r}),"string"==typeof e?{input:e}:e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36);t.square=n.square;var o=r(86);t.circle=o.circle;var i=r(87);t.polygon=i.polygon;var s=r(88);t.triangle=s.triangle;var a=r(89);t.cube=a.cube;var u=r(102);t.sphere=u.sphere;var l=r(28);t.geodesicSphere=l.geodesicSphere;var c=r(103);t.cylinder=c.cylinder;var p=r(104);t.torus=p.torus;var f=r(29);t.polyhedron=f.polyhedron},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0);t.isCAGValid=function(e){var t=[];e.isSelfIntersecting(!0)&&t.push("Self intersects");var r={},o=function(e){var t=e.x+" "+e.y;t in r||(r[t]=0),r[t]++};for(var i in e.sides.map((function(e){o(e.vertex0.pos),o(e.vertex1.pos)})),r){var s=r[i];1&s&&t.push("Uneven number of sides ("+s+") for point "+i)}var a=e.area();if(a<n.areaEPS&&t.push("Area is "+a),t.length>0){var u="";throw t.map((function(e){u+=e+"\n"})),new Error(u)}},t.isSelfIntersecting=function(e,t){for(var r=e.sides.length,n=0;n<r;n++)for(var i=e.sides[n],s=n+1;s<r;s++){var a=e.sides[s];if(o.linesIntersect(i.vertex0.pos,i.vertex1.pos,a.vertex0.pos,a.vertex1.pos))return t&&(console.log("side "+n+": "+i),console.log("side "+s+": "+a)),!0}return!1},t.hasPointInside=function(e,r){var n=null,o=null,i=!1;return e.sides.forEach((function(e){n=e.vertex0.pos,o=e.vertex1.pos,t.hasPointInside.c1(r,n,o)&&t.hasPointInside.c2(r,n,o)&&(i=!i)})),i},t.hasPointInside.c1=function(e,t,r){return t.y>e.y!=r.y>e.y},t.hasPointInside.c2=function(e,t,r){return e.x<(r.x-t.x)*(e.y-t.y)/(r.y-t.y)+t.x},t.contains=function(e,r){for(var n=0,o=r.sides.length;n<o;n++)if(!t.hasPointInside(e,r.sides[n].vertex0.pos))return!1;return!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.transformObj=function(t,r,n){for(var o in t)if("_transform"!==o&&"_merge"!==o){var i=t[o],s=i;"object"==typeof i&&("transform"in i&&"function"==typeof i.transform?s=i.transform(n):i instanceof Array?(s=[],e.transformObj(i,s,n)):i instanceof e&&(s=new e,e.transformObj(i,s,n))),r[o]=s}},e.cloneObj=function(t,r){for(var n in t)if("_transform"!==n&&"_merge"!==n){var o=t[n],i=o;if("object"==typeof o)if(o instanceof Array){i=[];for(var s=0;s<o.length;s++)i.push(o[s])}else o instanceof e&&(i=new e,e.cloneObj(o,i));r[n]=i}},e.addFrom=function(t,r){for(var n in r)"_transform"!==n&&"_merge"!==n&&(n in t&&"object"==typeof t[n]&&t[n]instanceof e&&"object"==typeof r[n]&&r[n]instanceof e?e.addFrom(t[n],r[n]):n in t||(t[n]=r[n]))},e.prototype._transform=function(t){var r=new e;return e.transformObj(this,r,t),r},e.prototype._merge=function(t){var r=new e;return e.cloneObj(this,r),e.addFrom(r,t),r},e}();t.Properties=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(20),i=r(60),s=r(3),a=r(4);t.canonicalize=function(e,t){return e.isCanonicalized?e:"sides"in e?l(e,t):u(e,t)};var u=function(e,t){if(e.isCanonicalized)return e;var r=new o.FuzzyCSGFactory,n=c(r,e);return n.isCanonicalized=!0,n.isRetesselated=e.isRetesselated,n.properties=e.properties,n},l=function(e,t){if(e.isCanonicalized)return e;var r=new i.FuzzyCAGFactory,n=p(r,e);return n.isCanonicalized=!0,n},c=function(e,t){var r=e,n=[];return t.polygons.forEach((function(e){var t=r.getPolygon(e);t.vertices.length>=3&&n.push(t)})),s.fromPolygons(n)},p=function(e,t){var r=e,o=t.sides.map((function(e){return r.getSide(e)})).filter((function(e){return e.length()>n.EPS}));return a.fromSides(o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(21),s=function(){function e(){this.vertexfactory=new i.FuzzyFactory(5,n.EPS),this.planefactory=new i.FuzzyFactory(4,n.EPS),this.polygonsharedfactory={}}return e.prototype.getPolygonShared=function(e){var t=e.getHash();return t in this.polygonsharedfactory?this.polygonsharedfactory[t]:(this.polygonsharedfactory[t]=e,e)},e.prototype.getVertex=function(e){var t=[e.pos._x,e.pos._y,e.pos._z,e.uv._x,e.uv._y];return this.vertexfactory.lookupOrCreate(t,(function(t){return e}))},e.prototype.getPlane=function(e){var t=[e.normal._x,e.normal._y,e.normal._z,e.w];return this.planefactory.lookupOrCreate(t,(function(t){return e}))},e.prototype.getPolygon=function(e){var t=this.getPlane(e.plane),r=this.getPolygonShared(e.shared),n=this,i=e.vertices.map((function(e){return n.getVertex(e)})),s=[];if(i.length>0){var a=i[i.length-1].getTag();i.forEach((function(e){var t=e.getTag();t!==a&&s.push(e),a=t}))}return s.length<3&&(s=[]),new o.Polygon3(s,r,t)},e}();t.FuzzyCSGFactory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.lookuptable={},this.multiplier=1,this.multiplier=1/t}return e.prototype.lookupOrCreate=function(e,t){var r=this.multiplier,n="";if(e.forEach((function(e){var t=Math.round(e*r);n+=t+"/"})),n in this.lookuptable)return this.lookuptable[n];for(var o=t(e),i=e.map((function(e){var t=Math.floor(e*r);return[t+"/",t+1+"/"]})),s=1<<e.length,a=function(e){var t=e;n="",i.forEach((function(e){n+=e[1&t],t>>=1})),u.lookuptable[n]=o},u=this,l=0;l<s;++l)a(l);return o},e}();t.FuzzyFactory=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),o=r(0),i=r(3);t.reTesselate=function(e){if(e.isRetesselated)return e;var t={},r=e.isCanonicalized,s=new n.FuzzyCSGFactory;e.polygons.map((function(e){var n=e.plane,o=e.shared;r||(n=s.getPlane(n),o=s.getPolygonShared(o));var i=n.getTag()+"/"+o.getTag();i in t?t[i].push(e):t[i]=[e]}));var a=[];for(var u in t){var l=t[u];if(l.length<2)a=a.concat(l);else{var c=[];o.reTesselateCoplanarPolygons(l,c),a=a.concat(c)}}var p=i.fromPolygons(a);return p.isRetesselated=!0,p.properties=e.properties,p}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(7),i=r(4);t.getTransformationAndInverseTransformationToFlatLying=function(e){if(0===e.polygons.length){var t=new n.Matrix4x4;return[t,t]}var r=e.canonicalized(),i={};r.polygons.map((function(e){i[e.plane.getTag()]=e.plane}));var s=new n.Vector3(1,0,0),a=new n.Vector3(0,1,0),u=new n.Vector3(0,0,1),l=new o.Connector([0,0,0],[0,0,-1],s),c=new o.Connector([0,0,0],[0,0,-1],a),p=!0,f=0,h=0,d=void 0,v=void 0;for(var y in i){var g,m=i[y],x=m.normal.times(m.w),w=void 0,_=void 0;if(m.normal.cross(s).length()>m.normal.cross(a).length())w=(g=new o.Connector(x,m.normal,s)).getTransformationTo(l,!1,0),_=l.getTransformationTo(g,!1,0);else w=(g=new o.Connector(x,m.normal,a)).getTransformationTo(c,!1,0),_=c.getTransformationTo(g,!1,0);var P=r.transform(w),b=-m.normal.dot(u),O=P.getBounds(),V=O[1].z-O[0].z,M=p;if(M||(V<f||V===f&&b>h)&&(M=!0),M){var C=new n.Vector3([-.5*(O[1].x+O[0].x),-.5*(O[1].y+O[0].y),-O[0].z]);f=V,h=b,d=w=w.multiply(n.Matrix4x4.translation(C)),v=_=n.Matrix4x4.translation(C.negated()).multiply(_)}p=!1}return[d,v]},t.getTransformationToFlatLying=function(e){return e.getTransformationAndInverseTransformationToFlatLying()[0]},t.lieFlat=function(e){var t=e.getTransformationToFlatLying();return e.transform(t)},t.overCutInsideCorners=function(e,t){var r=e.canonicalized(),o={};r.sides.map((function(e){e.vertex0.getTag()in o||(o[e.vertex0.getTag()]={pos:e.vertex0.pos,from:[],to:[]}),o[e.vertex0.getTag()].to.push(e.vertex1.pos),e.vertex1.getTag()in o||(o[e.vertex1.getTag()]={pos:e.vertex1.pos,from:[],to:[]}),o[e.vertex1.getTag()].from.push(e.vertex0.pos)}));var s=[];for(var a in o){var u=o[a];if(1===u.from.length&&1===u.to.length){var l=u.from[0],c=u.pos,p=u.to[0],f=c.minus(l).unit(),h=p.minus(c).unit();if(f.cross(h)<.001){var d=h.angleRadians()-f.angleRadians()+Math.PI;d<0?d+=2*Math.PI:d>=2*Math.PI&&(d-=2*Math.PI);for(var v=h.minus(f).unit(),y=30/180*Math.PI,g=t/Math.cos(y/2),m=c.plus(v.times(g)),x=d+v.angleRadians(),w=2*(Math.PI-d),_=2*Math.ceil(w/y/2),P=[m],b=0;b<=_;b++){var O=x+b/_*w,V=n.Vector2.fromAngleRadians(O).times(g).plus(m);P.push(V)}s.push(i.fromPoints(P))}}}return r.subtract(s)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o={axes:[!0,!0,!0],center:[0,0,0]};t.center=function(e,t){t=Array.isArray(t)?t:[t];var r=e=n(n({},o),e),i=r.axes,s=r.center,a=s[0],u=s[1],l=s[2],c=t.map((function(e){var t=e.getBounds(),r=[0,0,0];return i[0]&&(r[0]=a-(t[0].x+(t[1].x-t[0].x)/2)),i[1]&&(r[1]=u-(t[0].y+(t[1].y-t[0].y)/2)),i[2]&&(r[2]=l-(t[0].z+(t[1].z-t[0].z)/2)),e.translate(r)}));return 1===c.length?c[0]:c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(64);t.expand=n.expand;var o=r(65);t.contract=o.contract;var i=r(12);t.expandedShellOfCAG=i.expandedShellOfCAG;var s=r(11);t.expandedShellOfCCSG=s.expandedShellOfCCSG},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(8);t.extrudeInOrthonormalBasis=function(e,t,r,i){if(!(t instanceof n.OrthoNormalBasis))throw new Error("extrudeInPlane: the first parameter should be a OrthoNormalBasis");var s=e.extrude({offset:[0,0,r]});o.parseOptionAsBool(i,"symmetrical",!1)&&(s=s.translate([0,0,-r/2]));var a=t.getInverseProjectionMatrix();return s=s.transform(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(99),o=r(4),i=r(2);t.hull=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[],s=e;s[0].length&&(s=s[0]);for(var a={},u=0;u<s.length;u++){var l=s[u];if(!i.isCAG(l))throw new Error("ERROR: hull() accepts only 2D forms / CAG");for(var c=0;c<l.sides.length;c++){var p=l.sides[c].vertex0.pos.x,f=l.sides[c].vertex0.pos.y;a[p+","+f]||(r.push({x:p,y:f}),a[p+","+f]++)}}var h=new n.ConvexHull;h.compute(r);var d=h.getIndices();if(d&&d.length>0){var v=[];for(u=0;u<d.length;u++)v.push(r[d[u]]);return o.fromPoints(v)}}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(29),i=r(9),s={r:1,fn:5},a=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],u=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],l=function(e,t,r){for(var n=1-r,o=[],i=0;i<3;i++)o[i]=e[i]*n+t[i]*r;return o},c=function(e,t,r){for(var n=e[0],o=e[1],i=e[2],s=r,a=[],u=[],c=0;c<t;c++)for(var p=0;p<t-c;p++){var f=c/t,h=(c+1)/t,d=p/(t-c),v=(p+1)/(t-c),y=t-c-1?p/(t-c-1):1,g=[];g[0]=l(l(n,o,d),i,f),g[1]=l(l(n,o,v),i,f),g[2]=l(l(n,o,y),i,h);for(var m=0;m<3;m++)for(var x=Math.sqrt(g[m][0]*g[m][0]+g[m][1]*g[m][1]+g[m][2]*g[m][2]),w=0;w<3;w++)g[m][w]/=x;if(a.push(g[0],g[1],g[2]),u.push([s,s+1,s+2]),s+=3,p<t-c-1){var _=t-c-1?(p+1)/(t-c-1):1;g[0]=l(l(n,o,v),i,f),g[1]=l(l(n,o,_),i,h),g[2]=l(l(n,o,y),i,h);for(m=0;m<3;m++)for(x=Math.sqrt(g[m][0]*g[m][0]+g[m][1]*g[m][1]+g[m][2]*g[m][2]),w=0;w<3;w++)g[m][w]/=x;a.push(g[0],g[1],g[2]),u.push([s,s+1,s+2]),s+=3}}return{points:a,triangles:u,offset:s}};t.geodesicSphere=function(e){for(var t=n(n({},s),e),r=t.r,l=t.fn,p=Math.max(1,Math.floor(l/6)),f=[],h=[],d=0,v=0;v<u.length;v++){var y=c([a[u[v][0]],a[u[v][1]],a[u[v][2]]],p,d);f=f.concat(y.points),h=h.concat(y.triangles),d=y.offset}return i.scale(r,o.polyhedron({points:f,triangles:h}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(3);t.polyhedron=function(e){for(var t=[],r=e.triangles||e.polygons,i=e.colors||null,s=0;s<r.length;s++){for(var a=[],u=0;u<r[s].length;u++)a[u]=e.points[r[s][u]];var l=[];for(u=r[s].length-1;u>=0;u--)l.push(new n.Vertex3(new n.Vector3(a[u][0],a[u][1],a[u][2])));var c=n.Polygon3.defaultShared;i&&i[s]&&(c=n.Polygon3.Shared.fromColor(i[s])),t.push(new n.Polygon3(l,c))}return o.fromPolygons(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(107);t.css2rgb=function(e){var t=n.cssColors3ub[e.toLowerCase()];return[t[0]/255,t[1]/255,t[2]/255]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hue2rgb=function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o={x:0,y:0};t.translateLine=function(e,t){for(var r=n(n({},o),e),i=r.x,s=r.y,a=t.segments,u=0,l=a.length;u<l;u++)for(var c=a[u],p=0,f=c.length;p<f;p++){var h=c[p];c[p]=[h[0]+i,h[1]+s]}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(15),o=r(14),i=r(32);t.vectorText=function(e,t){void 0===t&&(t="?");for(var r=n.vectorParams(e,t),s=r.xOffset,a=r.yOffset,u=r.input,l=r.font,c=r.height,p=r.align,f=r.extrudeOffset,h=r.lineSpacing,d=r.letterSpacing,v=[s,a],y=v[0],g=v[1],m={width:0,segments:[]},x=[],w=[],_=0,P=y,b=function(){x.push(m),_=Math.max(_,m.width),m={width:0,segments:[]}},O=0,V=u.length;O<V;O++){var M=u[O],C=o.vectorChar({xOffset:y,yOffset:g,font:l,height:c,extrudeOffset:f},M);if("\n"!==M){var A=C.width*d;m.width+=A,y+=A," "!==M&&(m.segments=m.segments.concat(C.segments))}else y=P,g-=C.height*h,b()}for(m.segments.length&&b(),O=0,V=x.length;O<V;O++){if(m=x[O],_>m.width){var S=_-m.width;"right"===p?m=i.translateLine({x:S},m):"center"===p&&(m=i.translateLine({x:S/2},m))}w=w.concat(m.segments)}return w}},function(e,t,r){e.exports=r(35)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16);t.color=r(105),t.primitives2d={circle:n.circle,square:n.square,polygon:n.polygon,triangle:n.triangle},t.primitives3d={cube:n.cube,sphere:n.sphere,geodesicSphere:n.geodesicSphere,cylinder:n.cylinder,torus:n.torus,polyhedron:n.polyhedron},t.booleanOps=r(10),t.transformations=r(9),t.extrusions=r(13),t.maths=r(114),t.text=r(115);var o=r(5);t.CSG=o.CSG;var i=r(6);t.CAG=i.CAG;var s=r(2);t.isCAG=s.isCAG,t.isCSG=s.isCSG,t.version={build:"0.8.0",date:"2020-05-09T09:42:01.139Z",stamp:1589017321}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),s={center:!1,size:[1,1]};t.square=function(e){var t=n(n({},s),"number"==typeof e?{size:[e,e]}:Array.isArray(e)?{size:o(e)}:e),r=t.center,a=t.size,u="number"==typeof a?[a/2,a/2]:[a[0]/2,a[1]/2],l=u[0],c=u[1],p=r?[0,0]:[l,c];return i.CAG.rectangle({center:p,radius:[l,c]})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcInterpolationFactor=function(e,t,r){return e.distanceTo(r)/e.distanceTo(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(2);t.linesIntersect=function(e,t,r,i){if(t.equals(r)||i.equals(e)){if(i.minus(r).unit().plus(t.minus(e).unit()).length()<n.EPS)return!0}else{var s=t.minus(e),a=i.minus(r);if(Math.abs(s.cross(a))<1e-9)return!1;var u=o.solve2Linear(-s.x,a.x,-s.y,a.y,e.x-r.x,e.y-r.y);if(u[0]>1e-6&&u[0]<.999999&&u[1]>1e-5&&u[1]<.999999)return!0}return!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.fromPoints=function(e,t,r){var o=[];return e.map((function(e){var t=new n.Vector3(e),r=new n.Vertex3(t);o.push(r)})),r?new n.Polygon3(o,t,r):new n.Polygon3(o,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(2),i=r(0);t.reTesselateCoplanarPolygons=function(e,t){var r=e.length;if(r>0){for(var s=e[0].plane,a=e[0].shared,u=new i.OrthoNormalBasis(s),l=[],c=[],p=[],f={},h={},d={},v=1/n.EPS*10,y=0;y<r;y++){var g=e[y],m=[],x=[],w=g.vertices.length,_=-1;if(w>0){for(var P=void 0,b=void 0,O=0;O<w;O++){var V=u.to2D(g.vertices[O].pos),M=g.vertices[O].uv,C=Math.floor(V.y*v),A=void 0;C in d?A=d[C]:C+1 in d?A=d[C+1]:C-1 in d?A=d[C-1]:(A=V.y,d[C]=V.y),V=i.Vector2.Create(V.x,A),m.push(V),x.push(M);var S=V.y;(0===O||S<P)&&(P=S,_=O),(0===O||S>b)&&(b=S,O),S in h||(h[S]={}),h[S][y]=!0}P>=b?(m=[],x=[],w=0,_=-1):(P in f||(f[P]=[]),f[P].push(y))}m.reverse(),x.reverse(),_=w-_-1,l.push(m),c.push(x),p.push(_)}var j=[];for(var T in h)j.push(T);j.sort(o.fnNumberSort);for(var E=[],z=[],D=function(e){for(var r=[],d=j[e],v=Number(d),y=h[d],g=0;g<E.length;++g){if(y[A=(G=E[g]).polygonindex]){for(var m=l[A],x=c[A],w=m.length,_=G.leftvertexindex,P=G.rightvertexindex;;){if((k=_+1)>=w&&(k=0),m[k].y!==v)break;_=k}if((F=P-1)<0&&(F=w-1),m[F].y===v&&(P=F),_!==G.leftvertexindex&&_===P)E.splice(g,1),--g;else{G.leftvertexindex=_,G.rightvertexindex=P,G.topleft=m[_],G.topleftuv=x[_],G.topright=m[P],G.toprightuv=x[P],(k=_+1)>=w&&(k=0),G.bottomleft=m[k],G.bottomleftuv=x[k];var b=P-1;b<0&&(b=w-1),G.bottomright=m[b],G.bottomrightuv=x[b]}}}var O=void 0;if(e>=j.length-1)E=[],O=null;else{var V=.5*(v+(O=Number(j[e+1]))),M=f[d];for(var C in M){for(var A=M[C],S=(m=l[A],x=c[A],w=m.length,p[A]),T=S;;){if((ee=T+1)>=w&&(ee=0),m[ee].y!==v)break;if(ee===S)break;T=ee}for(var D=S;;){if((ee=D-1)<0&&(ee=w-1),m[ee].y!==v)break;if(ee===T)break;D=ee}var k,F;(k=T+1)>=w&&(k=0),(F=D-1)<0&&(F=w-1);var I={polygonindex:A,leftvertexindex:T,rightvertexindex:D,topleft:m[T],topleftuv:x[T],topright:m[D],toprightuv:x[D],bottomleft:m[k],bottomleftuv:x[k],bottomright:m[F],bottomrightuv:x[F]};o.insertSorted(E,I,(function(e,t){var r=o.interpolateBetween2DPointsForY(e.topleft,e.bottomleft,V),n=o.interpolateBetween2DPointsForY(t.topleft,t.bottomleft,V);return r>n?1:r<n?-1:0}))}}for(var B in E){A=(G=E[B]).polygonindex,w=(m=l[A]).length;var G,N=o.interpolateBetween2DPointsForY(G.topleft,G.bottomleft,v),R=i.Vector2.Create(N,v),q=G.topleftuv.lerp(G.bottomleftuv,i.calcInterpolationFactor(G.topleft,G.bottomleft,R));N=o.interpolateBetween2DPointsForY(G.topright,G.bottomright,v);var L=i.Vector2.Create(N,v),Z=G.toprightuv.lerp(G.bottomrightuv,i.calcInterpolationFactor(G.topright,G.bottomright,L));N=o.interpolateBetween2DPointsForY(G.topleft,G.bottomleft,O);var Y=i.Vector2.Create(N,O),U=G.topleftuv.lerp(G.bottomleftuv,i.calcInterpolationFactor(G.topleft,G.bottomleft,Y));N=o.interpolateBetween2DPointsForY(G.topright,G.bottomright,O);var X=i.Vector2.Create(N,O),W={topleft:R,topleftuv:q,topright:L,toprightuv:Z,bottomleft:Y,bottomleftuv:U,bottomright:X,bottomrightuv:G.toprightuv.lerp(G.bottomrightuv,i.calcInterpolationFactor(G.topright,G.bottomright,X)),leftline:i.Line2D.fromPoints(R,Y),rightline:i.Line2D.fromPoints(X,L)};if(r.length>0){var H=r[r.length-1],J=W.topleft.distanceTo(H.topright),K=W.bottomleft.distanceTo(H.bottomright);J<n.EPS&&K<n.EPS&&(W.topleft=H.topleft,W.topleftuv=H.topleftuv,W.leftline=H.leftline,W.bottomleft=H.bottomleft,W.bottomleftuv=H.bottomleftuv,r.splice(r.length-1,1))}r.push(W)}if(e>0){for(var Q={},$={},ee=0;ee<r.length;ee++)for(var te=r[ee],re=0;re<z.length;re++)if(!$[re]){var ne=z[re];if(ne.bottomleft.distanceTo(te.topleft)<n.EPS&&ne.bottomright.distanceTo(te.topright)<n.EPS){$[re]=!0;J=te.leftline.direction().x-ne.leftline.direction().x,K=te.rightline.direction().x-ne.rightline.direction().x;var oe=Math.abs(J)<n.EPS,ie=Math.abs(K)<n.EPS;(oe||J>=0)&&(ie||K>=0)&&(te.outpolygon=ne.outpolygon,te.leftlinecontinues=oe,te.rightlinecontinues=ie,Q[re]=!0);break}}var se=function(e){if(!Q[e]){var r=z[e];r.outpolygon.rightpoints.push(r.bottomright),r.outpolygon.rightuvcoordinates.push(r.bottomrightuv),r.bottomright.distanceTo(r.bottomleft)>n.EPS&&(r.outpolygon.leftpoints.push(r.bottomleft),r.outpolygon.leftuvcoordinates.push(r.bottomleftuv)),r.outpolygon.leftpoints.reverse(),r.outpolygon.leftuvcoordinates.reverse();var o=r.outpolygon.rightpoints.concat(r.outpolygon.leftpoints),l=r.outpolygon.rightuvcoordinates.concat(r.outpolygon.leftuvcoordinates),c=[];o.map((function(e,t){var r=u.to3D(e),n=i.Vertex3.fromPosAndUV(r,l[t]);c.push(n)}));var p=new i.Polygon3(c,a,s);t.push(p)}};for(re=0;re<z.length;re++)se(re)}for(ee=0;ee<r.length;ee++){(te=r[ee]).outpolygon?(te.leftlinecontinues||(te.outpolygon.leftpoints.push(te.topleft),te.outpolygon.leftuvcoordinates.push(te.topleftuv)),te.rightlinecontinues||(te.outpolygon.rightpoints.push(te.topright),te.outpolygon.rightuvcoordinates.push(te.toprightuv))):(te.outpolygon={leftpoints:[],leftuvcoordinates:[],rightpoints:[],rightuvcoordinates:[]},te.outpolygon.leftpoints.push(te.topleft),te.outpolygon.leftuvcoordinates.push(te.topleftuv),te.topleft.distanceTo(te.topright)>n.EPS&&(te.outpolygon.rightpoints.push(te.topright),te.outpolygon.rightuvcoordinates.push(te.toprightuv)))}z=r},k=0;k<j.length;k++)D(k)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(){function e(e){if(null!=e&&4!==e.length)throw new Error("Expecting 4 element array");this.color=e}return e.fromObject=function(t){return new e(t.color)},e.fromColor=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(1===r.length)t=r[0].slice();else{t=[];for(var o=0;o<r.length;o++)t.push(r[o])}if(3===t.length)t.push(1);else if(4!==t.length)throw new Error("setColor expects either an array with 3 or 4 elements, or 3 or 4 parameters.");return new e(t)},e.prototype.getTag=function(){var e=this.tag;return e||(e=n.getTag(),this.tag=e),e},e.prototype.getHash=function(){return this.color?this.color.join("/"):"null"},e}();t.PolygonShared=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.Polygon2D=function(e){return n.fromPoints(e)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(2);t.union=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,i={extrude2d:!1},s=n({},i),a=0,u=e;u[0].length&&(u=u[0]),"extrude2d"in u[0]&&(s=Object.assign({},i,u[0]),r=u[a++]),r=u[a++],"object"==typeof u[a]&&o.isCAG(u[a])&&s.extrude2d&&(r=u[a].extrude({offset:[0,0,.1]}));for(;a<u.length;a++){var l=u[a];"object"==typeof u[a]&&o.isCAG(u[a])&&s.extrude2d&&(l=u[a].extrude({offset:[0,0,.1]})),r=r.union(l)}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.difference=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=0,i=t;for(i[0].length&&(i=i[0]),e=i[o++];o<i.length;o++)e=n.isCAG(i[o])?e.subtract(i[o]):e.subtract(i[o].setColor(1,1,0));return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.intersection=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=0,i=t;for(i[0].length&&(i=i[0]),e=i[o++];o<i.length;o++)e=n.isCAG(i[o])?e.intersect(i[o]):e.intersect(i[o].setColor(1,1,0));return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=function(){function e(){}return e.prototype.mirrored=function(e){return this.transform(n.Matrix4x4.mirroring(e))},e.prototype.mirroredX=function(){var e=new n.Plane(n.Vector3.Create(1,0,0),0);return this.mirrored(e)},e.prototype.mirroredY=function(){var e=new n.Plane(n.Vector3.Create(0,1,0),0);return this.mirrored(e)},e.prototype.mirroredZ=function(){var e=new n.Plane(n.Vector3.Create(0,0,1),0);return this.mirrored(e)},e.prototype.translate=function(e){return this.transform(n.Matrix4x4.translation(e))},e.prototype.scale=function(e){return this.transform(n.Matrix4x4.scaling(e))},e.prototype.rotateX=function(e){return this.transform(n.Matrix4x4.rotationX(e))},e.prototype.rotateY=function(e){return this.transform(n.Matrix4x4.rotationY(e))},e.prototype.rotateZ=function(e){return this.transform(n.Matrix4x4.rotationZ(e))},e.prototype.rotate=function(e,t,r){return this.transform(n.Matrix4x4.rotation(e,t,r))},e.prototype.rotateEulerAngles=function(e,t,r,o){o=o||[0,0,0];var i=n.Matrix4x4.rotationZ(e),s=n.Matrix4x4.rotationX(t),a=n.Matrix4x4.rotationZ(r),u=n.Matrix4x4.translation(new n.Vector3(o));return this.transform(a.multiply(s).multiply(i).multiply(u))},e.prototype.rotateEulerXYZ=function(e,t,r,o){o=o||[0,0,0];var i=n.Matrix4x4.rotationX(e),s=n.Matrix4x4.rotationY(t),a=n.Matrix4x4.rotationZ(r),u=n.Matrix4x4.translation(new n.Vector3(o));return this.transform(a.multiply(s).multiply(i).multiply(u))},e}();t.TransformationMethods=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),s=r(0),a=function(e){function t(t,r){var n=e.call(this)||this,o=new s.Vector2(t);r="string"==typeof r?parseFloat(r):r;var i=o.length();return r*=i,o=o.times(1/i),n.normal=o,n.w=r,n}return o(t,e),t.fromPoints=function(e,r){var n=new s.Vector2(e),o=new s.Vector2(r).minus(n).normal().negated().unit();return new t(o,n.dot(o))},t.prototype.reverse=function(){return new t(this.normal.negated(),-this.w)},t.prototype.equals=function(e){return e.normal.equals(this.normal)&&e.w===this.w},t.prototype.origin=function(){return this.normal.times(this.w)},t.prototype.direction=function(){return this.normal.normal()},t.prototype.xAtY=function(e){return(this.w-this.normal._y*e)/this.normal.x},t.prototype.absDistanceToPoint=function(e){var t=(e=new s.Vector2(e)).dot(this.normal);return Math.abs(t-this.w)},t.prototype.intersectWithLine=function(e){var t=i.solve2Linear(this.normal.x,this.normal.y,e.normal.x,e.normal.y,this.w,e.w);return new s.Vector2(t)},t.prototype.transform=function(e){var r=new s.Vector2(0,0),n=this.normal.times(this.w),o=r.multiply4x4(e),i=this.normal.multiply4x4(e).minus(o),a=n.multiply4x4(e),u=i.dot(a);return new t(i,u)},t}(s.TransformationMethods);t.Line2D=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(2),a=r(0),u=function(e){function t(t,r){var n=e.call(this)||this;return n.point=new a.Vector3(t),n.direction=new a.Vector3(r).unit(),n}return o(t,e),t.fromPoints=function(e,r){var n=new a.Vector3(e);return new t(n,new a.Vector3(r).minus(n))},t.fromPlanes=function(e,r){var n=e.normal.cross(r.normal),o=n.length();if(o<i.EPS)throw new Error("Parallel planes");n=n.times(1/o);var u,l=Math.abs(n.x),c=Math.abs(n.y),p=Math.abs(n.z);if(l>=c&&l>=p){var f=s.solve2Linear(e.normal.y,e.normal.z,r.normal.y,r.normal.z,e.w,r.w);u=new a.Vector3(0,f[0],f[1])}else if(c>=l&&c>=p){f=s.solve2Linear(e.normal.x,e.normal.z,r.normal.x,r.normal.z,e.w,r.w);u=new a.Vector3(f[0],0,f[1])}else{f=s.solve2Linear(e.normal.x,e.normal.y,r.normal.x,r.normal.y,e.w,r.w);u=new a.Vector3(f[0],f[1],0)}return new t(u,n)},t.prototype.intersectWithPlane=function(e){var t=(e.w-e.normal.dot(this.point))/e.normal.dot(this.direction);return this.point.plus(this.direction.times(t))},t.prototype.clone=function(e){return new t(this.point.clone(),this.direction.clone())},t.prototype.reverse=function(){return new t(this.point.clone(),this.direction.negated())},t.prototype.transform=function(e){var r=this.point.multiply4x4(e);return new t(r,this.point.plus(this.direction).multiply4x4(e).minus(r))},t.prototype.closestPointOnLine=function(e){var t=new a.Vector3(e).minus(this.point).dot(this.direction)/this.direction.dot(this.direction);return this.point.plus(this.direction.times(t))},t.prototype.distanceToPoint=function(e){var t=new a.Vector3(e),r=this.closestPointOnLine(t);return t.minus(r).length()},t.prototype.equals=function(e){return!!this.direction.equals(e.direction)&&!(this.distanceToPoint(e.point)>i.EPS)},t}(a.TransformationMethods);t.Line3D=u},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=function(){function e(e){void 0===e&&(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.elements=e}return e.unity=function(){return new e},e.rotationX=function(t){var r=t*Math.PI*(1/180),n=Math.cos(r),o=Math.sin(r);return new e([1,0,0,0,0,n,o,0,0,-o,n,0,0,0,0,1])},e.rotationY=function(t){var r=t*Math.PI*(1/180),n=Math.cos(r),o=Math.sin(r);return new e([n,0,-o,0,0,1,0,0,o,0,n,0,0,0,0,1])},e.rotationZ=function(t){var r=t*Math.PI*(1/180),n=Math.cos(r),o=Math.sin(r);return new e([n,o,0,0,-o,n,0,0,0,0,1,0,0,0,0,1])},e.rotation=function(t,r,n){var i=new o.Vector3(t),s=new o.Vector3(r),a=o.Plane.fromNormalAndPoint(s,i),u=new o.OrthoNormalBasis(a),l=e.translation(i.negated());return l=(l=(l=(l=l.multiply(u.getProjectionMatrix())).multiply(e.rotationZ(n))).multiply(u.getInverseProjectionMatrix())).multiply(e.translation(i))},e.translation=function(t){var r=new o.Vector3(t);return new e([1,0,0,0,0,1,0,0,0,0,1,0,r.x,r.y,r.z,1])},e.mirroring=function(t){var r=t.normal.x,n=t.normal.y,o=t.normal.z,i=t.w;return new e([1-2*r*r,-2*n*r,-2*o*r,0,-2*r*n,1-2*n*n,-2*o*n,0,-2*r*o,-2*n*o,1-2*o*o,0,2*r*i,2*n*i,2*o*i,1])},e.scaling=function(t){var r=new o.Vector3(t);return new e([r.x,0,0,0,0,r.y,0,0,0,0,r.z,0,0,0,0,1])},e.prototype.plus=function(t){for(var r=[],n=0;n<16;n++)r[n]=this.elements[n]+t.elements[n];return new e(r)},e.prototype.minus=function(t){for(var r=[],n=0;n<16;n++)r[n]=this.elements[n]-t.elements[n];return new e(r)},e.prototype.multiply=function(t){var r=this.elements[0],n=this.elements[1],o=this.elements[2],i=this.elements[3],s=this.elements[4],a=this.elements[5],u=this.elements[6],l=this.elements[7],c=this.elements[8],p=this.elements[9],f=this.elements[10],h=this.elements[11],d=this.elements[12],v=this.elements[13],y=this.elements[14],g=this.elements[15],m=t.elements[0],x=t.elements[1],w=t.elements[2],_=t.elements[3],P=t.elements[4],b=t.elements[5],O=t.elements[6],V=t.elements[7],M=t.elements[8],C=t.elements[9],A=t.elements[10],S=t.elements[11],j=t.elements[12],T=t.elements[13],E=t.elements[14],z=t.elements[15],D=[];return D[0]=r*m+n*P+o*M+i*j,D[1]=r*x+n*b+o*C+i*T,D[2]=r*w+n*O+o*A+i*E,D[3]=r*_+n*V+o*S+i*z,D[4]=s*m+a*P+u*M+l*j,D[5]=s*x+a*b+u*C+l*T,D[6]=s*w+a*O+u*A+l*E,D[7]=s*_+a*V+u*S+l*z,D[8]=c*m+p*P+f*M+h*j,D[9]=c*x+p*b+f*C+h*T,D[10]=c*w+p*O+f*A+h*E,D[11]=c*_+p*V+f*S+h*z,D[12]=d*m+v*P+y*M+g*j,D[13]=d*x+v*b+y*C+g*T,D[14]=d*w+v*O+y*A+g*E,D[15]=d*_+v*V+y*S+g*z,new e(D)},e.prototype.clone=function(){return new e(n(this.elements))},e.prototype.rightMultiply1x3Vector=function(e){var t=e._x,r=e._y,n=e._z,i=t*this.elements[0]+r*this.elements[1]+n*this.elements[2]+1*this.elements[3],s=t*this.elements[4]+r*this.elements[5]+n*this.elements[6]+1*this.elements[7],a=t*this.elements[8]+r*this.elements[9]+n*this.elements[10]+1*this.elements[11],u=t*this.elements[12]+r*this.elements[13]+n*this.elements[14]+1*this.elements[15];if(1!==u){var l=1/u;i*=l,s*=l,a*=l}return new o.Vector3(i,s,a)},e.prototype.leftMultiply1x3Vector=function(e){var t=e._x,r=e._y,n=e._z,i=t*this.elements[0]+r*this.elements[4]+n*this.elements[8]+1*this.elements[12],s=t*this.elements[1]+r*this.elements[5]+n*this.elements[9]+1*this.elements[13],a=t*this.elements[2]+r*this.elements[6]+n*this.elements[10]+1*this.elements[14],u=t*this.elements[3]+r*this.elements[7]+n*this.elements[11]+1*this.elements[15];if(1!==u){var l=1/u;i*=l,s*=l,a*=l}return new o.Vector3(i,s,a)},e.prototype.rightMultiply1x2Vector=function(e){var t=e.x,r=e.y,n=t*this.elements[0]+r*this.elements[1]+0*this.elements[2]+1*this.elements[3],i=t*this.elements[4]+r*this.elements[5]+0*this.elements[6]+1*this.elements[7],s=(this.elements[8],this.elements[9],this.elements[10],this.elements[11],t*this.elements[12]+r*this.elements[13]+0*this.elements[14]+1*this.elements[15]);if(1!==s){var a=1/s;n*=a,i*=a,a}return new o.Vector2(n,i)},e.prototype.leftMultiply1x2Vector=function(e){var t=e.x,r=e.y,n=t*this.elements[0]+r*this.elements[4]+0*this.elements[8]+1*this.elements[12],i=t*this.elements[1]+r*this.elements[5]+0*this.elements[9]+1*this.elements[13],s=(this.elements[2],this.elements[6],this.elements[10],this.elements[14],t*this.elements[3]+r*this.elements[7]+0*this.elements[11]+1*this.elements[15]);if(1!==s){var a=1/s;n*=a,i*=a,a}return new o.Vector2(n,i)},e.prototype.isMirroring=function(){var e=new o.Vector3(this.elements[0],this.elements[4],this.elements[8]),t=new o.Vector3(this.elements[1],this.elements[5],this.elements[9]),r=new o.Vector3(this.elements[2],this.elements[6],this.elements[10]);return e.cross(t).dot(r)<0},e}();t.Matrix4x4=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),s=function(e){function t(t,r){var n=e.call(this)||this,o=void 0!==r?new i.Vector3(r):t.normal.randomNonParallelVector();return n.v=t.normal.cross(o).unit(),n.u=n.v.cross(t.normal),n.plane=t,n.planeorigin=t.normal.times(t.w),n}return o(t,e),t.GetCartesian=function(e,r){var n,o,s=e+"/"+r;if("X/Y"===s)n=[0,0,1],o=[1,0,0];else if("Y/-X"===s)n=[0,0,1],o=[0,1,0];else if("-X/-Y"===s)n=[0,0,1],o=[-1,0,0];else if("-Y/X"===s)n=[0,0,1],o=[0,-1,0];else if("-X/Y"===s)n=[0,0,-1],o=[-1,0,0];else if("-Y/-X"===s)n=[0,0,-1],o=[0,-1,0];else if("X/-Y"===s)n=[0,0,-1],o=[1,0,0];else if("Y/X"===s)n=[0,0,-1],o=[0,1,0];else if("X/Z"===s)n=[0,-1,0],o=[1,0,0];else if("Z/-X"===s)n=[0,-1,0],o=[0,0,1];else if("-X/-Z"===s)n=[0,-1,0],o=[-1,0,0];else if("-Z/X"===s)n=[0,-1,0],o=[0,0,-1];else if("-X/Z"===s)n=[0,1,0],o=[-1,0,0];else if("-Z/-X"===s)n=[0,1,0],o=[0,0,-1];else if("X/-Z"===s)n=[0,1,0],o=[1,0,0];else if("Z/X"===s)n=[0,1,0],o=[0,0,1];else if("Y/Z"===s)n=[1,0,0],o=[0,1,0];else if("Z/-Y"===s)n=[1,0,0],o=[0,0,1];else if("-Y/-Z"===s)n=[1,0,0],o=[0,-1,0];else if("-Z/Y"===s)n=[1,0,0],o=[0,0,-1];else if("-Y/Z"===s)n=[-1,0,0],o=[0,-1,0];else if("-Z/-Y"===s)n=[-1,0,0],o=[0,0,-1];else if("Y/-Z"===s)n=[-1,0,0],o=[0,1,0];else{if("Z/Y"!==s)throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");n=[-1,0,0],o=[0,0,1]}return new t(new i.Plane(new i.Vector3(n),0),new i.Vector3(o))},t.Z0Plane=function(){return new t(new i.Plane(new i.Vector3([0,0,1]),0),new i.Vector3([1,0,0]))},t.prototype.getProjectionMatrix=function(){return new i.Matrix4x4([this.u.x,this.v.x,this.plane.normal.x,0,this.u.y,this.v.y,this.plane.normal.y,0,this.u.z,this.v.z,this.plane.normal.z,0,0,0,-this.plane.w,1])},t.prototype.getInverseProjectionMatrix=function(){var e=this.plane.normal.times(this.plane.w);return new i.Matrix4x4([this.u.x,this.u.y,this.u.z,0,this.v.x,this.v.y,this.v.z,0,this.plane.normal.x,this.plane.normal.y,this.plane.normal.z,0,e.x,e.y,e.z,1])},t.prototype.to2D=function(e){return new i.Vector2(e.dot(this.u),e.dot(this.v))},t.prototype.to3D=function(e){return this.planeorigin.plus(this.u.times(e.x)).plus(this.v.times(e.y))},t.prototype.line3Dto2D=function(e){var t=e.point,r=e.direction.plus(t),n=this.to2D(t),o=this.to2D(r);return i.Line2D.fromPoints(n,o)},t.prototype.line2Dto3D=function(e){var t=e.origin(),r=e.direction().plus(t),n=this.to3D(t),o=this.to3D(r);return i.Line3D.fromPoints(n,o)},t.prototype.transform=function(e){var r=this.plane.transform(e),n=this.u.transform(e),o=new i.Vector3(0,0,0).transform(e);return new t(r,n.minus(o))},t}(i.TransformationMethods);t.OrthoNormalBasis=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(8),a=r(6),u=r(0),l=function(e){function t(t,r){void 0===r&&(r=!1);var n=e.call(this)||this;n.points=[],n.closed=!1,t=t||[];var o=null;(r=!!r)&&t.length>0&&(o=new u.Vector2(t[t.length-1]));var s=[];return t.forEach((function(e){var t=new u.Vector2(e),r=!1;null!==o&&(r=t.distanceTo(o)<i.EPS);r||s.push(t),o=t})),n.points=s,n.closed=r,n}return o(t,e),t.arc=function(e){void 0===e&&(e={});for(var r=s.parseOptionAs2DVector(e,"center",0),n=s.parseOptionAsFloat(e,"radius",1),o=s.parseOptionAsFloat(e,"startangle",0),a=s.parseOptionAsFloat(e,"endangle",360),l=s.parseOptionAsInt(e,"resolution",i.defaultResolution2D),c=s.parseOptionAsBool(e,"maketangent",!1);a-o>=720;)a-=360;for(;a-o<=-720;)a+=360;var p,f=[],h=Math.abs(a-o);if(h<i.angleEPS)p=u.Vector2.fromAngle(o/180*Math.PI).times(n),f.push(p.plus(r));else{var d=Math.floor(l*h/360)+1,v=.5*d/h;v>.25&&(v=.25);for(var y=c?d+2:d,g=0;g<=y;g++){var m=g;c&&((m=(g-1)*(d-2*v)/d+v)<0&&(m=0),m>d&&(m=d));var x=o+m*(a-o)/d;p=u.Vector2.fromAngle(x/180*Math.PI).times(n),f.push(p.plus(r))}}return new t(f,!1)},t.prototype.concat=function(e){if(this.closed||e.closed)throw new Error("Paths must not be closed");return new t(this.points.concat(e.points))},t.prototype.getPoints=function(){return this.points},t.prototype.appendPoint=function(e){if(this.closed)throw new Error("Path must not be closed");return e=new u.Vector2(e),new t(this.points.concat([e]))},t.prototype.appendPoints=function(e){if(this.closed)throw new Error("Path must not be closed");var r=this.points;return e.forEach((function(e){r.push(new u.Vector2(e))})),new t(r)},t.prototype.close=function(){return new t(this.points,!0)},t.prototype.isClosed=function(){return this.closed},t.prototype.getTurn=function(){for(var e=this.points,t=0,r=e.length-1,n=0;n<e.length;r=n++)t+=e[r].x*e[n].y-e[r].y*e[n].x;return t>0?"clockwise":t<0?"counter-clockwise":"straight"},t.prototype.rectangularExtrude=function(e,t,r){return this.expandToCAG(e/2,r).extrude({offset:[0,0,t]})},t.prototype.expandToCAG=function(e,t){var r,n=[],o=this.points.length,i=0;this.closed&&o>2&&(i=-1);for(var s=i;s<o;s++){var l=s;l<0&&(l=o-1);var c=this.points[l],p=new u.Vertex2(c);if(r&&s>i){var f=new u.Side(r,p);n.push(f)}r=p}return a.CAG.fromSides(n).expandedShell(e,t)},t.prototype.innerToCAG=function(){if(!this.closed)throw new Error("The path should be closed!");return a.CAG.fromPoints(this.points)},t.prototype.transform=function(e){return new t(this.points.map((function(t){return t.multiply4x4(e)})),this.closed)},t.prototype.appendBezier=function(e,r){if(arguments.length<2&&(r={}),this.closed)throw new Error("Path must not be closed");if(!(e instanceof Array))throw new Error("appendBezier: should pass an array of control points");if(e.length<1)throw new Error("appendBezier: need at least 1 control point");if(this.points.length<1)throw new Error("appendBezier: path must already contain a point (the endpoint of the path is used as the starting point for the bezier curve)");var n=s.parseOptionAsInt(r,"resolution",i.defaultResolution2D);n<4&&(n=4);var o=[],a=[];a.push(this.points[this.points.length-1]);for(var l=0;l<e.length;++l){var c=e[l];if(null===c){if(0!==l)throw new Error("appendBezier: null can only be passed as the first control point");if(e.length<2)throw new Error("appendBezier: null can only be passed if there is at least one more control point");var p=void 0;if(this.lastBezierControlPoint)p=this.lastBezierControlPoint;else{if(this.points.length<2)throw new Error("appendBezier: null is passed as a control point but this requires a previous bezier curve or at least two points in the existing path");p=this.points[this.points.length-2]}c=this.points[this.points.length-1].times(2).minus(p)}else c=new u.Vector2(c);a.push(c)}var f=a.length-1,h=1;for(l=0;l<=f;++l)l>0&&(h*=l),o.push(h);var d=[];for(l=0;l<=f;++l){var v=o[f]/(o[l]*o[f-l]);d.push(v)}var y=function(e){for(var t=1,r=Math.pow(1-e,f),n=1!==e?1/(1-e):1,o=new u.Vector2(0,0),i=0;i<=f;++i){i===f&&(r=1);var s=d[i]*t*r;o=o.plus(a[i].times(s)),t*=e,r*=n}return o},g=[],m=[],x=f+1;for(l=0;l<x;++l){var w=l/(x-1),_=y(w);g.push(_),m.push(w)}for(var P=1,b=2*Math.PI/n,O=Math.sin(b);P<g.length-1;){var V=g[P].minus(g[P-1]).unit(),M=g[P+1].minus(g[P]).unit(),C=V.cross(M);if(Math.abs(C)>O){var A=m[P-1],S=m[P+1],j=A+1*(S-A)/3,T=A+2*(S-A)/3,E=y(j),z=y(T);g.splice(P,1,E,z),m.splice(P,1,j,T),--P<1&&(P=1)}else++P}var D=new t(g=this.points.concat(g.slice(1)));return D.lastBezierControlPoint=a[a.length-2],D},t.prototype.appendArc=function(e,r){var n=1e5;if(arguments.length<2&&(r={}),this.closed)throw new Error("Path must not be closed");if(this.points.length<1)throw new Error("appendArc: path must already contain a point (the endpoint of the path is used as the starting point for the arc)");var o,a,l=s.parseOptionAsInt(r,"resolution",i.defaultResolution2D);if(l<4&&(l=4),"xradius"in r||"yradius"in r){if("radius"in r)throw new Error("Should either give an xradius and yradius parameter, or a radius parameter");o=s.parseOptionAsFloat(r,"xradius",0),a=s.parseOptionAsFloat(r,"yradius",0)}else a=o=s.parseOptionAsFloat(r,"radius",0);var c=s.parseOptionAsFloat(r,"xaxisrotation",0),p=s.parseOptionAsBool(r,"clockwise",!1),f=s.parseOptionAsBool(r,"large",!1),h=this.points[this.points.length-1],d=new u.Vector2(e);o=Math.round(o*n)/n,a=Math.round(a*n)/n,d=new u.Vector2(Math.round(d.x*n)/n,Math.round(d.y*n)/n);var v=!p,y=[];if(0===o||0===a)y.push(d);else{o=Math.abs(o),a=Math.abs(a);var g=c*Math.PI/180,m=Math.cos(g),x=Math.sin(g),w=h.minus(d).times(.5),_=Math.round((m*w.x+x*w.y)*n)/n,P=Math.round((-x*w.x+m*w.y)*n)/n,b=new u.Vector2(_,P),O=b.x*b.x/(o*o)+b.y*b.y/(a*a);if(O>1){var V=Math.sqrt(O);o*=V,a*=V,o=Math.round(o*n)/n,a=Math.round(a*n)/n}var M=Math.sqrt((o*o*a*a-o*o*b.y*b.y-a*a*b.x*b.x)/(o*o*b.y*b.y+a*a*b.x*b.x));v===f&&(M=-M);var C=new u.Vector2(o*b.y/a,-a*b.x/o).times(M),A=new u.Vector2(m*C.x-x*C.y,x*C.x+m*C.y).plus(h.plus(d).times(.5)),S=new u.Vector2((b.x-C.x)/o,(b.y-C.y)/a),j=new u.Vector2((-b.x-C.x)/o,(-b.y-C.y)/a),T=S.angleRadians(),E=j.angleRadians(),z=E-T;z%=2*Math.PI,!v&&z>0?z-=2*Math.PI:v&&z<0&&(z+=2*Math.PI);var D=Math.ceil(Math.abs(z)/(2*Math.PI)*l)+1;D<1&&(D=1);for(var k=1;k<=D;k++){var F=T+k/D*z,I=Math.cos(F),B=Math.sin(F),G=new u.Vector2(m*o*I-x*a*B,x*o*I+m*a*B).plus(A);y.push(G)}}var N=new t(y=this.points.concat(y));return N},t}(u.TransformationMethods);t.Path2D=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(0),a=function(e){function t(t,r){var n=e.call(this)||this;return n.normal=t,n.w=r,n}return o(t,e),t.fromObject=function(e){return new t(new s.Vector3(e.normal),("string"==typeof e.w?parseFloat(e.w):e.w)||0)},t.fromVector3Ds=function(e,r,n){var o=r.minus(e).cross(n.minus(e)).unit();return new t(o,o.dot(e))},t.anyPlaneFromVector3Ds=function(e,r,n){var o=r.minus(e),s=n.minus(e);o.length()<i.EPS&&(o=s.randomNonParallelVector()),s.length()<i.EPS&&(s=o.randomNonParallelVector());var a=o.cross(s);return a.length()<i.EPS&&(s=o.randomNonParallelVector(),a=o.cross(s)),new t(a=a.unit(),a.dot(e))},t.fromPoints=function(e,r,n){var o=new s.Vector3(e),i=new s.Vector3(r),a=new s.Vector3(n);return t.fromVector3Ds(o,i,a)},t.fromNormalAndPoint=function(e,r){var n=new s.Vector3(e).unit();return new t(n,new s.Vector3(r).dot(n))},t.prototype.flipped=function(){return new t(this.normal.negated(),-this.w)},t.prototype.getTag=function(){var e=this.tag;return e||(e=i.getTag(),this.tag=e),e},t.prototype.equals=function(e){return this.normal.equals(e.normal)&&this.w===e.w},t.prototype.transform=function(e){var r=e.isMirroring(),n=this.normal.randomNonParallelVector(),o=this.normal.cross(n),i=this.normal.cross(o),s=this.normal.times(this.w),a=s.plus(o),u=s.plus(i);s=s.multiply4x4(e),a=a.multiply4x4(e),u=u.multiply4x4(e);var l=t.fromVector3Ds(s,a,u);return r&&(l=l.flipped()),l},t.prototype.splitLineBetweenPoints=function(e,t){var r=t.minus(e),n=(this.w-this.normal.dot(e))/this.normal.dot(r);return isNaN(n)&&(n=0),n>1&&(n=1),n<0&&(n=0),e.plus(r.times(n))},t.prototype.intersectWithLine=function(e){return e.intersectWithPlane(this)},t.prototype.intersectWithPlane=function(e){return s.Line3D.fromPlanes(this,e)},t.prototype.signedDistanceToPoint=function(e){return this.normal.dot(e)-this.w},t.prototype.toString=function(){return"[normal: "+this.normal.toString()+", w: "+this.w+"]"},t.prototype.mirrorPoint=function(e){var t=this.signedDistanceToPoint(e);return e.minus(this.normal.times(2*t))},t}(s.TransformationMethods);t.Plane=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(6),a=r(54),u=r(3),l=r(4),c=r(0),p=function(e){function t(r,n,o){var s=e.call(this)||this;if(s.vertices=r,s.shared=n||t.defaultShared,s.plane=o||c.Plane.fromVector3Ds(r[0].pos,r[1].pos,r[2].pos),i._CSGDEBUG&&!s.checkIfConvex())throw new Error("Not convex!");return s}return o(t,e),t.fromObject=function(e){var r=e.vertices.map((function(e){return c.Vertex3.fromObject(e)})),n=t.Shared.fromObject(e.shared);return new t(r,n,e.plane?c.Plane.fromObject(e.plane):c.Plane.fromVector3Ds(r[0].pos,r[1].pos,r[2].pos))},t.createFromPoints=function(e,r,n){var o=[];return e.map((function(e){var t=new c.Vector3(e),r=new c.Vertex3(t);o.push(r)})),n?new t(o,r,n):new t(o,r)},t.verticesConvex=function(e,r){var n=e.length;if(n>2)for(var o=e[n-2].pos,i=e[n-1].pos,s=0;s<n;s++){var a=e[s].pos;if(!t.isConvexPoint(o,i,a,r))return!1;o=i,i=a}return!0},t.isConvexPoint=function(e,t,r,n){return t.minus(e).cross(r.minus(t)).dot(n)>=0},t.isStrictlyConvexPoint=function(e,t,r,n){return t.minus(e).cross(r.minus(t)).dot(n)>=i.EPS},t.prototype.checkIfConvex=function(){return t.verticesConvex(this.vertices,this.plane.normal)},t.prototype.setColor=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return this.shared=(e=t.Shared).fromColor.apply(e,r),this},t.prototype.getSignedVolume=function(){for(var e=0,t=0;t<this.vertices.length-2;t++)e+=this.vertices[0].pos.dot(this.vertices[t+1].pos.cross(this.vertices[t+2].pos));return e/=6},t.prototype.getArea=function(){for(var e=0,t=0;t<this.vertices.length-2;t++)e+=this.vertices[t+1].pos.minus(this.vertices[0].pos).cross(this.vertices[t+2].pos.minus(this.vertices[t+1].pos)).length();return e/=2},t.prototype.getTetraFeatures=function(e){var t=this,r=[];return e.forEach((function(e){"volume"===e?r.push(t.getSignedVolume()):"area"===e&&r.push(t.getArea())}),this),r},t.prototype.extrude=function(e){var r=[],n=this;n.plane.normal.dot(e)>0&&(n=n.flipped()),r.push(n);for(var o=n.translate(e),i=this.vertices.length,s=0,a=e.length(),l=0;l<i;l++){var p=[],f=l<i-1?l+1:0,h=s+n.vertices[l].pos.distanceTo(n.vertices[f].pos);p.push(c.Vertex3.fromPosAndUV(n.vertices[l].pos,new c.Vector2(s,0))),p.push(c.Vertex3.fromPosAndUV(o.vertices[l].pos,new c.Vector2(s,a))),p.push(c.Vertex3.fromPosAndUV(o.vertices[f].pos,new c.Vector2(h,a))),p.push(c.Vertex3.fromPosAndUV(n.vertices[f].pos,new c.Vector2(h,0)));var d=new t(p,this.shared);r.push(d),s=h}return o=o.flipped(),r.push(o),u.fromPolygons(r)},t.prototype.translate=function(e){return this.transform(c.Matrix4x4.translation(e))},t.prototype.boundingSphere=function(){if(!this.cachedBoundingSphere){var e=this.boundingBox(),t=e[0].plus(e[1]).times(.5),r=e[1].minus(t).length();this.cachedBoundingSphere=[t,r]}return this.cachedBoundingSphere},t.prototype.boundingBox=function(){if(!this.cachedBoundingBox){var e=void 0,t=void 0,r=this.vertices,n=r.length;t=e=0===n?new c.Vector3(0,0,0):r[0].pos;for(var o=1;o<n;o++){var i=r[o].pos;e=e.min(i),t=t.max(i)}this.cachedBoundingBox=[e,t]}return this.cachedBoundingBox},t.prototype.flipped=function(){var e=this.vertices.map((function(e){return e.flipped()}));e.reverse();var r=this.plane.flipped();return new t(e,this.shared,r)},t.prototype.transform=function(e){var r=this.vertices.map((function(t){return t.transform(e)})),n=this.plane.transform(e);return e.isMirroring()&&r.reverse(),new t(r,this.shared,n)},t.prototype.toString=function(){var e="Polygon plane: "+this.plane.toString()+"\n";return this.vertices.map((function(t){e+="  "+t.toString()+"\n"})),e},t.prototype.projectToOrthoNormalBasis=function(e){var t=this.vertices.map((function(t){return e.to2D(t.pos)})),r=l.fromPointsNoCheck(t),n=r.area();return Math.abs(n)<i.areaEPS?r=new s.CAG:n<0&&(r=r.flipped()),r},t.prototype.solidFromSlices=function(e){return a.solidFromSlices(this,e)},t.defaultShared=new c.PolygonShared(null),t.Shared=c.PolygonShared,t}(c.TransformationMethods);t.Polygon3=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(3),i=r(2);t.solidFromSlices=function(e,t){var r,i=[],a=null,u=null,l=null,c=null,p=2,f=!1,h=null;if(t&&(f=Boolean(t.loop),t.numslices&&(p=t.numslices),t.callback&&(r=t.callback)),!r){var d=n.Polygon3.createFromPoints([[0,0,0],[1,0,0],[1,1,0],[0,1,0]]);r=function(e){return 0===e||1===e?d.translate([0,0,e]):null}}for(var v=0,y=p-1;v<=y;v++)if(a=r.call(e,v/y,v)){if(!(a instanceof n.Polygon3))throw new Error("Polygon.solidFromSlices callback error: Polygon expected");a.checkIfConvex(),u?(null===h&&(h=u.plane.signedDistanceToPoint(a.vertices[0].pos)<0),s(i,u,a,h)):l=a,u=a}(c=a,f)?l.vertices.length===c.vertices.length&&l.vertices.every((function(e,t){return e.pos.equals(c.vertices[t].pos)}))||s(i,c,l,Boolean(h)):(i.unshift(h?l:l.flipped()),i.push(h?c.flipped():c));return o.fromPolygons(i)};var s=function(e,t,r,o){var s=t.vertices.slice(0),a=r.vertices.slice(0),u=r.shared||null;s[0].pos.equals(s[s.length-1].pos)||s.push(s[0]),a[0].pos.equals(a[a.length-1].pos)||a.push(a[0]),o&&(s=s.reverse(),a=a.reverse());for(var l,c=a.length-1,p=s.length-1,f=c-p,h=f>0,d=f<0,v=[],y=Math.abs(f);y>0;y--)v.push({len:1/0,index:-1});if(d)for(y=0;y<p;y++){l=s[y].pos.distanceToSquared(s[y+1].pos);for(var g=v.length-1;g>=0;g--)if(v[g].len>l){v[g].len=l,v.index=g;break}}else if(h)for(y=0;y<c;y++){l=a[y].pos.distanceToSquared(a[y+1].pos);for(g=v.length-1;g>=0;g--)if(v[g].len>l){v[g].len=l,v.index=g;break}}v.sort(i.fnSortByIndex);for(var m,x=function(e,t,r,o){return new n.Polygon3([e,t,r],o)},w=s[0],_=a[0],P=0,b=0,O=c+p;P+b<O;){if(v.length){if(h&&b===v[0].index){m=a[++b],e.push(x(m,_,w,u)),_=m,v.shift();continue}if(d&&P===v[0].index){m=s[++P],e.push(x(_,w,m,u)),w=m,v.shift();continue}}(P<p?_.pos.distanceToSquared(s[P+1].pos):1/0)<=(b<c?w.pos.distanceToSquared(a[b+1].pos):1/0)?(m=s[++P],e.push(x(_,w,m,u)),w=m):b<c&&(m=a[++b],e.push(x(m,_,w,u)),_=m)}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56),o=r(58),i=function(){function e(e){this.polygonTree=new n.PolygonTreeNode,this.rootnode=new o.Node(null),e&&this.addPolygons(e)}return e.prototype.invert=function(){this.polygonTree.invert(),this.rootnode.invert()},e.prototype.clipTo=function(e,t){t=!!t,this.rootnode.clipTo(e,t)},e.prototype.allPolygons=function(){var e=[];return this.polygonTree.getPolygons(e),e},e.prototype.addPolygons=function(e){var t=this,r=e.map((function(e){return t.polygonTree.addChild(e)}));this.rootnode.addPolygonTreeNodes(r)},e}();t.Tree=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(57),i=function(){function e(){this.parent=null,this.children=[],this.polygon=null,this.removed=!1}return e.prototype.addPolygons=function(e){if(!this.isRootNode())throw new Error("Assertion failed");var t=this;e.map((function(e){t.addChild(e)}))},e.prototype.remove=function(){if(!this.removed){if(this.removed=!0,n._CSGDEBUG){if(this.isRootNode())throw new Error("Assertion failed");if(this.children.length)throw new Error("Assertion failed")}if(this.parent){var e=this.parent.children,t=e.indexOf(this);if(t<0)throw new Error("Assertion failed");e.splice(t,1),this.parent.recursivelyInvalidatePolygon()}}},e.prototype.isRemoved=function(){return this.removed},e.prototype.isRootNode=function(){return!this.parent},e.prototype.invert=function(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()},e.prototype.getPolygon=function(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon},e.prototype.getPolygons=function(e){var t,r,n,o,i=[this],s=[i];for(t=0;t<s.length;++t)for(r=0,n=(i=s[t]).length;r<n;r++)(o=i[r]).polygon?e.push(o.polygon):s.push(o.children)},e.prototype.splitByPlane=function(e,t,r,n,o){if(this.children.length){var i=[this.children],s=void 0,a=void 0,u=void 0,l=void 0,c=void 0;for(s=0;s<i.length;s++)for(a=0,u=(c=i[s]).length;a<u;a++)(l=c[a]).children.length?i.push(l.children):l._splitByPlane(e,t,r,n,o)}else this._splitByPlane(e,t,r,n,o)},e.prototype._splitByPlane=function(e,t,r,i,s){var a=this.polygon;if(a){var u=a.boundingSphere(),l=u[1]+n.EPS,c=e.normal,p=u[0],f=c.dot(p)-e.w;if(f>l)i.push(this);else if(f<-l)s.push(this);else{var h=o.splitPolygonByPlane(e,a);switch(h.type){case 0:t.push(this);break;case 1:r.push(this);break;case 2:i.push(this);break;case 3:s.push(this);break;case 4:if(h.front){var d=this.addChild(h.front);i.push(d)}if(h.back){var v=this.addChild(h.back);s.push(v)}}}}},e.prototype.addChild=function(t){var r=new e;return r.parent=this,r.polygon=t,this.children.push(r),r},e.prototype.invertSub=function(){var e,t,r,n,o=[this],i=[o];for(e=0;e<i.length;e++)for(t=0,r=(o=i[e]).length;t<r;t++)(n=o[t]).polygon&&(n.polygon=n.polygon.flipped()),i.push(n.children)},e.prototype.recursivelyInvalidatePolygon=function(){for(var e=this;e.polygon;)e.polygon=null,e.parent&&(e=e.parent)},e}();t.PolygonTreeNode=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(1);t.splitPolygonByPlane=function(e,t){var r={type:null,front:null,back:null},i=e.normal,s=t.vertices,a=s.length;if(t.plane.equals(e))r.type=0;else{for(var u=e.w,l=!1,c=!1,p=[],f=-o.EPS,h=0;h<a;h++){var d=(C=i.dot(s[h].pos)-u)<0;p.push(d),C>o.EPS&&(l=!0),C<f&&(c=!0)}if(l||c)if(c)if(l){r.type=4;for(var v=[],y=[],g=(d=p[0],0);g<a;g++){var m=s[g],x=g+1;x>=a&&(x=0);var w=p[x];if(d===w)d?y.push(m):v.push(m);else{var _=m.pos,P=s[x].pos,b=n.calcInterpolationFactor(_,P,e.splitLineBetweenPoints(_,P)),O=m.interpolate(s[x],b);d?(y.push(m),y.push(O),v.push(O)):(v.push(m),v.push(O),y.push(O))}d=w}var V=o.EPS*o.EPS;if(y.length>=3){var M=y[y.length-1];for(g=0;g<y.length;g++){(m=y[g]).pos.distanceToSquared(M.pos)<V&&(y.splice(g,1),g--),M=m}}if(v.length>=3)for(M=v[v.length-1],g=0;g<v.length;g++){(m=v[g]).pos.distanceToSquared(M.pos)<V&&(v.splice(g,1),g--),M=m}v.length>=3&&(r.front=new n.Polygon3(v,t.shared,t.plane)),y.length>=3&&(r.back=new n.Polygon3(y,t.shared,t.plane))}else r.type=3;else r.type=2;else{var C=i.dot(t.plane.normal);r.type=C>=0?0:1}}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.parent=e,this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[]}return e.prototype.invert=function(){for(var e,t=[this],r=0;r<t.length;r++){(e=t[r]).plane&&(e.plane=e.plane.flipped()),e.front&&t.push(e.front),e.back&&t.push(e.back);var n=e.front;e.front=e.back,e.back=n}},e.prototype.clipPolygons=function(e,t){var r,n={node:this,polygontreenodes:e},o=[];do{if(r=n.node,e=n.polygontreenodes,r.plane){for(var i=[],s=[],a=t?i:s,u=r.plane,l=e.length,c=0;c<l;c++){var p=e[c];p.isRemoved()||p.splitByPlane(u,a,i,s,i)}r.front&&s.length>0&&o.push({node:r.front,polygontreenodes:s});var f=i.length;if(r.back&&f>0)o.push({node:r.back,polygontreenodes:i});else for(c=0;c<f;c++)i[c].remove()}n=o.pop()}while(void 0!==n)},e.prototype.clipTo=function(e,t){var r=this,n=[];do{r.polygontreenodes.length>0&&e.rootnode.clipPolygons(r.polygontreenodes,t),r.front&&n.push(r.front),r.back&&n.push(r.back),r=n.pop()}while(void 0!==r)},e.prototype.addPolygonTreeNodes=function(t){var r,n={node:this,polygontreenodes:t},o=[];do{if(r=n.node,0!==(t=n.polygontreenodes).length){var i=r;if(!r.plane){var s=t[0].getPolygon().plane;r.plane=s}for(var a=[],u=[],l=0,c=t.length;l<c;++l)t[l].splitByPlane(i.plane,i.polygontreenodes,u,a,u);a.length>0&&(r.front||(r.front=new e(r)),o.push({node:r.front,polygontreenodes:a})),u.length>0&&(r.back||(r.back=new e(r)),o.push({node:r.back,polygontreenodes:u})),n=o.pop()}else n=o.pop()}while(void 0!==n)},e.prototype.getParentPlaneNormals=function(e,t){t>0&&this.parent&&this.parent.plane&&(e.push(this.parent.plane.normal),this.parent.getParentPlaneNormals(e,t-1))},e}();t.Node=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0);function i(e,t,r,n,o,i){var a=n.getTag(),u=o.getTag();if(a===u)throw new Error("Assertion failed");var l=a+"/"+u;if(u+"/"+a in e)return s(e,t,r,o,n,null),null;var c={vertex0:n,vertex1:o,polygonindex:i};return l in e?e[l].push(c):e[l]=[c],a in t?t[a].push(l):t[a]=[l],u in r?r[u].push(l):r[u]=[l],l}function s(e,t,r,n,o,i){var s=n.getTag(),a=o.getTag(),u=s+"/"+a;if(!(u in e))throw new Error("Assertion failed");for(var l=-1,c=e[u],p=0;p<c.length;p++){var f=c[p];if(f.vertex0===n&&(f.vertex1===o&&(null===i||f.polygonindex===i))){l=p;break}}if(l<0)throw new Error("Assertion failed");if(c.splice(l,1),0===c.length&&delete e[u],(l=t[s].indexOf(u))<0)throw new Error("Assertion failed");if(t[s].splice(l,1),0===t[s].length&&delete t[s],(l=r[a].indexOf(u))<0)throw new Error("Assertion failed");r[a].splice(l,1),0===r[a].length&&delete r[a]}t.fixTJunctions=function(e,t){t=t.canonicalized();for(var r={},a=0;a<t.polygons.length;a++){var u=t.polygons[a],l=u.vertices.length;if(l>=3)for(var c=u.vertices[0],p=c.getTag(),f=0;f<l;f++){var h=f+1;h===l&&(h=0);var d=u.vertices[h],v=d.getTag(),y=p+"/"+v,g=v+"/"+p;if(g in r){var m=r[g];m.splice(-1,1),0===m.length&&delete r[g]}else{var x={vertex0:c,vertex1:d,polygonindex:a};y in r?r[y].push(x):r[y]=[x]}c=d,p=v}}var w={},_={},P={},b=!0,O=function(e){b=!1,P[e]=!0,r[e].map((function(t){var r=t.vertex0.getTag(),n=t.vertex1.getTag();r in w?w[r].push(e):w[r]=[e],n in _?_[n].push(e):_[n]=[e]}))};for(var y in r)O(y);if(!b){for(var V=t.polygons.slice(0);;){var M=!0;for(var y in r)M=!1,P[y]=!0;if(M)break;for(var C=!1;;){var A=null;for(var y in P){A=y;break}if(null===A)break;var S=!0;if(A in r){var j=r[A];if(0===j.length)throw new Error("Assertion failed");x=j[0];for(var T=0;T<2;T++){var E=0===T?x.vertex0:x.vertex1,z=0===T?x.vertex1:x.vertex0,D=E.getTag(),k=z.getTag(),F=[];0===T?D in _&&(F=_[D]):D in w&&(F=w[D]);for(var I=function(e){var t=F[e],a=r[t][0],u=0===T?a.vertex0:a.vertex1,l=0===T?a.vertex1:a.vertex0,c=u.getTag();if(l.getTag()!==D)throw new Error("Assertion failed");if(c===k)return s(r,w,_,E,z,null),s(r,w,_,z,E,null),S=!1,T=2,C=!0,"break";var p=E.pos,f=z.pos,h=u.pos.minus(p),d=f.minus(p).dot(h)/h.dot(h);if(d>0&&d<1&&p.plus(h.times(d)).distanceToSquared(f)<n.EPS*n.EPS){for(var v=a.polygonindex,y=V[v],g=a.vertex1.getTag(),m=-1,x=0;x<y.vertices.length;x++)if(y.vertices[x].getTag()===g){m=x;break}if(m<0)throw new Error("Assertion failed");var b=y.vertices.slice(0);b.splice(m,0,z);var O=new o.Polygon3(b,y.shared);if(isNaN(O.plane.w)){var M=!1,A=function(e){O.vertices.forEach((function(t){M||e(t)}))};A((function(e){A((function(t){A((function(r){O.plane=o.Plane.fromPoints(e.pos,t.pos,r.pos),isNaN(O.plane.w)||(M=!0)}))}))}))}V[v]=O,s(r,w,_,a.vertex0,a.vertex1,v);var j=i(r,w,_,a.vertex0,z,v),I=i(r,w,_,z,a.vertex1,v);return null!==j&&(P[j]=!0),null!==I&&(P[I]=!0),S=!1,T=2,C=!0,"break"}},B=0;B<F.length;B++){if("break"===I(B))break}}}S&&delete P[A]}if(!C)break}var G=e(V);G.properties=t.properties,G.isCanonicalized=!0,G.isRetesselated=!0,t=G}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21),o=r(1),i=r(0),s=function(){function e(){this.vertexfactory=new n.FuzzyFactory(2,o.EPS)}return e.prototype.getVertex=function(e){var t=[e.pos._x,e.pos._y];return this.vertexfactory.lookupOrCreate(t,(function(t){return e}))},e.prototype.getSide=function(e){var t=this.getVertex(e.vertex0),r=this.getVertex(e.vertex1);return new i.Side(t,r)},e}();t.FuzzyCAGFactory=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.bounds=function(e){if(!e.cachedBoundingBox){for(var t=new n.Vector3(0,0,0),r=new n.Vector3(0,0,0),o=e.polygons,i=o.length,s=0;s<i;s++){var a=o[s].boundingBox();0===s?(t=a[0],r=a[1]):(t=t.min(a[0]),r=r.max(a[1]))}e.cachedBoundingBox=[t,r]}return e.cachedBoundingBox},t.volume=function(e){var t=e.toTriangles().map((function(e){return e.getTetraFeatures(["volume"])}));console.log("volume",t)},t.area=function(e){var t=e.toTriangles().map((function(e){return e.getTetraFeatures(["area"])}));console.log("area",t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(6);t.projectToOrthoNormalBasis=function(e,t){var r=[];return e.polygons.filter((function(e){return e.plane.normal.minus(t.plane.normal).lengthSquared()<n.EPS*n.EPS})).map((function(e){var n=e.projectToOrthoNormalBasis(t);n.sides.length>0&&r.push(n)})),(new o.CAG).union(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(5);t.sectionCut=function(e,t){var r=t.plane,i=t.plane.flipped();r=new o.Plane(r.normal,r.w),i=new o.Plane(i.normal,i.w+5*n.EPS);var s=e.cutByPlane(r);return(s=s.cutByPlane(i)).projectToOrthoNormalBasis(t)},t.cutByPlane=function(e,t){if(0===e.polygons.length)return new i.CSG;var r=t.normal.times(t.w),n=0;e.polygons.map((function(e){e.vertices.map((function(e){var t=e.pos.distanceToSquared(r);t>n&&(n=t)}))})),n=Math.sqrt(n),n*=1.01;var s=[],a=new o.OrthoNormalBasis(t);s.push(o.Vertex3.fromPosAndUV(a.to3D(new o.Vector2(n,-n)),new o.Vector2(n,-n))),s.push(o.Vertex3.fromPosAndUV(a.to3D(new o.Vector2(-n,-n)),new o.Vector2(-n,-n))),s.push(o.Vertex3.fromPosAndUV(a.to3D(new o.Vector2(-n,n)),new o.Vector2(-n,n))),s.push(o.Vertex3.fromPosAndUV(a.to3D(new o.Vector2(n,n)),new o.Vector2(n,n)));var u=new o.Polygon3(s,null,t.flipped()).extrude(t.normal.times(-n)),l=e.intersect(u);return l.properties=e.properties,l}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),o=r(12),i=r(2);t.expand=function(e,t,r){var s;return i.isCSG(e)?(s=(s=e.union(n.expandedShellOfCCSG(e,t,r))).reTesselated()).properties=e.properties:s=e.union(o.expandedShellOfCAG(e,t,r)),s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),o=r(12),i=r(2);t.contract=function(e,t,r){var s;return i.isCSG(e)?(s=(s=e.subtract(n.expandedShellOfCCSG(e,t,r))).reTesselated()).properties=e.properties:s=e.subtract(o.expandedShellOfCAG(e,t,r)),s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),o=r(1),i=r(3),s=r(0),a=r(7),u=r(18);t.cube=function(e){var t,r,o,l;if("corner1"in(e=e||{})||"corner2"in e){if("center"in e||"radius"in e)throw new Error("cube: should either give a radius and center parameter, or a corner1 and corner2 parameter");o=n.parseOptionAs3DVector(e,"corner1",[0,0,0]),l=n.parseOptionAs3DVector(e,"corner2",[1,1,1]),t=o.plus(l).times(.5),r=l.minus(o).times(.5)}else t=n.parseOptionAs3DVector(e,"center",[0,0,0]),r=n.parseOptionAs3DVector(e,"radius",[1,1,1]);r=r.abs();var c=i.fromPolygons([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map((function(e){var n=e[0].map((function(e){var n=new s.Vector3(t.x+r.x*(2*+!!(1&e)-1),t.y+r.y*(2*+!!(2&e)-1),t.z+r.z*(2*+!!(4&e)-1));return new s.Vertex3(n)}));return new s.Polygon3(n,null)})));return c.properties.cube=new u.Properties,c.properties.cube.center=new s.Vector3(t),c.properties.cube.facecenters=[new a.Connector(new s.Vector3([r.x,0,0]).plus(t),[1,0,0],[0,0,1]),new a.Connector(new s.Vector3([-r.x,0,0]).plus(t),[-1,0,0],[0,0,1]),new a.Connector(new s.Vector3([0,r.y,0]).plus(t),[0,1,0],[0,0,1]),new a.Connector(new s.Vector3([0,-r.y,0]).plus(t),[0,-1,0],[0,0,1]),new a.Connector(new s.Vector3([0,0,r.z]).plus(t),[0,0,1],[1,0,0]),new a.Connector(new s.Vector3([0,0,-r.z]).plus(t),[0,0,-1],[1,0,0])],c},t.sphere=function(e){e=e||{};var t,r,a,l=n.parseOptionAs3DVector(e,"center",[0,0,0]),c=n.parseOptionAsFloat(e,"radius",1),p=n.parseOptionAsInt(e,"resolution",o.defaultResolution3D);"axes"in e?(t=e.axes[0].unit().times(c),r=e.axes[1].unit().times(c),a=e.axes[2].unit().times(c)):(t=new s.Vector3([1,0,0]).times(c),r=new s.Vector3([0,-1,0]).times(c),a=new s.Vector3([0,0,1]).times(c)),p<4&&(p=4);for(var f,h=Math.round(p/4),d=[],v=0;v<=p;v++){var y=2*Math.PI*v/p,g=t.times(Math.cos(y)).plus(r.times(Math.sin(y)));if(v>0)for(var m=[],x=void 0,w=void 0,_=0;_<=h;_++){var P=.5*Math.PI*_/h,b=Math.cos(P),O=Math.sin(P);_>0&&((m=[]).push(new s.Vertex3(l.plus(f.times(x).minus(a.times(w))))),m.push(new s.Vertex3(l.plus(g.times(x).minus(a.times(w))))),_<h&&m.push(new s.Vertex3(l.plus(g.times(b).minus(a.times(O))))),m.push(new s.Vertex3(l.plus(f.times(b).minus(a.times(O))))),d.push(new s.Polygon3(m)),(m=[]).push(new s.Vertex3(l.plus(f.times(x).plus(a.times(w))))),m.push(new s.Vertex3(l.plus(g.times(x).plus(a.times(w))))),_<h&&m.push(new s.Vertex3(l.plus(g.times(b).plus(a.times(O))))),m.push(new s.Vertex3(l.plus(f.times(b).plus(a.times(O))))),m.reverse(),d.push(new s.Polygon3(m))),x=b,w=O}f=g}var V=i.fromPolygons(d);return V.properties.sphere=new u.Properties,V.properties.sphere.center=new s.Vector3(l),V.properties.sphere.facepoint=l.plus(t),V},t.cylinder=function(e){var t=n.parseOptionAs3DVector(e,"start",[0,-1,0]),r=n.parseOptionAs3DVector(e,"end",[0,1,0]),l=n.parseOptionAsFloat(e,"radius",1),c=n.parseOptionAsFloat(e,"radiusEnd",l),p=n.parseOptionAsFloat(e,"radiusStart",l),f=n.parseOptionAsFloat(e,"sectorAngle",360);if(f=f>360?f%360:f,c<0||p<0)throw new Error("Radius should be non-negative");if(0===c&&0===p)throw new Error("Either radiusStart or radiusEnd should be positive");var h=n.parseOptionAsInt(e,"resolution",o.defaultResolution2D),d=r.minus(t),v=d.unit(),y=v.randomNonParallelVector().unit(),g=y.cross(v).unit(),m=new s.Vertex3(t),x=new s.Vertex3(r),w=[];function _(e,r,n){var o=r*Math.PI*f/180,i=y.times(Math.cos(o)).plus(g.times(Math.sin(o))),a=t.plus(d.times(e)).plus(i.times(n));return new s.Vertex3(a)}if(f>0){for(var P=0;P<h;P++){var b=P/h,O=(P+1)/h;c===p?(w.push(new s.Polygon3([m,_(0,b,c),_(0,O,c)])),w.push(new s.Polygon3([_(0,O,c),_(0,b,c),_(1,b,c),_(1,O,c)])),w.push(new s.Polygon3([x,_(1,O,c),_(1,b,c)]))):(p>0&&(w.push(new s.Polygon3([m,_(0,b,p),_(0,O,p)])),w.push(new s.Polygon3([_(0,b,p),_(1,b,c),_(0,O,p)]))),c>0&&(w.push(new s.Polygon3([x,_(1,O,c),_(1,b,c)])),w.push(new s.Polygon3([_(1,b,c),_(1,O,c),_(0,O,p)]))))}f<360&&(w.push(new s.Polygon3([m,x,_(0,0,p)])),w.push(new s.Polygon3([_(0,0,p),x,_(1,0,c)])),w.push(new s.Polygon3([m,_(0,1,p),x])),w.push(new s.Polygon3([_(0,1,p),_(1,1,c),x])))}var V=i.fromPolygons(w);V.properties.cylinder=new u.Properties,V.properties.cylinder.start=new a.Connector(t,v.negated(),y),V.properties.cylinder.end=new a.Connector(r,v,y);var M=t.plus(d.times(.5)),C=y.rotate(t,v,-f/2).times((p+c)/2),A=C.cross(v);return V.properties.cylinder.facepointH=new a.Connector(M.plus(C),C,v),V.properties.cylinder.facepointH90=new a.Connector(M.plus(A),A,v),V},t.roundedCylinder=function(e){var r,l=n.parseOptionAs3DVector(e,"start",[0,-1,0]),c=n.parseOptionAs3DVector(e,"end",[0,1,0]),p=n.parseOptionAsFloat(e,"radius",1),f=c.minus(l);r=Math.abs(f.x)>Math.abs(f.y)?new s.Vector3(0,1,0):new s.Vector3(1,0,0);var h=n.parseOptionAs3DVector(e,"normal",r),d=n.parseOptionAsInt(e,"resolution",o.defaultResolution3D);d<4&&(d=4);var v=[],y=Math.floor(.25*d);if(f.length()<o.EPS)return t.sphere({center:l,radius:p,resolution:d});for(var g,m=f.unit().times(p),x=m.cross(h).unit().times(p),w=x.cross(m).unit().times(p),_=0;_<=d;_++){var P=2*Math.PI*_/d,b=x.times(Math.cos(P)).plus(w.times(Math.sin(P)));if(_>0){var O=[];O.push(new s.Vertex3(l.plus(b))),O.push(new s.Vertex3(l.plus(g))),O.push(new s.Vertex3(c.plus(g))),O.push(new s.Vertex3(c.plus(b))),v.push(new s.Polygon3(O));for(var V=void 0,M=void 0,C=0;C<=y;C++){var A=.5*Math.PI*C/y,S=Math.cos(A),j=Math.sin(A);C>0&&((O=[]).push(new s.Vertex3(l.plus(g.times(V).minus(m.times(M))))),O.push(new s.Vertex3(l.plus(b.times(V).minus(m.times(M))))),C<y&&O.push(new s.Vertex3(l.plus(b.times(S).minus(m.times(j))))),O.push(new s.Vertex3(l.plus(g.times(S).minus(m.times(j))))),v.push(new s.Polygon3(O)),(O=[]).push(new s.Vertex3(c.plus(g.times(V).plus(m.times(M))))),O.push(new s.Vertex3(c.plus(b.times(V).plus(m.times(M))))),C<y&&O.push(new s.Vertex3(c.plus(b.times(S).plus(m.times(j))))),O.push(new s.Vertex3(c.plus(g.times(S).plus(m.times(j))))),O.reverse(),v.push(new s.Polygon3(O))),V=S,M=j}}g=b}var T=i.fromPolygons(v),E=m.unit(),z=x.unit();return T.properties.roundedCylinder=new u.Properties,T.properties.roundedCylinder.start=new a.Connector(l,E.negated(),z),T.properties.roundedCylinder.end=new a.Connector(c,E,z),T.properties.roundedCylinder.facepoint=l.plus(x),T},t.cylinderElliptic=function(e){var t=n.parseOptionAs3DVector(e,"start",[0,-1,0]),r=n.parseOptionAs3DVector(e,"end",[0,1,0]),l=n.parseOptionAs2DVector(e,"radius",[1,1]),c=n.parseOptionAs2DVector(e,"radiusEnd",l),p=n.parseOptionAs2DVector(e,"radiusStart",l);if(c._x<0||p._x<0||c._y<0||p._y<0)throw new Error("Radius should be non-negative");if(!(0!==c._x&&0!==c._y||0!==p._x&&0!==p._y))throw new Error("Either radiusStart or radiusEnd should be positive");var f=n.parseOptionAsInt(e,"resolution",o.defaultResolution2D),h=r.minus(t),d=h.unit(),v=d.randomNonParallelVector().unit(),y=v.cross(d).unit(),g=new s.Vertex3(t),m=new s.Vertex3(r),x=[];function w(e,r,n){var o=r*Math.PI*2,i=v.times(n._x*Math.cos(o)).plus(y.times(n._y*Math.sin(o))),a=t.plus(h.times(e)).plus(i);return new s.Vertex3(a)}for(var _=0;_<f;_++){var P=_/f,b=(_+1)/f;c._x===p._x&&c._y===p._y?(x.push(new s.Polygon3([g,w(0,P,c),w(0,b,c)])),x.push(new s.Polygon3([w(0,b,c),w(0,P,c),w(1,P,c),w(1,b,c)])),x.push(new s.Polygon3([m,w(1,b,c),w(1,P,c)]))):(p._x>0&&(x.push(new s.Polygon3([g,w(0,P,p),w(0,b,p)])),x.push(new s.Polygon3([w(0,P,p),w(1,P,c),w(0,b,p)]))),c._x>0&&(x.push(new s.Polygon3([m,w(1,b,c),w(1,P,c)])),x.push(new s.Polygon3([w(1,P,c),w(1,b,c),w(0,b,p)]))))}var O=i.fromPolygons(x);return O.properties.cylinder=new u.Properties,O.properties.cylinder.start=new a.Connector(t,d.negated(),v),O.properties.cylinder.end=new a.Connector(r,d,v),O.properties.cylinder.facepoint=t.plus(v.times(p)),O},t.roundedCube=function(e){var r,i,l,c;if("corner1"in(e=e||{})||"corner2"in e){if("center"in e||"radius"in e)throw new Error("roundedCube: should either give a radius and center parameter, or a corner1 and corner2 parameter");l=n.parseOptionAs3DVector(e,"corner1",[0,0,0]),c=n.parseOptionAs3DVector(e,"corner2",[1,1,1]),r=l.plus(c).times(.5),i=c.minus(l).times(.5)}else r=n.parseOptionAs3DVector(e,"center",[0,0,0]),i=n.parseOptionAs3DVector(e,"radius",[1,1,1]);i=i.abs();var p=n.parseOptionAsInt(e,"resolution",o.defaultResolution3D);p<4&&(p=4),p%2==1&&p<8&&(p=8);var f=n.parseOptionAs3DVector(e,"roundradius",[.2,.2,.2]);f=s.Vector3.Create(Math.max(f.x,.01),Math.max(f.y,.01),Math.max(f.z,.01));var h=i.minus(f);if(h.x<0||h.y<0||h.z<0)throw new Error("roundradius <= radius!");var d=t.sphere({radius:1,resolution:p});return d=d.scale(f),h.x>o.EPS&&(d=d.stretchAtPlane([1,0,0],[0,0,0],2*h.x)),h.y>o.EPS&&(d=d.stretchAtPlane([0,1,0],[0,0,0],2*h.y)),h.z>o.EPS&&(d=d.stretchAtPlane([0,0,1],[0,0,0],2*h.z)),(d=(d=d.translate([-h.x+r.x,-h.y+r.y,-h.z+r.z])).reTesselated()).properties.roundedCube=new u.Properties,d.properties.roundedCube.center=new s.Vertex3(r),d.properties.roundedCube.facecenters=[new a.Connector(new s.Vector3([i.x,0,0]).plus(r),[1,0,0],[0,0,1]),new a.Connector(new s.Vector3([-i.x,0,0]).plus(r),[-1,0,0],[0,0,1]),new a.Connector(new s.Vector3([0,i.y,0]).plus(r),[0,1,0],[0,0,1]),new a.Connector(new s.Vector3([0,-i.y,0]).plus(r),[0,-1,0],[0,0,1]),new a.Connector(new s.Vector3([0,0,i.z]).plus(r),[0,0,1],[1,0,0]),new a.Connector(new s.Vector3([0,0,-i.z]).plus(r),[0,0,-1],[1,0,0])],d},t.polyhedron=function(e){if("points"in(e=e||{})!="faces"in e)throw new Error("polyhedron needs 'points' and 'faces' arrays");var t=n.parseOptionAs3DVectorList(e,"points",[[1,1,0],[1,-1,0],[-1,-1,0],[-1,1,0],[0,0,1]]).map((function(e){return new s.Vertex3(e)})),r=n.parseOption(e,"faces",[[0,1,4],[1,2,4],[2,3,4],[3,0,4],[1,0,3],[2,1,3]]);r.forEach((function(e){e.reverse()}));var o=r.map((function(e){return new s.Polygon3(e.map((function(e){return t[e]})))}));return i.fromPolygons(o).reTesselated()}},function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(5),s=r(7),a=function(){function e(e){this.closed=!1,this.connectorsList=n(e)}return e.fromPath2D=function(t,r,n){if(3===arguments.length)return e._fromPath2DTangents(t,r,n);if(2===arguments.length)return e._fromPath2DExplicit(t,r);throw new Error("call with path2D and either 2 direction vectors, or a function returning direction vectors")},e._fromPath2DTangents=function(t,r,n){var o,i=t.points.length,a=new e([new s.Connector(t.points[0],r,e.defaultNormal)]);return t.points.slice(1,i-1).forEach((function(r,n){o=t.points[n+2].minus(t.points[n]).toVector3D(0),a.appendConnector(new s.Connector(r.toVector3D(0),o,e.defaultNormal))}),this),a.appendConnector(new s.Connector(t.points[i-1],n,e.defaultNormal)),a.closed=t.closed,a},e._fromPath2DExplicit=function(t,r){var n=new e(t.points.map((function(t,n){return new s.Connector(t.toVector3D(0),o.Vector3.Create(1,0,0).rotateZ(function(e,t,r){return"function"==typeof e&&(e=e(t,r)),e}(r,t,n)),e.defaultNormal)}),this));return n.closed=t.closed,n},e.prototype.setClosed=function(e){this.closed=!!e},e.prototype.appendConnector=function(e){this.connectorsList.push(e)},e.prototype.followWith=function(e){var t=this;function r(e,t){return"function"==typeof e&&(e=e(t.point,t.axisvector,t.normalvector)),e}this.verify();var n,o=[],s=this.connectorsList[this.connectorsList.length-1],a=r(e,s);return this.connectorsList.forEach((function(i,u){n=r(e,i),u||t.closed?o.push.apply(o,a._toWallPolygons({toConnector1:s,toConnector2:i,cag:n})):o.push.apply(o,n._toPlanePolygons({toConnector:i,flipped:!0})),u!==t.connectorsList.length-1||t.closed||o.push.apply(o,n._toPlanePolygons({toConnector:i})),a=n,s=i})),i.CSG.fromPolygons(o).reTesselated().canonicalized()},e.prototype.verify=function(){for(var e,t,r=0;r<this.connectorsList.length-1;r++){if(e=this.connectorsList[r],(t=this.connectorsList[r+1]).point.minus(e.point).dot(e.axisvector)<=0)throw new Error("Invalid ConnectorList. Each connectors position needs to be within a <90deg range of previous connectors axisvector");if(e.axisvector.dot(t.axisvector)<=0)throw new Error("invalid ConnectorList. No neighboring connectors axisvectors may span a >=90deg angle")}},e.defaultNormal=[0,0,1],e}();t.ConnectorList=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(0),a=function(e){function t(t,r){var n=e.call(this)||this;return n.vertex0=t,n.vertex1=r,n}return o(t,e),t.fromObject=function(e){return new t(s.Vertex2.fromObject(e.vertex0),s.Vertex2.fromObject(e.vertex1))},t._fromFakePolygon=function(e){if(e.vertices.length<4)return null;var r=[],n=e.vertices.filter((function(e,t){return e.pos.z>0&&(r.push(t),!0)})).map((function(e){return new s.Vector2(e.pos.x,e.pos.y)}));if(2!==n.length)throw new Error("Assertion failed: _fromFakePolygon: not enough points found");var o=r[1]-r[0];if(1!==o&&3!==o)throw new Error("Assertion failed: _fromFakePolygon: unknown index ordering");return 1===o&&n.reverse(),new t(new s.Vertex2(n[0]),new s.Vertex2(n[1]))},t.prototype.toString=function(){return this.vertex0+" -> "+this.vertex1},t.prototype.toPolygon3D=function(e,t){var r=[new s.Vertex3(this.vertex0.pos.toVector3D(e)),new s.Vertex3(this.vertex1.pos.toVector3D(e)),new s.Vertex3(this.vertex1.pos.toVector3D(t)),new s.Vertex3(this.vertex0.pos.toVector3D(t))];return new s.Polygon3(r)},t.prototype.transform=function(e){var r=this.vertex0.pos.transform(e),n=this.vertex1.pos.transform(e);return new t(new s.Vertex2(r),new s.Vertex2(n))},t.prototype.flipped=function(){return new t(this.vertex1,this.vertex0)},t.prototype.direction=function(){return this.vertex1.pos.minus(this.vertex0.pos)},t.prototype.getTag=function(){var e=this.tag;return e||(e=i.getTag(),this.tag=e),e},t.prototype.lengthSquared=function(){var e=this.vertex1.pos.x-this.vertex0.pos.x,t=this.vertex1.pos.y-this.vertex0.pos.y;return e*e+t*t},t.prototype.length=function(){return Math.sqrt(this.lengthSquared())},t}(s.TransformationMethods);t.Side=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),s=function(e){function t(r,n){var o=e.call(this)||this;return"object"==typeof r&&null!==r?Array.isArray(r)?(o._x=r[0]||0,o._y=r[1]||0):r instanceof t||r instanceof i.Vector3?(o._x=r.x,o._y=r.y):(o._x=("x"in r?"string"==typeof r.x?parseFloat(r.x):r.x:0)||0,o._y=("y"in r?"string"==typeof r.y?parseFloat(r.y):r.y:0)||0):(o._x=("string"==typeof r?parseFloat(r):r)||0,o._y=("string"==typeof n?parseFloat(n):n)||0),o}return o(t,e),t.fromAngle=function(e){return t.fromAngleRadians(e)},t.fromAngleDegrees=function(e){var r=Math.PI*e/180;return t.fromAngleRadians(r)},t.fromAngleRadians=function(e){return t.Create(Math.cos(e),Math.sin(e))},t.Create=function(e,r){return new t(e,r)},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){throw new Error("Vector2 is immutable")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){throw new Error("Vector2 is immutable")},enumerable:!0,configurable:!0}),t.prototype.toVector3D=function(e){return void 0===e&&(e=0),new i.Vector3(this._x,this._y,e)},t.prototype.equals=function(e){return this._x===e._x&&this._y===e._y},t.prototype.clone=function(){return t.Create(this._x,this._y)},t.prototype.negated=function(){return t.Create(-this._x,-this._y)},t.prototype.plus=function(e){return t.Create(this._x+e._x,this._y+e._y)},t.prototype.minus=function(e){return t.Create(this._x-e._x,this._y-e._y)},t.prototype.times=function(e){return t.Create(this._x*e,this._y*e)},t.prototype.dividedBy=function(e){return t.Create(this._x/e,this._y/e)},t.prototype.dot=function(e){return this._x*e._x+this._y*e._y},t.prototype.lerp=function(e,t){return this.plus(e.minus(this).times(t))},t.prototype.length=function(){return Math.sqrt(this.dot(this))},t.prototype.distanceTo=function(e){return this.minus(e).length()},t.prototype.distanceToSquared=function(e){return this.minus(e).lengthSquared()},t.prototype.lengthSquared=function(){return this.dot(this)},t.prototype.unit=function(){return this.dividedBy(this.length())},t.prototype.cross=function(e){return this._x*e._y-this._y*e._x},t.prototype.normal=function(){return t.Create(this._y,-this._x)},t.prototype.multiply4x4=function(e){return e.leftMultiply1x2Vector(this)},t.prototype.transform=function(e){return e.leftMultiply1x2Vector(this)},t.prototype.angle=function(){return this.angleRadians()},t.prototype.angleDegrees=function(){return 180*this.angleRadians()/Math.PI},t.prototype.angleRadians=function(){return Math.atan2(this._y,this._x)},t.prototype.min=function(e){return t.Create(Math.min(this._x,e._x),Math.min(this._y,e._y))},t.prototype.max=function(e){return t.Create(Math.max(this._x,e._x),Math.max(this._y,e._y))},t.prototype.toString=function(){return"("+this._x.toFixed(5)+", "+this._y.toFixed(5)+")"},t.prototype.abs=function(){return t.Create(Math.abs(this._x),Math.abs(this._y))},t}(i.TransformationMethods);t.Vector2=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),s=function(e){function t(r,n,o){var s=e.call(this)||this;return"object"==typeof r?Array.isArray(r)?(s._x=r[0]||0,s._y=r[1]||0,s._z=r[2]||0):r instanceof i.Vector2?(s._x=r.x,s._y=r.y,s._z=0):r instanceof t?(s._x=r.x,s._y=r.y,s._z=r.z):(s._x=("x"in r?"string"==typeof r.x?parseFloat(r.x):r.x:0)||0,s._y=("y"in r?"string"==typeof r.y?parseFloat(r.y):r.y:0)||0,s._z=("z"in r?"string"==typeof r.z?parseFloat(r.z):r.z:0)||0):(s._x=("string"==typeof r?parseFloat(r):r)||0,s._y=("string"==typeof n?parseFloat(n):n)||0,s._z=("string"==typeof o?parseFloat(o):o)||0),s}return o(t,e),t.Create=function(e,r,n){return new t(e,r,n)},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){throw new Error("Vector3 is immutable")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){throw new Error("Vector3 is immutable")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(e){throw new Error("Vector3 is immutable")},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return t.Create(this._x,this._y,this._z)},t.prototype.negated=function(){return t.Create(-this._x,-this._y,-this._z)},t.prototype.abs=function(){return t.Create(Math.abs(this._x),Math.abs(this._y),Math.abs(this._z))},t.prototype.plus=function(e){return t.Create(this._x+e._x,this._y+e._y,this._z+e._z)},t.prototype.minus=function(e){return t.Create(this._x-e._x,this._y-e._y,this._z-e._z)},t.prototype.times=function(e){return t.Create(this._x*e,this._y*e,this._z*e)},t.prototype.dividedBy=function(e){return t.Create(this._x/e,this._y/e,this._z/e)},t.prototype.dot=function(e){return this._x*e._x+this._y*e._y+this._z*e._z},t.prototype.lerp=function(e,t){return this.plus(e.minus(this).times(t))},t.prototype.lengthSquared=function(){return this.dot(this)},t.prototype.length=function(){return Math.sqrt(this.lengthSquared())},t.prototype.unit=function(){return this.dividedBy(this.length())},t.prototype.cross=function(e){return t.Create(this._y*e._z-this._z*e._y,this._z*e._x-this._x*e._z,this._x*e._y-this._y*e._x)},t.prototype.distanceTo=function(e){return this.minus(e).length()},t.prototype.distanceToSquared=function(e){return this.minus(e).lengthSquared()},t.prototype.equals=function(e){return this._x===e._x&&this._y===e._y&&this._z===e._z},t.prototype.multiply4x4=function(e){return e.leftMultiply1x3Vector(this)},t.prototype.transform=function(e){return e.leftMultiply1x3Vector(this)},t.prototype.toString=function(){return"("+this._x.toFixed(5)+", "+this._y.toFixed(5)+", "+this._z.toFixed(5)+")"},t.prototype.randomNonParallelVector=function(){var e=this.abs();return e._x<=e._y&&e._x<=e._z?t.Create(1,0,0):e._y<=e._x&&e._y<=e._z?t.Create(0,1,0):t.Create(0,0,1)},t.prototype.min=function(e){return t.Create(Math.min(this._x,e._x),Math.min(this._y,e._y),Math.min(this._z,e._z))},t.prototype.max=function(e){return t.Create(Math.max(this._x,e._x),Math.max(this._y,e._y),Math.max(this._z,e._z))},t}(i.TransformationMethods);t.Vector3=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(0),i=function(){function e(e){this.pos=e}return e.fromObject=function(t){return new e(new o.Vector2(t.pos._x,t.pos._y))},e.prototype.toString=function(){return"("+this.pos.x.toFixed(5)+","+this.pos.y.toFixed(5)+")"},e.prototype.getTag=function(){var e=this.tag;return e||(e=n.getTag(),this.tag=e),e},e}();t.Vertex2=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(0),a=function(e){function t(t){var r=e.call(this)||this;return r.pos=t,r.uv=new s.Vector2(0,0),r}return o(t,e),t.fromObject=function(e){return new t(new s.Vector3(e.pos))},t.fromPosAndUV=function(e,r){var n=new t(e);return n.uv=r,n},t.prototype.flipped=function(){return this},t.prototype.getTag=function(){var e=this.tag;return e||(e=i.getTag(),this.tag=e),e},t.prototype.interpolate=function(e,r){var n=this.pos.lerp(e.pos,r),o=this.uv.lerp(e.uv,r);return t.fromPosAndUV(n,o)},t.prototype.transform=function(e){var r=this.pos.multiply4x4(e);return t.fromPosAndUV(r,this.uv)},t.prototype.toString=function(){return this.pos.toString()},t}(s.TransformationMethods);t.Vertex3=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.area=function(e){var t=0;return e.sides.map((function(e){t+=e.vertex0.pos.cross(e.vertex1.pos)})),t*=.5},t.getBounds=function(e){var t,r=t=0===e.sides.length?new n.Vector2(0,0):e.sides[0].vertex0.pos;return e.sides.map((function(e){t=(t=t.min(e.vertex0.pos)).min(e.vertex1.pos),r=(r=r.max(e.vertex0.pos)).max(e.vertex1.pos)})),[t,r]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(26);t.extrudeInPlane=function(e,t,r,i,s){return o.extrudeInOrthonormalBasis(e,n.OrthoNormalBasis.GetCartesian(t,r),i,s)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(8),i=r(3),s=r(7),a=r(0),u=r(5);t.extrude=function(e,t){if(0===e.sides.length)return new u.CSG;var r=o.parseOptionAs3DVector(t,"offset",[0,0,1]),l=o.parseOptionAsFloat(t,"twistangle",0),c=o.parseOptionAsInt(t,"twiststeps",n.defaultResolution3D);if(0===r.z)throw new Error("offset cannot be orthogonal to Z axis");(0===l||c<1)&&(c=1);var p=a.Vector3.Create(0,1,0),f=[];f=(f=f.concat(e._toPlanePolygons({translation:[0,0,0],normalVector:p,flipped:!(r.z<0)}))).concat(e._toPlanePolygons({translation:r,normalVector:p.rotateZ(l),flipped:r.z<0}));for(var h=0;h<c;h++){var d=new s.Connector(r.times(h/c),[0,0,r.z],p.rotateZ(h*l/c)),v=new s.Connector(r.times((h+1)/c),[0,0,r.z],p.rotateZ((h+1)*l/c));f=f.concat(e._toWallPolygons({toConnector1:d,toConnector2:v},h))}return i.fromPolygons(f)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(8),i=r(0),s=r(7),a=r(3);t.rotateExtrude=function(e,t){void 0===t&&(t={});var r=o.parseOptionAsFloat(t,"angle",360),u=o.parseOptionAsInt(t,"resolution",n.defaultResolution3D);r=r>360?r%360:r;var l=[0,0,0],c=i.Vector3.Create(0,1,0),p=[0,0,1],f=[],h=new s.Connector(l,c,p);if(r>0&&r<360){var d=new s.Connector(l,c.rotateZ(-r),p);f=(f=f.concat(e._toPlanePolygons({toConnector:h,flipped:!0}))).concat(e._toPlanePolygons({toConnector:d}))}for(var v,y=h,g=r/u,m=g;m<=r+n.EPS;m+=g)v=new s.Connector(l,c.rotateZ(-m),p),f=f.concat(e._toWallPolygons({toConnector1:y,toConnector2:v},0)),y=v;return a.fromPolygons(f).reTesselated()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linear_extrude=function(e,t){var r=Object.assign({},{height:1,slices:10,twist:0,center:!1},e),n=r.height,o=r.twist,i=r.slices,s=r.center,a=t.extrude({offset:[0,0,n],twistangle:o,twiststeps:i});if(!0===s){var u=a.getBounds(),l=u[1].plus(u[0]).times(-.5);a=a.translate(l)}return a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(79),o=r(80),i=r(81),s=r(82),a=r(0),u=r(3),l=r(4),c={fn:32,startAngle:0,angle:360,overflow:"cap"};t.rotate_extrude=function(e,t){var r=(e=Object.assign({},c,e)).fn,p=e.startAngle,f=e.angle,h=e.overflow;if("cap"!==h)throw new Error("only capping of overflowing points is supported !");arguments.length<2&&(t=e);var d=f>0,v=d?s.clamp(p+f,0,360):s.clamp(p+f,-360,0),y=Math.max(Math.floor(Math.abs(v)/45),1,r),g=1e-5,m=i.cagToPointsArray(t),x=m.filter((function(e){return e[0]<0})),w=m.filter((function(e){return e[0]>=0})),_=x.length>0&&w.length>0;_&&"cap"===h&&(x.length>w.length?m=m.map((function(e){return[Math.min(e[0],0),e[1]]})):w.length>=x.length&&(m=m.map((function(e){return[Math.max(e[0],0),e[1]]}))));for(var P=[],b=function(e){for(var t=0;t<m.length-1;t++){var r=m[t],i=m[t+1],s=a.Matrix4x4.rotationZ((e-1)/y*f+p),u=a.Matrix4x4.rotationZ(e/y*f+p),c=o.rightMultiply1x3VectorToArray(s,[r[0],0,r[1]]),h=o.rightMultiply1x3VectorToArray(u,[r[0],0,r[1]]),v=o.rightMultiply1x3VectorToArray(s,[i[0],0,i[1]]),x=o.rightMultiply1x3VectorToArray(u,[i[0],0,i[1]]),w=!1;Math.abs(c[0]-h[0])<g&&Math.abs(v[1]-x[1])<g&&(w=!0),d?(P.push(n.polygonFromPoints([c,v,x])),w||P.push(n.polygonFromPoints([x,h,c]))):(w||P.push(n.polygonFromPoints([c,h,x])),P.push(n.polygonFromPoints([x,v,c])))}if(Math.abs(f)<360){var _=l.fromPoints(m),b=a.Matrix4x4.rotationX(90).multiply(a.Matrix4x4.rotationZ(-p)),O=_._toPlanePolygons({flipped:d}).map((function(e){return e.transform(b)})),V=a.Matrix4x4.rotationX(90).multiply(a.Matrix4x4.rotationZ(-f-p)),M=_._toPlanePolygons({flipped:!d}).map((function(e){return e.transform(V)}));P=P.concat(O).concat(M)}},O=1;O<y+1;O++)b(O);return u.fromPolygons(P).reTesselated().canonicalized()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.polygonFromPoints=function(e){var t=e.map((function(e){return new n.Vertex3(new n.Vector3(e))}));return new n.Polygon3(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rightMultiply1x3VectorToArray=function(e,t){var r=t[0],n=t[1],o=t[2],i=r*e.elements[0]+n*e.elements[1]+o*e.elements[2]+1*e.elements[3],s=r*e.elements[4]+n*e.elements[5]+o*e.elements[6]+1*e.elements[7],a=r*e.elements[8]+n*e.elements[9]+o*e.elements[10]+1*e.elements[11],u=r*e.elements[12]+n*e.elements[13]+o*e.elements[14]+1*e.elements[15];if(1!==u){var l=1/u;i*=l,s*=l,a*=l}return[i,s,a]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cagToPointsArray=function(e){var t;return"sides"in e?(t=[],e.sides.forEach((function(e){t.push([e.vertex0.pos.x,e.vertex0.pos.y]),t.push([e.vertex1.pos.x,e.vertex1.pos.y])}))):"points"in e&&(t=e.points.map((function(e){return[e.x,e.y]}))),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.rectangular_extrude=function(e,t){var r=Object.assign({},{w:1,h:1,fn:8,closed:!1},t),o=r.w,i=r.h,s=r.fn,a=r.closed;return new n.Path2D(e,a).rectangularExtrude(o,i,s)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.cagOutlinePaths=function(e){var t=e.canonicalized(),r={},o={};t.sides.map((function(e){var t=e.getTag();r[t]=e;var n=e.vertex0.getTag();n in o||(o[n]=[]),o[n].push(t)}));for(var i=[];;){var s=null;for(var a in o){var u=o[a];s=u[0],u.splice(0,1),0===u.length&&delete o[a];break}if(null===s)break;for(var l=[],c=r[s],p=c.vertex0.getTag();;){l.push(c.vertex0.pos);var f=c.vertex1.getTag();if(f===p)break;if(!(f in o))throw new Error("Area is not closed!");var h=o[f],d=-1;if(1===h.length)d=0;else for(var v=null,y=c.direction().angleDegrees(),g=0;g<h.length;g++){var m=h[g],x=r[m].direction().angleDegrees()-y;x<-180&&(x+=360),x>=180&&(x-=360),(d<0||null===v||x>v)&&(d=g,v=x)}var w=h[d];h.splice(d,1),0===h.length&&delete o[f],c=r[w]}l.length>0&&l.push(l.shift());var _=new n.Path2D(l,!0);i.push(_)}return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),o=r(1),i=r(4),s=r(0);t.circle=function(e){e=e||{};for(var t=n.parseOptionAs2DVector(e,"center",[0,0]),r=n.parseOptionAsFloat(e,"radius",1),a=n.parseOptionAsInt(e,"resolution",o.defaultResolution2D),u=[],l=0;l<a;l++){var c=2*Math.PI*l/a,p=s.Vector2.fromAngleRadians(c).times(r).plus(t);u.push(p)}return i.fromPoints(u)},t.ellipse=function(e){e=e||{};var t=n.parseOptionAs2DVector(e,"center",[0,0]),r=n.parseOptionAs2DVector(e,"radius",[1,1]);r=r.abs();var a=n.parseOptionAsInt(e,"resolution",o.defaultResolution2D),u=new s.Path2D([[t.x,t.y+r.y]]);return u=(u=(u=u.appendArc([t.x,t.y-r.y],{xradius:r.x,yradius:r.y,xaxisrotation:0,resolution:a,clockwise:!0,large:!1})).appendArc([t.x,t.y+r.y],{xradius:r.x,yradius:r.y,xaxisrotation:0,resolution:a,clockwise:!0,large:!1})).close(),i.fromPath2(u)},t.rectangle=function(e){var t,r;if("corner1"in(e=e||{})||"corner2"in e){if("center"in e||"radius"in e)throw new Error("rectangle: should either give a radius and center parameter, or a corner1 and corner2 parameter");var o=n.parseOptionAs2DVector(e,"corner1",[0,0]),a=n.parseOptionAs2DVector(e,"corner2",[1,1]);t=o.plus(a).times(.5),r=a.minus(o).times(.5)}else t=n.parseOptionAs2DVector(e,"center",[0,0]),r=n.parseOptionAs2DVector(e,"radius",[1,1]);r=r.abs();var u=new s.Vector2(r.x,-r.y),l=[t.plus(r),t.plus(u),t.minus(r),t.minus(u)];return i.fromPoints(l)},t.roundedRectangle=function(e){var r,i;if("corner1"in(e=e||{})||"corner2"in e){if("center"in e||"radius"in e)throw new Error("roundedRectangle: should either give a radius and center parameter, or a corner1 and corner2 parameter");var a=n.parseOptionAs2DVector(e,"corner1",[0,0]),u=n.parseOptionAs2DVector(e,"corner2",[1,1]);r=a.plus(u).times(.5),i=u.minus(a).times(.5)}else r=n.parseOptionAs2DVector(e,"center",[0,0]),i=n.parseOptionAs2DVector(e,"radius",[1,1]);i=i.abs();var l=n.parseOptionAsFloat(e,"roundradius",.2),c=n.parseOptionAsInt(e,"resolution",o.defaultResolution2D),p=Math.min(i.x,i.y);p-=.1,l=Math.min(l,p),l=Math.max(0,l),i=new s.Vector2(i.x-l,i.y-l);var f=t.rectangle({center:r,radius:i});return l>0&&(f=f.expand(l,c)),f}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(6),i={r:1,fn:32,center:!1};t.circle=function(e){var t=n(n({},i),"number"==typeof e?{r:e}:e),r=t.r,s=t.fn,a=t.center?[0,0]:[r,r];return o.CAG.circle({center:a,radius:r,resolution:s})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.polygon=function(e){var t=[];return e.paths&&e.paths.length&&e.paths[0].length?("number"!=typeof e.points[0][0]&&(e.points=e.points.reduce((function(e,t){return e.concat(t)}))),e.paths.forEach((function(r,n){t.push([]),r.forEach((function(r){return t[n].push(e.points[r])}))}))):e.paths&&e.paths.length?e.paths.forEach((function(r){return t.push(e.points[r])})):t=e.length?e:e.points,n.fromPoints(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.triangle=function(){var e=arguments;return e[0]&&e[0].length&&(e=e[0]),n.fromPoints(e)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var i=r(9),s=r(5),a={size:1,center:!1,round:!1,radius:0,fn:8};t.cube=function(e){var t=n(n({},a),Array.isArray(e)?{size:e}:e),r=t.round,u=t.radius,l=t.fn,c=t.size,p=t.center,f=Array.isArray(c)?c:[c,c,c],h=f[0],d=f[1],v=f[2],y=(r||u)&&(u||(h+d+v)/30)||0,g=[h/2,d/2,v/2],m=y?s.CSG.roundedCube({radius:o(g),roundradius:y,resolution:l}):s.CSG.cube({radius:o(g)}),x=Array.isArray(p)?[+!p[0]*g[0],+!p[1]*g[1],+!p[2]*g[2]]:p?[0,0,0]:o(g);return x[0]||x[1]||x[2]?i.translate(x,m):m}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translate=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=t.length>=1&&t[0].length?t[0]:t,o=n[0];if(n.length>1)for(var i=1;i<n.length;i++)o=o.union(n[i]);return o.translate(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scale=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=t.length>=1&&t[0].length?t[0]:t,o=n[0];if(n.length>1)for(var i=1;i<n.length;i++)o=o.union(n[i]);return o.scale(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotate=function(){var e,t,r,n=1,o=arguments;for(o[0].length?(r=o[0],t=1,o[1].length&&(o=o[1],t=0)):(n=o[0],r=o[1],t=2,o[2].length&&(o=o[2],t=0)),e=o[t++];t<o.length;t++)e=e.union(o[t]);return 1!==n?e.rotate([0,0,0],r,n):e.rotateX(r[0]).rotateY(r[1]).rotateZ(r[2])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.transform=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o,i=t.length>=1&&t[0].length?t[0]:t,s=i[0];if(i.length>1)for(var a=1;a<i.length;a++)s=s.union(i[a]);if(!Array.isArray(e))throw new Error("Matrix needs to be an array");return e.forEach((function(e){if(!Number.isFinite(e))throw new Error("you can only use a flat array of valid, finite numbers (float and integers)")})),o=new n.Matrix4x4(e),s.transform(o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.center=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=t.length>=1&&t[0].length?t[0]:t,o=n[0];if(n.length>1)for(var i=1;i<n.length;i++)o=o.union(n[i]);return Array.isArray(e)||(e=[e,e,e]),o.center(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.mirror=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=t.length>=1&&t[0].length?t[0]:t,i=o[0];if(o.length>1)for(var s=1;s<o.length;s++)i=i.union(o[s]);var a=new n.Plane(new n.Vector3(e[0],e[1],e[2]).unit(),0);return i.mirrored(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expand=function(e,t,r){return r.expand(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contract=function(e,t,r){return r.contract(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.minkowski=function(){console.log("minkowski() not yet implemented")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(100),o=function(){function e(){this.points=null,this.indices=null}return e.prototype.getIndices=function(){return this.indices},e.prototype.clear=function(){this.indices=null,this.points=null},e.prototype.ccw=function(e,t,r){var n=(this.points[t].x-this.points[e].x)*(this.points[r].y-this.points[e].y)-(this.points[t].y-this.points[e].y)*(this.points[r].x-this.points[e].x);return n<1e-5?0:n},e.prototype.angle=function(e,t){return Math.atan2(this.points[t].y-this.points[e].y,this.points[t].x-this.points[e].x)},e.prototype.distance=function(e,t){return(this.points[t].x-this.points[e].x)*(this.points[t].x-this.points[e].x)+(this.points[t].y-this.points[e].y)*(this.points[t].y-this.points[e].y)},e.prototype.compute=function(e){if(this.indices=null,!(e.length<3)){this.points=e;for(var t=0,r=1;r<this.points.length;r++)this.points[r].y===this.points[t].y?this.points[r].x<this.points[t].x&&(t=r):this.points[r].y<this.points[t].y&&(t=r);var o=[],i=0,s=0;for(r=0;r<this.points.length;r++)r!==t&&((i=this.angle(t,r))<0&&(i+=Math.PI),s=this.distance(t,r),o.push(new n.ConvexHullPoint(r,i,s)));o.sort((function(e,t){return e.compare(t)}));var a,u=new Array(this.points.length+1),l=2;for(r=0;r<this.points.length;r++)r!==t&&(u[l]=o[l-2].index,l++);u[0]=u[this.points.length],u[1]=t;var c=2;for(r=3;r<=this.points.length;r++){for(;this.ccw(u[c-1],u[c],u[r])<=0;)c--;c++,a=u[r],u[r]=u[c],u[c]=a}this.indices=new Array(c);for(r=0;r<c;r++)this.indices[r]=u[r+1]}},e}();t.ConvexHull=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){this.index=e,this.angle=t,this.distance=r}return e.prototype.compare=function(e){return this.angle<e.angle?-1:this.angle>e.angle?1:this.distance<e.distance?-1:this.distance>e.distance?1:0},e}();t.ConvexHullPoint=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=r(27);t.chain_hull=function(e,t){var r=arguments,i=!1,s=0;void 0!==r[s].closed&&(i=r[s++].closed),r[s].length&&(r=r[s]);for(var a=[],u=r.length-(i?0:1),l=0;l<u;l++)a.push(o.hull(r[l],r[(l+1)%r.length]));return n.union(a)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(28),i=r(9),s=r(5),a={r:1,fn:32,type:"normal"};t.sphere=function(e){var t=n(n({},a),"number"==typeof e?{r:e}:e),r=t.r,u=t.fn,l=t.center,c=t.type,p=Array.isArray(l)?[+!l[0]*r,+!l[1]*r,+!l[2]*r]:"boolean"!=typeof l||l?[0,0,0]:[r,r,r],f="geodesic"===c?o.geodesicSphere({r:r,fn:u}):s.CSG.sphere({radius:r,resolution:u});return p[0]||p[1]||p[2]?i.translate(p,f):f}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(5);t.cylinder=function(e){var t,r={r:1,r1:1,r2:1,h:1,fn:32,round:!1},i=Object.assign({},r,e),s=i.r1,a=i.r2,u=i.h,l=i.fn,c=i.round,p=[0,0,0],f=arguments;if(e&&e.d&&(s=a=e.d/2),e&&e.r&&(s=e.r,a=e.r),e&&e.h&&(u=e.h),e&&(e.r1||e.r2)&&(s=e.r1,a=e.r2,e.h&&(u=e.h)),e&&(e.d1||e.d2)&&(s=e.d1/2,a=e.d2/2),f&&f[0]&&f[0].length&&(s=(f=f[0])[0],a=f[1],u=f[2],4===f.length&&(l=f[3])),e&&e.start&&e.end)t=c?o.CSG.roundedCylinder({start:e.start,end:e.end,radiusStart:s,radiusEnd:a,resolution:l}):o.CSG.cylinder({start:e.start,end:e.end,radiusStart:s,radiusEnd:a,resolution:l});else{t=c?o.CSG.roundedCylinder({start:[0,0,0],end:[0,0,u],radiusStart:s,radiusEnd:a,resolution:l}):o.CSG.cylinder({start:[0,0,0],end:[0,0,u],radiusStart:s,radiusEnd:a,resolution:l});var h=s>a?s:a;e&&e.center&&e.center.length?p=[e.center[0]?0:h,e.center[1]?0:h,e.center[2]?-u/2:0]:e&&!0===e.center?p=[0,0,-u/2]:e&&!1===e.center&&(p=[0,0,0]),t=p[0]||p[1]||p[2]?n.translate(p,t):t}return t}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(16),i=r(13),s=r(9),a={ri:1,ro:4,fni:16,fno:32,roti:0};t.torus=function(e){var t=n(n({},a),e),r=t.ri,u=t.ro,l=t.fni,c=t.fno,p=t.roti,f=o.circle({r:r,fn:Math.max(3,l),center:!0});return p&&(f=f.rotateZ(p)),i.rotate_extrude({fn:Math.max(3,c)},s.translate([u,0,0],f))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(106);t.color=n.color;var o=r(30);t.css2rgb=o.css2rgb;var i=r(108);t.rgb2hsl=i.rgb2hsl;var s=r(109);t.rgb2html=s.rgb2html;var a=r(110);t.rgb2hsv=a.rgb2hsv;var u=r(111);t.html2rgb=u.html2rgb;var l=r(112);t.hsv2rgb=l.hsv2rgb;var c=r(31);t.hue2rgb=c.hue2rgb;var p=r(113);t.hsl2rgb=p.hsl2rgb},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(30);t.color=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i=0,s=r;for("string"==typeof e&&(e=n.css2rgb(e)),Number.isFinite(s[i])&&(e=e.concat(s[i]),i++),Array.isArray(s[i])&&(s=s[i],i=0),t=s[i++];i<s.length;i++)t=t.union(s[i]);return t.setColor(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssColors3ub={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb2hsl=function(e,t,r){Array.isArray(e)&&(r=e[2],t=e[1],e=e[0]);var n,o=Math.max(e,t,r),i=Math.min(e,t,r),s=0,a=(o+i)/2;if(o===i)s=n=0;else{var u=o-i;switch(n=a>.5?u/(2-o-i):u/(o+i),o){case e:s=(t-r)/u+(t<r?6:0);break;case t:s=(r-e)/u+2;break;case r:s=(e-t)/u+4}s/=6}return[s,n,a]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb2html=function(e,t,r){return Array.isArray(e)&&(r=e[2],t=e[1],e=e[0]),"#"+Number(16777216+255*e*65536+255*t*256+255*r).toString(16).substring(1,7)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb2hsv=function(e,t,r){Array.isArray(e)&&(r=e[2],t=e[1],e=e[0]);var n,o=Math.max(e,t,r),i=Math.min(e,t,r),s=0,a=o,u=o-i;if(n=0===o?0:u/o,o===i)s=0;else{switch(o){case e:s=(t-r)/u+(t<r?6:0);break;case t:s=(r-e)/u+2;break;case r:s=(e-t)/u+4}s/=6}return[s,n,a]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.html2rgb=function(e){var t=0,r=0,n=0;return 7===e.length&&(t=parseInt("0x"+e.slice(1,3),16)/255,r=parseInt("0x"+e.slice(3,5),16)/255,n=parseInt("0x"+e.slice(5,7),16)/255),[t,r,n]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hsv2rgb=function(e,t,r){var n,o,i;Array.isArray(e)&&(r=e[2],t=e[1],e=e[0]);var s=Math.floor(6*e),a=6*e-s,u=r*(1-t),l=r*(1-a*t),c=r*(1-(1-a)*t);switch(s%6){case 0:n=r,o=c,i=u;break;case 1:n=l,o=r,i=u;break;case 2:n=u,o=r,i=c;break;case 3:n=u,o=l,i=r;break;case 4:n=c,o=u,i=r;break;case 5:n=r,o=u,i=l}return[n,o,i]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31);t.hsl2rgb=function(e,t,r){var o,i,s;if(Array.isArray(e)&&(r=e[2],t=e[1],e=e[0]),0===t)o=i=s=r;else{var a=r<.5?r*(1+t):r+t-r*t,u=2*r-a;o=n.hue2rgb(u,a,e+1/3),i=n.hue2rgb(u,a,e),s=n.hue2rgb(u,a,e-1/3)}return[o,i,s]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=2*Math.PI;function o(e){return Math.floor(e)}function i(e){return Math.abs(e)}t.sin=function(e){return Math.sin(e/360*n)},t.cos=function(e){return Math.cos(e/360*n)},t.asin=function(e){return Math.asin(e)/360*n},t.acos=function(e){return Math.acos(e)/360*n},t.tan=function(e){return Math.tan(e/360*n)},t.atan=function(e){return Math.atan(e)/360*n},t.atan2=function(e,t){return Math.atan2(e,t)/360*n},t.ceil=function(e){return Math.ceil(e)},t.floor=o,t.abs=i,t.min=function(e,t){return e<t?e:t},t.max=function(e,t){return e>t?e:t},t.rands=function(e,t,r,n){for(var o=new Array(r),i=0;i<r;i++)o[i]=Math.random()*(t-e)+e},t.log=function(e){return Math.log(e)},t.lookup=function(e,t){for(var r=0,n=0;n<t.length;n++){var o=t[n];if(o[0]>=e){o=t[--n];var s=t[n+1],a=0;return o[0]!==s[0]&&(a=i((e-o[0])/(s[0]-o[0]))),r=a>0?o[1]*(1-a)+s[1]*a:o[1]}}return r},t.pow=function(e,t){return Math.pow(e,t)},t.sign=function(e){return e<0?-1:e>1?1:0},t.sqrt=function(e){return Math.sqrt(e)},t.round=function(e){return o(e+.5)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32);t.translateLine=n.translateLine;var o=r(116);t.vector_char=o.vector_char;var i=r(14);t.vectorChar=i.vectorChar;var s=r(15);t.vectorParams=s.vectorParams;var a=r(118);t.vector_text=a.vector_text;var u=r(33);t.vectorText=u.vectorText},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14);t.vector_char=function(e,t,r){return n.vectorChar({xOffset:e,yOffset:t},r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hersheyFont={height:14,32:[16],33:[10,5,21,5,7,,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,,12,21,12,14],35:[21,11,25,4,-7,,17,25,10,-7,,4,12,18,12,,3,6,17,6],36:[20,8,25,8,-4,,12,25,12,-4,,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,,3,18,13,12,,13,18,3,12],43:[26,13,18,13,0,,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,,12,16,10,14,9,11,9,8,10,6,11,5,,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,,9,21,17,0,,4,7,14,7],66:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,,4,21,17,21,,4,11,12,11,,4,0,17,0],70:[18,4,21,4,0,,4,21,17,21,,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,,13,8,18,8],72:[22,4,21,4,0,,18,21,18,0,,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,,18,21,4,7,,9,12,18,0],76:[17,4,21,4,0,,4,0,16,0],77:[24,4,21,4,0,,4,21,12,0,,20,21,12,0,,20,21,20,0],78:[22,4,21,4,0,,4,21,18,0,,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,,12,4,18,-2],82:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,,17,21,9,0],87:[24,2,21,7,0,,12,21,7,0,,12,21,17,0,,22,21,17,0],88:[20,3,21,17,0,,17,21,3,0],89:[18,1,21,9,11,9,0,,17,21,9,11],90:[20,17,21,3,0,,3,21,17,21,,3,0,17,0],91:[14,4,25,4,-7,,5,25,5,-7,,4,25,11,25,,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,,10,25,10,-7,,3,25,10,25,,3,-7,10,-7],94:[16,6,15,8,18,10,15,,3,12,8,17,13,12,,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,,14,14,4,4,,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0,,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,,15,14,15,0],118:[16,2,14,8,0,,14,14,8,0],119:[22,3,14,7,0,,11,14,7,0,,11,14,15,0,,19,14,15,0],120:[17,3,14,14,0,,14,14,3,0],121:[16,2,14,8,0,,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,,3,14,14,14,,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33);t.vector_text=function(e,t,r){return n.vectorText({xOffset:e,yOffset:t},r)}}])}));