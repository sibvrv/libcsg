/*!
 * LibCSG version 0.8.0
 * Build Date: 2020-05-11T08:55:25.544Z
 * Homepage: https://github.com/sibvrv/libcsg
 * Repository: git+https://github.com/sibvrv/libcsg.git
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.libcsg=e():t.libcsg=e()}(global,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=38)}([function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(41)),n(r(42)),n(r(43)),n(r(44)),n(r(45)),n(r(49)),n(r(50)),n(r(51)),n(r(52)),n(r(53)),n(r(54)),n(r(55)),n(r(56)),n(r(73)),n(r(74)),n(r(75)),n(r(76)),n(r(77))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._CSGDEBUG=!1,e.defaultResolution2D=32,e.defaultResolution3D=12,e.EPS=1e-5,e.angleEPS=.1,e.areaEPS=.5*e.EPS*e.EPS*Math.sin(e.angleEPS),e.all=0,e.top=1,e.bottom=2,e.left=3,e.right=4,e.front=5,e.back=6,e.staticTag=1,e.getTag=function(){return e.staticTag++}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(9);e.fromPolygons=function(t){var e=new o.CSG;return e.polygons=t,e.isCanonicalized=!1,e.isRetesselated=!1,e},e.fromSlices=function(t){return n.Polygon3.createFromPoints([[0,0,0],[1,0,0],[1,1,0],[0,1,0]]).solidFromSlices(t)},e.fromObject=function(t){var r=t.polygons.map((function(t){return n.Polygon3.fromObject(t)})),o=e.fromPolygons(r);return o.isCanonicalized=t.isCanonicalized,o.isRetesselated=t.isRetesselated,o},e.fromCompactBinary=function(t){if("CSG"!==t.class)throw new Error("Not a CSG");for(var r,o,i,s,a,u,l=[],c=t.planeData,p=c.length/4,f=0,h=0;h<p;h++)r=c[f++],o=c[f++],i=c[f++],s=c[f++],a=n.Vector3.Create(r,o,i),u=new n.Plane(a,s),l.push(u);var d,v,y=[],g=t.vertexData,m=g.length/3;f=0;for(var x=0;x<m;x++)r=g[f++],o=g[f++],i=g[f++],d=n.Vector3.Create(r,o,i),v=new n.Vertex3(d),y.push(v);var w,_,P,b,O=t.shared.map((function(t){return n.Polygon3.Shared.fromObject(t)})),V=[],M=t.numPolygons,C=t.numVerticesPerPolygon,A=t.polygonVertices,S=t.polygonPlaneIndexes,j=t.polygonSharedIndexes;f=0;for(var T=0;T<M;T++){w=C[T],_=[];for(var E=0;E<w;E++)_.push(y[A[f++]]);u=l[S[T]],P=O[j[T]],b=new n.Polygon3(_,P,u),V.push(b)}var z=e.fromPolygons(V);return z.isCanonicalized=!0,z.isRetesselated=!0,z}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(1),i=r(21),s=r(12),a=r(4);e.fromSides=function(t){var e=new a.CAG;return e.sides=t,e},e.fromFakeCSG=function(t){var r=t.polygons.map((function(t){return n.Side._fromFakePolygon(t)})).filter(Boolean);return e.fromSides(r)},e.fromPoints=function(t){if(!t)throw new Error("points parameter must be defined");if(!Array.isArray(t))throw new Error("points parameter must be an array");if(void 0!==t[0].x||"number"==typeof t[0][0])return e.fromPointsArray(t);if("object"==typeof t[0][0])return e.fromNestedPointsArray(t);throw new Error("Unsupported points list format")},e.fromPointsArray=function(t){if(t.length<3)throw new Error("CAG shape needs at least 3 points");var r=[],s=new n.Vertex2(new n.Vector2(t[t.length-1]));t.map((function(t){var e=new n.Vertex2(new n.Vector2(t));r.push(new n.Side(s,e)),s=e}));var a=e.fromSides(r);if(i.isSelfIntersecting(a))throw new Error("Polygon is self intersecting!");var u=a.area();if(Math.abs(u)<o.areaEPS)throw new Error("Degenerate polygon!");return u<0&&(a=a.flipped()),a.canonicalized()},e.fromNestedPointsArray=function(t){if(1===t.length)return e.fromPoints(t[0]);var r=[];t.forEach((function(t){r.push(e.fromPointsArray(t))}));var n={};r.forEach((function(t,e){r.forEach((function(r,o){t!==r&&(n[e]||(n[e]={parents:[],isHole:!1}),n[o]||(n[o]={parents:[],isHole:!1}),i.contains(r,t)&&(n[e].parents.push(o),n[e].isHole=!!(n[e].parents.length%2),n[o].isHole=!!(n[o].parents.length%2)))}))}));var o=null,a=function(t){(o=n[t]).isHole&&(delete n[t],o.parents.forEach((function(e){r[e]=s.difference(r[e],r[t])})))};for(var u in n)a(u);var l=e.fromSides([]);for(var u in n)l=s.union(l,r[u]);return l},e.fromObject=function(t){var r=t.sides.map((function(t){return n.Side.fromObject(t)})),o=e.fromSides(r);return o.isCanonicalized=t.isCanonicalized,o},e.fromPointsNoCheck=function(t){var r=[],o=new n.Vector2(t[t.length-1]),i=new n.Vertex2(o);return t.map((function(t){var e=new n.Vector2(t),o=new n.Vertex2(e),s=new n.Side(i,o);r.push(s),i=o})),e.fromSides(r)},e.fromPath2=function(t){if(!t.isClosed())throw new Error("The path should be closed!");return e.fromPoints(t.getPoints())},e.fromCompactBinary=function(t){if("CAG"!==t.class)throw new Error("Not a CAG");for(var r=[],o=t.vertexData,i=o.length/2,s=0,a=0;a<i;a++){var u=o[s++],l=o[s++],c=new n.Vector2(u,l),p=new n.Vertex2(c);r.push(p)}var f=[],h=t.sideVertexIndices.length/2;s=0;for(var d=0;d<h;d++){var v=t.sideVertexIndices[s++],y=t.sideVertexIndices[s++],g=new n.Side(r[v],r[y]);f.push(g)}var m=e.fromSides(f);return m.isCanonicalized=!0,m}},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(5),s=r(0),a=r(2),u=r(3),l=r(23),c=r(26),p=r(21),f=r(78),h=r(27),d=r(17),v=r(89),y=r(28),g=r(29),m=r(90),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sides=[],e.isCanonicalized=!1,e}return o(e,t),e.prototype.union=function(t){var e=Array.isArray(t)?t:[t],r=this._toCSGWall(-1,1);return r=r.union(e.map((function(t){return t._toCSGWall(-1,1).reTesselated()}))),u.fromFakeCSG(r).canonicalized()},e.prototype.subtract=function(t){var e=Array.isArray(t)?t:[t],r=this._toCSGWall(-1,1);e.forEach((function(t){r=r.subtractSub(t._toCSGWall(-1,1),!1,!1)})),r=(r=r.reTesselated()).canonicalized();var n=u.fromFakeCSG(r);return n=n.canonicalized()},e.prototype.intersect=function(t){var e=Array.isArray(t)?t:[t],r=this._toCSGWall(-1,1);e.map((function(t){r=r.intersectSub(t._toCSGWall(-1,1),!1,!1)})),r=(r=r.reTesselated()).canonicalized();var n=u.fromFakeCSG(r);return n=n.canonicalized()},e.prototype.transform=function(t){var e=t.isMirroring(),r=this.sides.map((function(e){return e.transform(t)})),n=u.fromSides(r);return e&&(n=n.flipped()),n},e.prototype.flipped=function(){var t=this.sides.map((function(t){return t.flipped()}));return t.reverse(),u.fromSides(t)},e.prototype.center=function(t){return y.centerHelper({axes:t},[this])},e.prototype.expandedShell=function(t,e){return g.expandedShellOfCAG(this,t,e)},e.prototype.expand=function(t,e){return g.expand(this,t,e)},e.prototype.contract=function(t,e){return g.contract(this,t,e)},e.prototype.area=function(){return f.area(this)},e.prototype.getBounds=function(){return f.getBounds(this)},e.prototype.isSelfIntersecting=function(t){return p.isSelfIntersecting(this,t)},e.prototype.extrudeInOrthonormalBasis=function(t,e,r){return d.extrudeInOrthonormalBasis(this,t,e,r)},e.prototype.extrudeInPlane=function(t,e,r,n){return d.extrudeInPlane(this,t,e,r,n)},e.prototype.extrude=function(t){return d.extrude(this,t)},e.prototype.rotateExtrude=function(t){return d.rotateExtrude(this,t)},e.prototype.check=function(){return p.isCAGValid(this)},e.prototype.canonicalized=function(){return l.canonicalize(this)},e.prototype.reTesselated=function(){return c.reTessellate(this)},e.prototype.getOutlinePaths=function(){return v.cagOutlinePaths(this)},e.prototype.overCutInsideCorners=function(t){return h.overCutInsideCorners(this,t)},e.prototype.hasPointInside=function(t){return p.hasPointInside(this,t)},e.prototype.toString=function(){var t="CAG ("+this.sides.length+" sides):\n";return this.sides.map((function(e){t+="  "+e.toString()+"\n"})),t},e.prototype._toCSGWall=function(t,e){var r=this.sides.map((function(r){return r.toPolygon3D(t,e)}));return a.fromPolygons(r)},e.prototype._toVector3DPairs=function(t){var e=this.sides.map((function(t){var e=t.vertex0.pos,r=t.vertex1.pos;return[s.Vector3.Create(e.x,e.y,0),s.Vector3.Create(r.x,r.y,0)]}));return void 0!==t&&(e=e.map((function(e){return e.map((function(e){return e.transform(t)}))}))),e},e.prototype._toPlanePolygons=function(t){var e=(t=Object.assign({},{flipped:!1},t)).flipped,r=[0,0,0],n=[0,0,1],o=[0,1,0],u=new i.Connector(r,n,o),l=t.translation||r,c=t.axisVector||n,p=t.normalVector||o,f=t.toConnector||new i.Connector(l,c,p),h=u.getTransformationTo(f,!1,0),d=this.getBounds();d[0]=d[0].minus(new s.Vector2(1,1)),d[1]=d[1].plus(new s.Vector2(1,1));var v=this._toCSGWall(-1,1),y=a.fromPolygons([new s.Polygon3([new s.Vertex3(new s.Vector3(d[0].x,d[0].y,0)),new s.Vertex3(new s.Vector3(d[1].x,d[0].y,0)),new s.Vertex3(new s.Vector3(d[1].x,d[1].y,0)),new s.Vertex3(new s.Vector3(d[0].x,d[1].y,0))])]);e&&(y=y.invert());var g=(y=y.intersectSub(v)).polygons.filter((function(t){return Math.abs(t.plane.normal.z)>.99}));return g.forEach((function(t){t.vertices.forEach((function(t){t.uv=new s.Vector2(t.pos.x,t.pos.y)}))})),g.map((function(t){return t.transform(h)}))},e.prototype._toWallPolygons=function(t,e){void 0===e&&(e=0);var r=new i.Connector([0,0,0],[0,0,1],[0,1,0]),n=t.toConnector1,o=t.toConnector2;if(!(n instanceof i.Connector&&o instanceof i.Connector))throw new Error("could not parse Connector arguments toConnector1 or toConnector2");if(t.cag&&t.cag.sides.length!==this.sides.length)throw new Error("target cag needs same sides count as start cag");var a=t.cag||this,u=r.getTransformationTo(n,n.axisvector.z<0,0),l=r.getTransformationTo(o,o.axisvector.z<0,0),c=this._toVector3DPairs(u),p=a._toVector3DPairs(l),f=n.axisvector.z<0,h=[],d=[],v=[c[0]],y=[p[0]],g=0;for(g=1;g<c.length;++g)c[g][1].equals(c[g-1][0])||c[g][0].equals(c[g-1][1])||(h.push(v),v=[],d.push(y),y=[]),v.push(c[g]),y.push(p[g]);h.push(v),d.push(y);var m=[];return h.forEach((function(t,r){var n=0,o=0;p=d[r],t.forEach((function(t,r){var i=n+t[0].distanceTo(t[1]),a=o+p[r][0].distanceTo(p[r][1]),u=t[0].distanceTo(p[r][0]),l=t[1].distanceTo(p[r][1]),c=new s.Polygon3([s.Vertex3.fromPosAndUV(p[r][1],new s.Vector2(a,l*(1+e))),s.Vertex3.fromPosAndUV(p[r][0],new s.Vector2(o,u*(1+e))),s.Vertex3.fromPosAndUV(t[0],new s.Vector2(n,u*e))]),h=new s.Polygon3([s.Vertex3.fromPosAndUV(p[r][1],new s.Vector2(a,l*(1+e))),s.Vertex3.fromPosAndUV(t[0],new s.Vector2(n,u*e)),s.Vertex3.fromPosAndUV(t[1],new s.Vector2(i,l*e))]);f&&(c.plane=c.plane.flipped(),h.plane=h.plane.flipped()),m.push(c),m.push(h),n=i,o=a}))})),m},e.prototype.toPoints=function(){var t=this.sides.map((function(t){return t.vertex0.pos}));return t.length>0&&t.push(t.shift()),t},e.prototype.toCompactBinary=function(){var t=this.canonicalized(),e=t.sides.length,r={},n=[],o=0,i=new Uint32Array(2*e),s=0;t.sides.map((function(t){[t.vertex0,t.vertex1].map((function(t){var e,a=t.getTag();a in r?e=r[a]:(e=o++,r[a]=e,n.push(t)),i[s++]=e}))}));var a=new Float64Array(2*o),u=0;return n.map((function(t){var e=t.pos;a[u++]=e._x,a[u++]=e._y})),{class:"CAG",sideVertexIndices:i,vertexData:a}},e.Vertex=s.Vertex2,e.Side=s.Side,e.circle=m.circle,e.ellipse=m.ellipse,e.rectangle=m.rectangle,e.roundedRectangle=m.roundedRectangle,e.fromSides=u.fromSides,e.fromObject=u.fromObject,e.fromPoints=u.fromPoints,e.fromPointsNoCheck=u.fromPointsNoCheck,e.fromPath2=u.fromPath2,e.fromFakeCSG=u.fromFakeCSG,e.fromCompactBinary=u.fromCompactBinary,e}(s.TransformationMethods);e.CAG=x},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),s=function(t){function e(e,r,n){var o=t.call(this)||this;return o.point=new i.Vector3(e),o.axisvector=new i.Vector3(r).unit(),o.normalvector=new i.Vector3(n).unit(),o}return o(e,t),e.prototype.normalized=function(){var t=this.axisvector.unit(),r=this.normalvector.cross(t).unit(),n=t.cross(r);return new e(this.point,t,n)},e.prototype.transform=function(t){var r=this.point.multiply4x4(t);return new e(r,this.point.plus(this.axisvector).multiply4x4(t).minus(r),this.point.plus(this.normalvector).multiply4x4(t).minus(r))},e.prototype.getTransformationTo=function(t,e,r){e=!!e,r=r?Number(r):0;var n=this.normalized();t=t.normalized();var o=i.Matrix4x4.translation(this.point.negated()),s=i.Plane.anyPlaneFromVector3Ds(new i.Vector3(0,0,0),n.axisvector,t.axisvector),a=new i.OrthoNormalBasis(s),u=a.to2D(n.axisvector).angle(),l=a.to2D(t.axisvector).angle(),c=180*(l-u)/Math.PI;e&&(c+=180),o=(o=(o=o.multiply(a.getProjectionMatrix())).multiply(i.Matrix4x4.rotationZ(c))).multiply(a.getInverseProjectionMatrix());var p=n.transform(o),f=i.Plane.fromNormalAndPoint(t.axisvector,new i.Vector3(0,0,0)),h=new i.OrthoNormalBasis(f);return u=h.to2D(p.normalvector).angle(),c=180*((l=h.to2D(t.normalvector).angle())-u)/Math.PI,c+=r,o=(o=(o=(o=o.multiply(h.getProjectionMatrix())).multiply(i.Matrix4x4.rotationZ(c))).multiply(h.getInverseProjectionMatrix())).multiply(i.Matrix4x4.translation(t.point))},e.prototype.axisLine=function(){return new i.Line3D(this.point,this.axisvector)},e.prototype.extend=function(t){return new e(this.point.plus(this.axisvector.unit().times(t)),this.axisvector,this.normalvector)},e}(i.TransformationMethods);e.Connector=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.parseOption=function(t,e,r){var n=r;return t&&e in t&&(n=t[e]),n},e.parseOptionAs3DVector=function(t,r,o){var i=e.parseOption(t,r,o);return i=new n.Vector3(i)},e.parseOptionAs3DVectorList=function(t,r,o){return e.parseOption(t,r,o).map((function(t){return new n.Vector3(t)}))},e.parseOptionAs2DVector=function(t,r,o){var i=e.parseOption(t,r,o);return i=new n.Vector2(i)},e.parseOptionAsFloat=function(t,r,n){var o=e.parseOption(t,r,n);if("string"==typeof o&&(o=Number(o)),isNaN(o)||"number"!=typeof o)throw new Error("Parameter "+r+" should be a number");return o},e.parseOptionAsInt=function(t,r,n){var o=e.parseOption(t,r,n);if(o=Number(Math.floor(o)),isNaN(o))throw new Error("Parameter "+r+" should be a number");return o},e.parseOptionAsBool=function(t,r,n){var o=e.parseOption(t,r,n);return"string"==typeof o&&("true"===o?o=!0:("false"===o||"0"===o)&&(o=!1)),o=!!o}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(95)),n(r(96)),n(r(97)),n(r(98)),n(r(99)),n(r(100)),n(r(101)),n(r(102)),n(r(103)),n(r(31)),n(r(106))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCAG=function(t){return"sides"in t&&"length"in t.sides}},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(58),s=r(0),a=r(22),u=r(62),l=r(23),c=r(26),p=r(67),f=r(68),h=r(27),d=r(69),v=r(28),y=r(29),g=r(1),m=r(10),x=r(2),w=r(6),_=r(5),P=r(72),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.polygons=[],e.properties=new a.Properties,e.isCanonicalized=!0,e.isRetesselated=!0,e}return o(e,t),e.prototype.union=function(t){var e,r;for(t instanceof Array?(e=t.slice(0)).push(this):e=[this,t],r=1;r<e.length;r+=2)e.push(e[r-1].unionSub(e[r]));return e[r-1].reTesselated().canonicalized()},e.prototype.unionSub=function(t,e,r){if(this.mayOverlap(t)){var n=new i.Tree(this.polygons),o=new i.Tree(t.polygons);n.clipTo(o,!1),o.clipTo(n),o.invert(),o.clipTo(n),o.invert();var s=n.allPolygons().concat(o.allPolygons()),a=x.fromPolygons(s);return a.properties=this.properties._merge(t.properties),e&&(a=a.reTesselated()),r&&(a=a.canonicalized()),a}return this.unionForNonIntersecting(t)},e.prototype.unionForNonIntersecting=function(t){var e=this.polygons.concat(t.polygons),r=x.fromPolygons(e);return r.properties=this.properties._merge(t.properties),r.isCanonicalized=this.isCanonicalized&&t.isCanonicalized,r.isRetesselated=this.isRetesselated&&t.isRetesselated,r},e.prototype.subtract=function(t){var e;e=t instanceof Array?t:[t];for(var r=this,n=0;n<e.length;n++){var o=n===e.length-1;r=r.subtractSub(e[n],o,o)}return r},e.prototype.subtractSub=function(t,e,r){var n=new i.Tree(this.polygons),o=new i.Tree(t.polygons);n.invert(),n.clipTo(o),o.clipTo(n,!0),n.addPolygons(o.allPolygons()),n.invert();var s=x.fromPolygons(n.allPolygons());return s.properties=this.properties._merge(t.properties),e&&(s=s.reTesselated()),r&&(s=s.canonicalized()),s},e.prototype.intersect=function(t){var e;e=t instanceof Array?t:[t];for(var r=this,n=0;n<e.length;n++){var o=n===e.length-1;r=r.intersectSub(e[n],o,o)}return r},e.prototype.intersectSub=function(t,e,r){var n=new i.Tree(this.polygons),o=new i.Tree(t.polygons);n.invert(),o.clipTo(n),o.invert(),n.clipTo(o),o.clipTo(n),n.addPolygons(o.allPolygons()),n.invert();var s=x.fromPolygons(n.allPolygons());return s.properties=this.properties._merge(t.properties),e&&(s=s.reTesselated()),r&&(s=s.canonicalized()),s},e.prototype.invert=function(){var t=this.polygons.map((function(t){return t.flipped()}));return x.fromPolygons(t)},e.prototype.transform1=function(t){var e=this.polygons.map((function(e){return e.transform(t)})),r=x.fromPolygons(e);return r.properties=this.properties._transform(t),r.isRetesselated=this.isRetesselated,r},e.prototype.transform=function(t){var e=t.isMirroring(),r={},n={},o=this.polygons.map((function(o){var i,a=o.plane,u=a.getTag();u in n?i=n[u]:(i=a.transform(t),n[u]=i);var l=o.vertices.map((function(e){var n,o=e.getTag();return o in r?n=r[o]:(n=e.transform(t),r[o]=n),n}));return e&&l.reverse(),new s.Polygon3(l,o.shared,i)})),i=x.fromPolygons(o);return i.properties=this.properties._transform(t),i.isRetesselated=this.isRetesselated,i.isCanonicalized=this.isCanonicalized,i},e.prototype.center=function(t){return v.centerHelper({axes:t},[this])},e.prototype.expand=function(t,e){return y.expand(this,t,e)},e.prototype.contract=function(t,e){return y.contract(this,t,e)},e.prototype.expandedShell=function(t,e,r){return y.expandedShellOfCCSG(this,t,e,r)},e.prototype.stretchAtPlane=function(t,e,r){var n=s.Plane.fromNormalAndPoint(t,e),o=new s.OrthoNormalBasis(n),i=this.sectionCut(o).extrudeInOrthonormalBasis(o,r),a=this.cutByPlane(n),u=this.cutByPlane(n.flipped());return a.union([i,u.translate(n.normal.times(r))])},e.prototype.canonicalized=function(){return l.canonicalize(this)},e.prototype.reTesselated=function(){return c.reTessellate(this)},e.prototype.fixTJunctions=function(){return u.fixTJunctions(x.fromPolygons,this)},e.prototype.getBounds=function(){return p.bounds(this)},e.prototype.mayOverlap=function(t){if(0===this.polygons.length||0===t.polygons.length)return!1;var e=p.bounds(this),r=p.bounds(t);return!(e[1].x<r[0].x)&&(!(e[0].x>r[1].x)&&(!(e[1].y<r[0].y)&&(!(e[0].y>r[1].y)&&(!(e[1].z<r[0].z)&&!(e[0].z>r[1].z)))))},e.prototype.cutByPlane=function(t){return d.cutByPlane(this,t)},e.prototype.connectTo=function(t,e,r,n){var o=t.getTransformationTo(e,r,n);return this.transform(o)},e.prototype.setShared=function(t){var e=this.polygons.map((function(e){return new s.Polygon3(e.vertices,t,e.plane)})),r=x.fromPolygons(e);return r.properties=this.properties,r.isRetesselated=this.isRetesselated,r.isCanonicalized=this.isCanonicalized,r},e.prototype.setColor=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=(t=s.Polygon3.Shared).fromColor.apply(t,e);return this.setShared(n)},e.prototype.getTransformationAndInverseTransformationToFlatLying=function(){return h.getTransformationAndInverseTransformationToFlatLying(this)},e.prototype.getTransformationToFlatLying=function(){return h.getTransformationToFlatLying(this)},e.prototype.lieFlat=function(){return h.lieFlat(this)},e.prototype.projectToOrthoNormalBasis=function(t){return f.projectToOrthoNormalBasis(this,t)},e.prototype.sectionCut=function(t){return d.sectionCut(this,t)},e.prototype.getFeatures=function(t){var e=Array.isArray(t)?t:[t],r=this.toTriangles().map((function(t){return t.getTetraFeatures(e)})).reduce((function(t,e){return e.map((function(e,r){return e+(0===t?0:t[r])}))}),0);return 1===r.length?r[0]:r},e.prototype.toPolygons=function(){return this.polygons},e.prototype.toString=function(){var t="CSG solid:\n";return this.polygons.map((function(e){t+=e.toString()})),t},e.prototype.toCompactBinary=function(){var t=this.canonicalized(),e=t.polygons.length,r=0,n=0,o={},i=[],s=0,a={},u=[],l=[],c={},p=0;t.polygons.map((function(t){t.vertices.map((function(t){++r;var e=t.getTag();e in o||(o[e]=n++,i.push(t))}));var e=t.plane.getTag();e in a||(a[e]=s++,u.push(t.plane));var f=t.shared.getTag();f in c||(c[f]=p++,l.push(t.shared))}));for(var f=new Uint32Array(e),h=new Uint32Array(e),d=new Uint32Array(r),v=new Uint32Array(e),y=new Float64Array(3*n),g=new Float64Array(4*s),m=0,x=0;x<e;++x){var w=t.polygons[x];f[x]=w.vertices.length,w.vertices.map((function(t){var e=t.getTag(),r=o[e];d[m++]=r}));var _=w.plane.getTag(),P=a[_];v[x]=P;var b=w.shared.getTag(),O=c[b];h[x]=O}var V=0;i.map((function(t){var e=t.pos;y[V++]=e._x,y[V++]=e._y,y[V++]=e._z}));var M=0;return u.map((function(t){var e=t.normal;g[M++]=e._x,g[M++]=e._y,g[M++]=e._z,g[M++]=t.w})),{class:"CSG",numPolygons:e,numVerticesPerPolygon:f,polygonPlaneIndexes:v,polygonSharedIndexes:h,polygonVertices:d,vertexData:y,planeData:g,shared:l}},e.prototype.toTriangles=function(){var t=[];return this.polygons.forEach((function(e){for(var r=e.vertices[0],n=e.vertices.length-3;n>=0;n--)t.push(new s.Polygon3([r,e.vertices[n+1],e.vertices[n+2]],e.shared,e.plane))})),t},e.Vector2D=s.Vector2,e.Vector3D=s.Vector3,e.Vertex=s.Vertex3,e.Plane=s.Plane,e.Polygon=s.Polygon3,e.Polygon2D=s.Polygon2D,e.Line2D=s.Line2D,e.Line3D=s.Line3D,e.Path2D=s.Path2D,e.OrthoNormalBasis=s.OrthoNormalBasis,e.Matrix4x4=s.Matrix4x4,e.Connector=_.Connector,e.ConnectorList=P.ConnectorList,e.Properties=a.Properties,e._CSGDEBUG=g._CSGDEBUG,e.defaultResolution2D=g.defaultResolution2D,e.defaultResolution3D=g.defaultResolution3D,e.EPS=g.EPS,e.angleEPS=g.angleEPS,e.areaEPS=g.areaEPS,e.all=g.all,e.top=g.top,e.bottom=g.bottom,e.left=g.left,e.right=g.right,e.front=g.front,e.back=g.back,e.staticTag=g.staticTag,e.getTag=g.getTag,e.sphere=m.sphere,e.cube=m.cube,e.roundedCube=m.roundedCube,e.cylinder=m.cylinder,e.roundedCylinder=m.roundedCylinder,e.cylinderElliptic=m.cylinderElliptic,e.polyhedron=m.polyhedron,e.fromCompactBinary=x.fromCompactBinary,e.fromObject=x.fromObject,e.fromSlices=x.fromSlices,e.fromPolygons=x.fromPolygons,e.parseOptionAs2DVector=w.parseOptionAs2DVector,e.parseOptionAs3DVector=w.parseOptionAs3DVector,e.parseOptionAs3DVectorList=w.parseOptionAs3DVectorList,e.parseOptionAsBool=w.parseOptionAsBool,e.parseOptionAsFloat=w.parseOptionAsFloat,e.parseOptionAsInt=w.parseOptionAsInt,e}(s.TransformationMethods);e.CSG=b},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),o=r(1),i=r(2),s=r(0),a=r(5),u=r(22);e.cube=function(t){var e,r,o,l;if("corner1"in(t=t||{})||"corner2"in t){if("center"in t||"radius"in t)throw new Error("cube: should either give a radius and center parameter, or a corner1 and corner2 parameter");o=n.parseOptionAs3DVector(t,"corner1",[0,0,0]),l=n.parseOptionAs3DVector(t,"corner2",[1,1,1]),e=o.plus(l).times(.5),r=l.minus(o).times(.5)}else e=n.parseOptionAs3DVector(t,"center",[0,0,0]),r=n.parseOptionAs3DVector(t,"radius",[1,1,1]);r=r.abs();var c=i.fromPolygons([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map((function(t){var n=t[0].map((function(t){var n=new s.Vector3(e.x+r.x*(2*+!!(1&t)-1),e.y+r.y*(2*+!!(2&t)-1),e.z+r.z*(2*+!!(4&t)-1));return new s.Vertex3(n)}));return new s.Polygon3(n,null)})));return c.properties.cube=new u.Properties,c.properties.cube.center=new s.Vector3(e),c.properties.cube.facecenters=[new a.Connector(new s.Vector3([r.x,0,0]).plus(e),[1,0,0],[0,0,1]),new a.Connector(new s.Vector3([-r.x,0,0]).plus(e),[-1,0,0],[0,0,1]),new a.Connector(new s.Vector3([0,r.y,0]).plus(e),[0,1,0],[0,0,1]),new a.Connector(new s.Vector3([0,-r.y,0]).plus(e),[0,-1,0],[0,0,1]),new a.Connector(new s.Vector3([0,0,r.z]).plus(e),[0,0,1],[1,0,0]),new a.Connector(new s.Vector3([0,0,-r.z]).plus(e),[0,0,-1],[1,0,0])],c},e.sphere=function(t){t=t||{};var e,r,a,l=n.parseOptionAs3DVector(t,"center",[0,0,0]),c=n.parseOptionAsFloat(t,"radius",1),p=n.parseOptionAsInt(t,"resolution",o.defaultResolution3D);"axes"in t?(e=t.axes[0].unit().times(c),r=t.axes[1].unit().times(c),a=t.axes[2].unit().times(c)):(e=new s.Vector3([1,0,0]).times(c),r=new s.Vector3([0,-1,0]).times(c),a=new s.Vector3([0,0,1]).times(c)),p<4&&(p=4);for(var f,h=Math.round(p/4),d=[],v=0;v<=p;v++){var y=2*Math.PI*v/p,g=e.times(Math.cos(y)).plus(r.times(Math.sin(y)));if(v>0)for(var m=[],x=void 0,w=void 0,_=0;_<=h;_++){var P=.5*Math.PI*_/h,b=Math.cos(P),O=Math.sin(P);_>0&&((m=[]).push(new s.Vertex3(l.plus(f.times(x).minus(a.times(w))))),m.push(new s.Vertex3(l.plus(g.times(x).minus(a.times(w))))),_<h&&m.push(new s.Vertex3(l.plus(g.times(b).minus(a.times(O))))),m.push(new s.Vertex3(l.plus(f.times(b).minus(a.times(O))))),d.push(new s.Polygon3(m)),(m=[]).push(new s.Vertex3(l.plus(f.times(x).plus(a.times(w))))),m.push(new s.Vertex3(l.plus(g.times(x).plus(a.times(w))))),_<h&&m.push(new s.Vertex3(l.plus(g.times(b).plus(a.times(O))))),m.push(new s.Vertex3(l.plus(f.times(b).plus(a.times(O))))),m.reverse(),d.push(new s.Polygon3(m))),x=b,w=O}f=g}var V=i.fromPolygons(d);return V.properties.sphere=new u.Properties,V.properties.sphere.center=new s.Vector3(l),V.properties.sphere.facepoint=l.plus(e),V},e.cylinder=function(t){var e=n.parseOptionAs3DVector(t,"start",[0,-1,0]),r=n.parseOptionAs3DVector(t,"end",[0,1,0]),l=n.parseOptionAsFloat(t,"radius",1),c=n.parseOptionAsFloat(t,"radiusEnd",l),p=n.parseOptionAsFloat(t,"radiusStart",l),f=n.parseOptionAsFloat(t,"sectorAngle",360);if(f=f>360?f%360:f,c<0||p<0)throw new Error("Radius should be non-negative");if(0===c&&0===p)throw new Error("Either radiusStart or radiusEnd should be positive");var h=n.parseOptionAsInt(t,"resolution",o.defaultResolution2D),d=r.minus(e),v=d.unit(),y=v.randomNonParallelVector().unit(),g=y.cross(v).unit(),m=new s.Vertex3(e),x=new s.Vertex3(r),w=[];function _(t,r,n){var o=r*Math.PI*f/180,i=y.times(Math.cos(o)).plus(g.times(Math.sin(o))),a=e.plus(d.times(t)).plus(i.times(n));return new s.Vertex3(a)}if(f>0){for(var P=0;P<h;P++){var b=P/h,O=(P+1)/h;c===p?(w.push(new s.Polygon3([m,_(0,b,c),_(0,O,c)])),w.push(new s.Polygon3([_(0,O,c),_(0,b,c),_(1,b,c),_(1,O,c)])),w.push(new s.Polygon3([x,_(1,O,c),_(1,b,c)]))):(p>0&&(w.push(new s.Polygon3([m,_(0,b,p),_(0,O,p)])),w.push(new s.Polygon3([_(0,b,p),_(1,b,c),_(0,O,p)]))),c>0&&(w.push(new s.Polygon3([x,_(1,O,c),_(1,b,c)])),w.push(new s.Polygon3([_(1,b,c),_(1,O,c),_(0,O,p)]))))}f<360&&(w.push(new s.Polygon3([m,x,_(0,0,p)])),w.push(new s.Polygon3([_(0,0,p),x,_(1,0,c)])),w.push(new s.Polygon3([m,_(0,1,p),x])),w.push(new s.Polygon3([_(0,1,p),_(1,1,c),x])))}var V=i.fromPolygons(w);V.properties.cylinder=new u.Properties,V.properties.cylinder.start=new a.Connector(e,v.negated(),y),V.properties.cylinder.end=new a.Connector(r,v,y);var M=e.plus(d.times(.5)),C=y.rotate(e,v,-f/2).times((p+c)/2),A=C.cross(v);return V.properties.cylinder.facepointH=new a.Connector(M.plus(C),C,v),V.properties.cylinder.facepointH90=new a.Connector(M.plus(A),A,v),V},e.roundedCylinder=function(t){var r,l=n.parseOptionAs3DVector(t,"start",[0,-1,0]),c=n.parseOptionAs3DVector(t,"end",[0,1,0]),p=n.parseOptionAsFloat(t,"radius",1),f=c.minus(l);r=Math.abs(f.x)>Math.abs(f.y)?new s.Vector3(0,1,0):new s.Vector3(1,0,0);var h=n.parseOptionAs3DVector(t,"normal",r),d=n.parseOptionAsInt(t,"resolution",o.defaultResolution3D);d<4&&(d=4);var v=[],y=Math.floor(.25*d);if(f.length()<o.EPS)return e.sphere({center:l,radius:p,resolution:d});for(var g,m=f.unit().times(p),x=m.cross(h).unit().times(p),w=x.cross(m).unit().times(p),_=0;_<=d;_++){var P=2*Math.PI*_/d,b=x.times(Math.cos(P)).plus(w.times(Math.sin(P)));if(_>0){var O=[];O.push(new s.Vertex3(l.plus(b))),O.push(new s.Vertex3(l.plus(g))),O.push(new s.Vertex3(c.plus(g))),O.push(new s.Vertex3(c.plus(b))),v.push(new s.Polygon3(O));for(var V=void 0,M=void 0,C=0;C<=y;C++){var A=.5*Math.PI*C/y,S=Math.cos(A),j=Math.sin(A);C>0&&((O=[]).push(new s.Vertex3(l.plus(g.times(V).minus(m.times(M))))),O.push(new s.Vertex3(l.plus(b.times(V).minus(m.times(M))))),C<y&&O.push(new s.Vertex3(l.plus(b.times(S).minus(m.times(j))))),O.push(new s.Vertex3(l.plus(g.times(S).minus(m.times(j))))),v.push(new s.Polygon3(O)),(O=[]).push(new s.Vertex3(c.plus(g.times(V).plus(m.times(M))))),O.push(new s.Vertex3(c.plus(b.times(V).plus(m.times(M))))),C<y&&O.push(new s.Vertex3(c.plus(b.times(S).plus(m.times(j))))),O.push(new s.Vertex3(c.plus(g.times(S).plus(m.times(j))))),O.reverse(),v.push(new s.Polygon3(O))),V=S,M=j}}g=b}var T=i.fromPolygons(v),E=m.unit(),z=x.unit();return T.properties.roundedCylinder=new u.Properties,T.properties.roundedCylinder.start=new a.Connector(l,E.negated(),z),T.properties.roundedCylinder.end=new a.Connector(c,E,z),T.properties.roundedCylinder.facepoint=l.plus(x),T},e.cylinderElliptic=function(t){var e=n.parseOptionAs3DVector(t,"start",[0,-1,0]),r=n.parseOptionAs3DVector(t,"end",[0,1,0]),l=n.parseOptionAs2DVector(t,"radius",[1,1]),c=n.parseOptionAs2DVector(t,"radiusEnd",l),p=n.parseOptionAs2DVector(t,"radiusStart",l);if(c._x<0||p._x<0||c._y<0||p._y<0)throw new Error("Radius should be non-negative");if(!(0!==c._x&&0!==c._y||0!==p._x&&0!==p._y))throw new Error("Either radiusStart or radiusEnd should be positive");var f=n.parseOptionAsInt(t,"resolution",o.defaultResolution2D),h=r.minus(e),d=h.unit(),v=d.randomNonParallelVector().unit(),y=v.cross(d).unit(),g=new s.Vertex3(e),m=new s.Vertex3(r),x=[];function w(t,r,n){var o=r*Math.PI*2,i=v.times(n._x*Math.cos(o)).plus(y.times(n._y*Math.sin(o))),a=e.plus(h.times(t)).plus(i);return new s.Vertex3(a)}for(var _=0;_<f;_++){var P=_/f,b=(_+1)/f;c._x===p._x&&c._y===p._y?(x.push(new s.Polygon3([g,w(0,P,c),w(0,b,c)])),x.push(new s.Polygon3([w(0,b,c),w(0,P,c),w(1,P,c),w(1,b,c)])),x.push(new s.Polygon3([m,w(1,b,c),w(1,P,c)]))):(p._x>0&&(x.push(new s.Polygon3([g,w(0,P,p),w(0,b,p)])),x.push(new s.Polygon3([w(0,P,p),w(1,P,c),w(0,b,p)]))),c._x>0&&(x.push(new s.Polygon3([m,w(1,b,c),w(1,P,c)])),x.push(new s.Polygon3([w(1,P,c),w(1,b,c),w(0,b,p)]))))}var O=i.fromPolygons(x);return O.properties.cylinder=new u.Properties,O.properties.cylinder.start=new a.Connector(e,d.negated(),v),O.properties.cylinder.end=new a.Connector(r,d,v),O.properties.cylinder.facepoint=e.plus(v.times(p)),O},e.roundedCube=function(t){var r,i,l,c;if("corner1"in(t=t||{})||"corner2"in t){if("center"in t||"radius"in t)throw new Error("roundedCube: should either give a radius and center parameter, or a corner1 and corner2 parameter");l=n.parseOptionAs3DVector(t,"corner1",[0,0,0]),c=n.parseOptionAs3DVector(t,"corner2",[1,1,1]),r=l.plus(c).times(.5),i=c.minus(l).times(.5)}else r=n.parseOptionAs3DVector(t,"center",[0,0,0]),i=n.parseOptionAs3DVector(t,"radius",[1,1,1]);i=i.abs();var p=n.parseOptionAsInt(t,"resolution",o.defaultResolution3D);p<4&&(p=4),p%2==1&&p<8&&(p=8);var f=n.parseOptionAs3DVector(t,"roundradius",[.2,.2,.2]);f=s.Vector3.Create(Math.max(f.x,.01),Math.max(f.y,.01),Math.max(f.z,.01));var h=i.minus(f);if(h.x<0||h.y<0||h.z<0)throw new Error("roundradius <= radius!");var d=e.sphere({radius:1,resolution:p});return d=d.scale(f),h.x>o.EPS&&(d=d.stretchAtPlane([1,0,0],[0,0,0],2*h.x)),h.y>o.EPS&&(d=d.stretchAtPlane([0,1,0],[0,0,0],2*h.y)),h.z>o.EPS&&(d=d.stretchAtPlane([0,0,1],[0,0,0],2*h.z)),(d=(d=d.translate([-h.x+r.x,-h.y+r.y,-h.z+r.z])).reTesselated()).properties.roundedCube=new u.Properties,d.properties.roundedCube.center=new s.Vertex3(r),d.properties.roundedCube.facecenters=[new a.Connector(new s.Vector3([i.x,0,0]).plus(r),[1,0,0],[0,0,1]),new a.Connector(new s.Vector3([-i.x,0,0]).plus(r),[-1,0,0],[0,0,1]),new a.Connector(new s.Vector3([0,i.y,0]).plus(r),[0,1,0],[0,0,1]),new a.Connector(new s.Vector3([0,-i.y,0]).plus(r),[0,-1,0],[0,0,1]),new a.Connector(new s.Vector3([0,0,i.z]).plus(r),[0,0,1],[1,0,0]),new a.Connector(new s.Vector3([0,0,-i.z]).plus(r),[0,0,-1],[1,0,0])],d},e.polyhedron=function(t){if("points"in(t=t||{})!="faces"in t)throw new Error("polyhedron needs 'points' and 'faces' arrays");var e=n.parseOptionAs3DVectorList(t,"points",[[1,1,0],[1,-1,0],[-1,-1,0],[-1,1,0],[0,0,1]]).map((function(t){return new s.Vertex3(t)})),r=n.parseOption(t,"faces",[[0,1,4],[1,2,4],[2,3,4],[3,0,4],[1,0,3],[2,1,3]]);r.forEach((function(t){t.reverse()}));var o=r.map((function(t){return new s.Polygon3(t.map((function(t){return e[t]})))}));return i.fromPolygons(o).reTesselated()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.solve2Linear=function(t,e,r,n,o,i){var s=1/(t*n-e*r),a=o*n-e*i,u=-o*r+t*i;return[a*=s,u*=s]}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(46)),n(r(47)),n(r(48))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fnNumberSort=function(t,e){return t-e},e.fnSortByIndex=function(t,e){return t.index-e.index}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(9),s=r(2),a=r(10),u=r(13);e.expandedShellOfCCSG=function(t,e,r,l){var c,p=t.reTesselated();c=l?p:new i.CSG,p.polygons.map((function(t){var r=t.plane.normal.unit().times(2*e),n=t.translate(r.times(-.5)).extrude(r);c=c.unionSub(n,!1,!1)}));var f={};for(var h in p.polygons.map((function(t){for(var e=t.vertices.length,r=t.vertices[e-1],n=r.getTag(),o=0;o<e;o++){var i=t.vertices[o],s=i.getTag(),a=void 0,u=void 0;(a=s<n?s+"-"+n:n+"-"+s)in f?u=f[a]:(u={v1:r,v2:i,planenormals:[]},f[a]=u),u.planenormals.push(t.plane.normal),n=s,r=i}})),f){for(var d=f[h],v=d.v1.pos,y=d.v2.pos,g=y.minus(v).unit(),m=d.planenormals[0].unit(),x=m.cross(g),w=[],_=0;_<r;_++)w.push(_*Math.PI*2/r);_=0;for(var P=d.planenormals.length;_<P;_++){var b=d.planenormals[_],O=x.dot(b),V=m.dot(b);(E=Math.atan2(O,V))<0&&(E+=2*Math.PI),w.push(E),(E=Math.atan2(-O,-V))<0&&(E+=2*Math.PI),w.push(E)}var M=(w=w.sort(u.fnNumberSort)).length,C=void 0,A=void 0,S=[],j=[],T=[];for(_=-1;_<M;_++){var E=w[_<0?_+M:_],z=(O=Math.sin(E),V=Math.cos(E),m.times(V*e).plus(x.times(O*e))),D=v.plus(z),k=y.plus(z),F=!1;if(_>=0&&D.distanceTo(C)<n.EPS&&(F=!0),!F){if(_>=0){S.push(new o.Vertex3(D)),j.push(new o.Vertex3(k));var I=[new o.Vertex3(A),new o.Vertex3(k),new o.Vertex3(D),new o.Vertex3(C)],B=new o.Polygon3(I);T.push(B)}C=D,A=k}}j.reverse(),T.push(new o.Polygon3(S)),T.push(new o.Polygon3(j));var G=s.fromPolygons(T);c=c.unionSub(G,!1,!1)}var N={};for(var R in p.polygons.map((function(t){t.vertices.map((function(e){var r,n=e.getTag();n in N?r=N[n]:(r={pos:e.pos,normals:[]},N[n]=r),r.normals.push(t.plane.normal)}))})),N){var q=N[R],L=q.normals[0].unit(),Z=null,Y=0;for(_=1;_<q.normals.length;_++){var U=q.normals[_].unit(),X=L.cross(U).length();X>.05&&X>Y&&(Y=X,Z=U)}Z||(Z=L.randomNonParallelVector());var W=L.cross(Z).unit(),H=W.cross(L),J=a.sphere({center:q.pos,radius:e,resolution:r,axes:[L,W,H]});c=c.unionSub(J,!1,!1)}return c}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(3),s=r(4);e.expandedShellOfCAG=function(t,e,r){(r=r||8)<4&&(r=4);var a=[],u={},l=t.canonicalized();for(var c in l.sides.map((function(t){var r=t.vertex1.pos.minus(t.vertex0.pos),o=r.length();if(o>n.EPS){var s=(r=r.times(1/o)).normal().times(e),l=[t.vertex1.pos.plus(s),t.vertex1.pos.minus(s),t.vertex0.pos.minus(s),t.vertex0.pos.plus(s)],c=i.fromPoints(l);a.push(c);for(var p=0;p<2;p++){var f=0===p?t.vertex0.pos:t.vertex1.pos,h=0===p?t.vertex1.pos:t.vertex0.pos,d=f.x+" "+f.y;d in u||(u[d]=[]),u[d].push({p1:f,p2:h})}}})),u){var p=u[c],f=void 0,h=void 0,d=p[0].p1;if(2===p.length){var v=p[0].p2,y=p[1].p2;if(f=v.minus(d).angleDegrees(),(h=y.minus(d).angleDegrees())<f&&(h+=360),h>=f+360&&(h-=360),h<f+180){var g=h;h=f+360,f=g}f+=90,h-=90}else f=0,h=360;var m=h>f+359.999;if(m&&(f=0,h=360),h>f+n.angleEPS){var x=[];m||x.push(d);var w=Math.round(r*(h-f)/360);w<1&&(w=1);for(var _=0;_<=w;_++){var P=f+_/w*(h-f);_===w&&(P=h);var b=d.plus(o.Vector2.fromAngleDegrees(P).times(e));(!m||_>0)&&x.push(b)}var O=i.fromPointsNoCheck(x);a.push(O)}}var V=new s.CAG;return V=V.union(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCSG=function(t){return"polygons"in t&&"length"in t.polygons}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(30)),n(r(79)),n(r(80)),n(r(81)),n(r(82)),n(r(83)),n(r(88))},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var o=r(19);e.vectorChar=function(t,e){void 0===e&&(e="?");var r=o.vectorParams(t,e),i=r.xOffset,s=r.yOffset,a=r.input,u=r.font,l=r.height,c=r.extrudeOffset,p=a.charCodeAt(0);p&&u[p]||(p=63);for(var f=n(u[p]),h=(l-c)/u.height,d=c/2,v=f.shift()*h,y=[],g=[],m=0,x=f.length;m<x;m+=2){var w=h*f[m]+i,_=h*f[m+1]+s+d;void 0===f[m]?(y.push(g),g=[],m--):g.push([w,_])}return g.length&&y.push(g),{width:v,height:l,segments:y}}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(122);e.defaultsVectorParams={xOffset:0,yOffset:0,input:"?",align:"left",font:o.hersheyFont,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0},e.vectorParams=function(t,r){return void 0===r&&(r="?"),n(n(n({},e.defaultsVectorParams),{input:r}),"string"==typeof t?{input:t}:t)}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(40)),n(r(91)),n(r(92)),n(r(93)),n(r(94)),n(r(107)),n(r(32)),n(r(108)),n(r(109)),n(r(33))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0);e.isCAGValid=function(t){var e=[];t.isSelfIntersecting(!0)&&e.push("Self intersects");var r={},o=function(t){var e=t.x+" "+t.y;e in r||(r[e]=0),r[e]++};for(var i in t.sides.map((function(t){o(t.vertex0.pos),o(t.vertex1.pos)})),r){var s=r[i];1&s&&e.push("Uneven number of sides ("+s+") for point "+i)}var a=t.area();if(a<n.areaEPS&&e.push("Area is "+a),e.length>0){var u="";throw e.map((function(t){u+=t+"\n"})),new Error(u)}},e.isSelfIntersecting=function(t,e){for(var r=t.sides.length,n=0;n<r;n++)for(var i=t.sides[n],s=n+1;s<r;s++){var a=t.sides[s];if(o.linesIntersect(i.vertex0.pos,i.vertex1.pos,a.vertex0.pos,a.vertex1.pos))return e&&(console.log("side "+n+": "+i),console.log("side "+s+": "+a)),!0}return!1},e.hasPointInside=function(t,r){var n=null,o=null,i=!1;return t.sides.forEach((function(t){n=t.vertex0.pos,o=t.vertex1.pos,e.hasPointInside.c1(r,n,o)&&e.hasPointInside.c2(r,n,o)&&(i=!i)})),i},e.hasPointInside.c1=function(t,e,r){return e.y>t.y!=r.y>t.y},e.hasPointInside.c2=function(t,e,r){return t.x<(r.x-e.x)*(t.y-e.y)/(r.y-e.y)+e.x},e.contains=function(t,r){for(var n=0,o=r.sides.length;n<o;n++)if(!e.hasPointInside(t,r.sides[n].vertex0.pos))return!1;return!0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.transformObj=function(e,r,n){for(var o in e)if("_transform"!==o&&"_merge"!==o){var i=e[o],s=i;"object"==typeof i&&("transform"in i&&"function"==typeof i.transform?s=i.transform(n):i instanceof Array?(s=[],t.transformObj(i,s,n)):i instanceof t&&(s=new t,t.transformObj(i,s,n))),r[o]=s}},t.cloneObj=function(e,r){for(var n in e)if("_transform"!==n&&"_merge"!==n){var o=e[n],i=o;if("object"==typeof o)if(o instanceof Array){i=[];for(var s=0;s<o.length;s++)i.push(o[s])}else o instanceof t&&(i=new t,t.cloneObj(o,i));r[n]=i}},t.addFrom=function(e,r){for(var n in r)"_transform"!==n&&"_merge"!==n&&(n in e&&"object"==typeof e[n]&&e[n]instanceof t&&"object"==typeof r[n]&&r[n]instanceof t?t.addFrom(e[n],r[n]):n in e||(e[n]=r[n]))},t.prototype._transform=function(e){var r=new t;return t.transformObj(this,r,e),r},t.prototype._merge=function(e){var r=new t;return t.cloneObj(this,r),t.addFrom(r,e),r},t}();e.Properties=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(24),i=r(63),s=r(2),a=r(3);e.canonicalize=function(t,e){return t.isCanonicalized?t:"sides"in t?l(t,e):u(t,e)};var u=function(t,e){if(t.isCanonicalized)return t;var r=new o.FuzzyCSGFactory,n=c(r,t);return n.isCanonicalized=!0,n.isRetesselated=t.isRetesselated,n.properties=t.properties,n},l=function(t,e){if(t.isCanonicalized)return t;var r=new i.FuzzyCAGFactory,n=p(r,t);return n.isCanonicalized=!0,n},c=function(t,e){var r=t,n=[];return e.polygons.forEach((function(t){var e=r.getPolygon(t);e.vertices.length>=3&&n.push(e)})),s.fromPolygons(n)},p=function(t,e){var r=t,o=e.sides.map((function(t){return r.getSide(t)})).filter((function(t){return t.length()>n.EPS}));return a.fromSides(o)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(25),s=function(){function t(){this.vertexfactory=new i.FuzzyFactory(5,n.EPS),this.planefactory=new i.FuzzyFactory(4,n.EPS),this.polygonsharedfactory={}}return t.prototype.getPolygonShared=function(t){var e=t.getHash();return e in this.polygonsharedfactory?this.polygonsharedfactory[e]:(this.polygonsharedfactory[e]=t,t)},t.prototype.getVertex=function(t){var e=[t.pos._x,t.pos._y,t.pos._z,t.uv._x,t.uv._y];return this.vertexfactory.lookupOrCreate(e,(function(e){return t}))},t.prototype.getPlane=function(t){var e=[t.normal._x,t.normal._y,t.normal._z,t.w];return this.planefactory.lookupOrCreate(e,(function(e){return t}))},t.prototype.getPolygon=function(t){var e=this.getPlane(t.plane),r=this.getPolygonShared(t.shared),n=this,i=t.vertices.map((function(t){return n.getVertex(t)})),s=[];if(i.length>0){var a=i[i.length-1].getTag();i.forEach((function(t){var e=t.getTag();e!==a&&s.push(t),a=e}))}return s.length<3&&(s=[]),new o.Polygon3(s,r,e)},t}();e.FuzzyCSGFactory=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.lookuptable={},this.multiplier=1,this.multiplier=1/e}return t.prototype.lookupOrCreate=function(t,e){var r=this.multiplier,n="";if(t.forEach((function(t){var e=Math.round(t*r);n+=e+"/"})),n in this.lookuptable)return this.lookuptable[n];for(var o=e(t),i=t.map((function(t){var e=Math.floor(t*r);return[e+"/",e+1+"/"]})),s=1<<t.length,a=function(t){var e=t;n="",i.forEach((function(t){n+=t[1&e],e>>=1})),u.lookuptable[n]=o},u=this,l=0;l<s;++l)a(l);return o},t}();e.FuzzyFactory=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(24),o=r(2),i=r(64);e.reTessellate=function(t){if(t.isRetesselated)return t;var e={},r=t.isCanonicalized,s=new n.FuzzyCSGFactory;t.polygons.map((function(t){var n=t.plane,o=t.shared;r||(n=s.getPlane(n),o=s.getPolygonShared(o));var i=n.getTag()+"/"+o.getTag();i in e?e[i].push(t):e[i]=[t]}));var a=[];for(var u in e){var l=e[u];if(l.length<2)a=a.concat(l);else{var c=[];i.reTessellateCoplanarPolygons(l,c),a=a.concat(c)}}var p=o.fromPolygons(a);return p.isRetesselated=!0,p.properties=t.properties,p}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(5),i=r(3);e.getTransformationAndInverseTransformationToFlatLying=function(t){if(0===t.polygons.length){var e=new n.Matrix4x4;return[e,e]}var r=t.canonicalized(),i={};r.polygons.map((function(t){i[t.plane.getTag()]=t.plane}));var s=new n.Vector3(1,0,0),a=new n.Vector3(0,1,0),u=new n.Vector3(0,0,1),l=new o.Connector([0,0,0],[0,0,-1],s),c=new o.Connector([0,0,0],[0,0,-1],a),p=!0,f=0,h=0,d=void 0,v=void 0;for(var y in i){var g,m=i[y],x=m.normal.times(m.w),w=void 0,_=void 0;if(m.normal.cross(s).length()>m.normal.cross(a).length())w=(g=new o.Connector(x,m.normal,s)).getTransformationTo(l,!1,0),_=l.getTransformationTo(g,!1,0);else w=(g=new o.Connector(x,m.normal,a)).getTransformationTo(c,!1,0),_=c.getTransformationTo(g,!1,0);var P=r.transform(w),b=-m.normal.dot(u),O=P.getBounds(),V=O[1].z-O[0].z,M=p;if(M||(V<f||V===f&&b>h)&&(M=!0),M){var C=new n.Vector3([-.5*(O[1].x+O[0].x),-.5*(O[1].y+O[0].y),-O[0].z]);f=V,h=b,d=w=w.multiply(n.Matrix4x4.translation(C)),v=_=n.Matrix4x4.translation(C.negated()).multiply(_)}p=!1}return[d,v]},e.getTransformationToFlatLying=function(t){return t.getTransformationAndInverseTransformationToFlatLying()[0]},e.lieFlat=function(t){var e=t.getTransformationToFlatLying();return t.transform(e)},e.overCutInsideCorners=function(t,e){var r=t.canonicalized(),o={};r.sides.map((function(t){t.vertex0.getTag()in o||(o[t.vertex0.getTag()]={pos:t.vertex0.pos,from:[],to:[]}),o[t.vertex0.getTag()].to.push(t.vertex1.pos),t.vertex1.getTag()in o||(o[t.vertex1.getTag()]={pos:t.vertex1.pos,from:[],to:[]}),o[t.vertex1.getTag()].from.push(t.vertex0.pos)}));var s=[];for(var a in o){var u=o[a];if(1===u.from.length&&1===u.to.length){var l=u.from[0],c=u.pos,p=u.to[0],f=c.minus(l).unit(),h=p.minus(c).unit();if(f.cross(h)<.001){var d=h.angleRadians()-f.angleRadians()+Math.PI;d<0?d+=2*Math.PI:d>=2*Math.PI&&(d-=2*Math.PI);for(var v=h.minus(f).unit(),y=30/180*Math.PI,g=e/Math.cos(y/2),m=c.plus(v.times(g)),x=d+v.angleRadians(),w=2*(Math.PI-d),_=2*Math.ceil(w/y/2),P=[m],b=0;b<=_;b++){var O=x+b/_*w,V=n.Vector2.fromAngleRadians(O).times(g).plus(m);P.push(V)}s.push(i.fromPoints(P))}}}return r.subtract(s)}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o={axes:[!0,!0,!0],center:[0,0,0]};e.centerHelper=function(t,e){e=Array.isArray(e)?e:[e];var r=t=n(n({},o),t),i=r.axes,s=r.center,a=s[0],u=s[1],l=s[2],c=e.map((function(t){var e=t.getBounds(),r=[0,0,0];return i[0]&&(r[0]=a-(e[0].x+(e[1].x-e[0].x)/2)),i[1]&&(r[1]=u-(e[0].y+(e[1].y-e[0].y)/2)),i[2]&&(r[2]=l-(e[0].z+(e[1].z-e[0].z)/2)),t.translate(r)}));return 1===c.length?c[0]:c}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(70)),n(r(71)),n(r(15)),n(r(14))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(6);e.extrudeInOrthonormalBasis=function(t,e,r,i){if(!(e instanceof n.OrthoNormalBasis))throw new Error("extrudeInPlane: the first parameter should be a OrthoNormalBasis");var s=t.extrude({offset:[0,0,r]});o.parseOptionAsBool(i,"symmetrical",!1)&&(s=s.translate([0,0,-r/2]));var a=e.getInverseProjectionMatrix();return s=s.transform(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(104),o=r(3),i=r(8);e.hull=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=[],s=t;s[0].length&&(s=s[0]);for(var a={},u=0;u<s.length;u++){var l=s[u];if(!i.isCAG(l))throw new Error("ERROR: hull() accepts only 2D forms / CAG");for(var c=0;c<l.sides.length;c++){var p=l.sides[c].vertex0.pos.x,f=l.sides[c].vertex0.pos.y;a[p+","+f]||(r.push({x:p,y:f}),a[p+","+f]++)}}var h=new n.ConvexHull;h.compute(r);var d=h.getIndices();if(d&&d.length>0){var v=[];for(u=0;u<d.length;u++)v.push(r[d[u]]);return o.fromPoints(v)}}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(33),i=r(7),s={r:1,fn:5},a=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],u=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],l=function(t,e,r){for(var n=1-r,o=[],i=0;i<3;i++)o[i]=t[i]*n+e[i]*r;return o},c=function(t,e,r){for(var n=t[0],o=t[1],i=t[2],s=r,a=[],u=[],c=0;c<e;c++)for(var p=0;p<e-c;p++){var f=c/e,h=(c+1)/e,d=p/(e-c),v=(p+1)/(e-c),y=e-c-1?p/(e-c-1):1,g=[];g[0]=l(l(n,o,d),i,f),g[1]=l(l(n,o,v),i,f),g[2]=l(l(n,o,y),i,h);for(var m=0;m<3;m++)for(var x=Math.sqrt(g[m][0]*g[m][0]+g[m][1]*g[m][1]+g[m][2]*g[m][2]),w=0;w<3;w++)g[m][w]/=x;if(a.push(g[0],g[1],g[2]),u.push([s,s+1,s+2]),s+=3,p<e-c-1){var _=e-c-1?(p+1)/(e-c-1):1;g[0]=l(l(n,o,v),i,f),g[1]=l(l(n,o,_),i,h),g[2]=l(l(n,o,y),i,h);for(m=0;m<3;m++)for(x=Math.sqrt(g[m][0]*g[m][0]+g[m][1]*g[m][1]+g[m][2]*g[m][2]),w=0;w<3;w++)g[m][w]/=x;a.push(g[0],g[1],g[2]),u.push([s,s+1,s+2]),s+=3}}return{points:a,triangles:u,offset:s}};e.geodesicSphere=function(t){for(var e=n(n({},s),t),r=e.r,l=e.fn,p=Math.max(1,Math.floor(l/6)),f=[],h=[],d=0,v=0;v<u.length;v++){var y=c([a[u[v][0]],a[u[v][1]],a[u[v][2]]],p,d);f=f.concat(y.points),h=h.concat(y.triangles),d=y.offset}return i.scale(r,o.polyhedron({points:f,triangles:h}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(2);e.polyhedron=function(t){for(var e=[],r=t.triangles||t.polygons,i=t.colors||null,s=0;s<r.length;s++){for(var a=[],u=0;u<r[s].length;u++)a[u]=t.points[r[s][u]];var l=[];for(u=r[s].length-1;u>=0;u--)l.push(new n.Vertex3(new n.Vector3(a[u][0],a[u][1],a[u][2])));var c=n.Polygon3.defaultShared;i&&i[s]&&(c=n.Polygon3.Shared.fromColor(i[s])),e.push(new n.Polygon3(l,c))}return o.fromPolygons(e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(112);e.css2rgb=function(t){var e=n.cssColors3ub[t.toLowerCase()]||[0,0,0];return[e[0]/255,e[1]/255,e[2]/255]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hue2rgb=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o={x:0,y:0};e.translateLine=function(t,e){for(var r=n(n({},o),t),i=r.x,s=r.y,a=e.segments,u=0,l=a.length;u<l;u++)for(var c=a[u],p=0,f=c.length;p<f;p++){var h=c[p];c[p]=[h[0]+i,h[1]+s]}return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(19),o=r(18),i=r(36);e.vectorText=function(t,e){void 0===e&&(e="?");for(var r=n.vectorParams(t,e),s=r.xOffset,a=r.yOffset,u=r.input,l=r.font,c=r.height,p=r.align,f=r.extrudeOffset,h=r.lineSpacing,d=r.letterSpacing,v=[s,a],y=v[0],g=v[1],m={width:0,segments:[]},x=[],w=[],_=0,P=y,b=function(){x.push(m),_=Math.max(_,m.width),m={width:0,segments:[]}},O=0,V=u.length;O<V;O++){var M=u[O],C=o.vectorChar({xOffset:y,yOffset:g,font:l,height:c,extrudeOffset:f},M);if("\n"!==M){var A=C.width*d;m.width+=A,y+=A," "!==M&&(m.segments=m.segments.concat(C.segments))}else y=P,g-=C.height*h,b()}for(m.segments.length&&b(),O=0,V=x.length;O<V;O++){if(m=x[O],_>m.width){var S=_-m.width;"right"===p?m=i.translateLine({x:S},m):"center"===p&&(m=i.translateLine({x:S/2},m))}w=w.concat(m.segments)}return w}},function(t,e,r){t.exports=r(39)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(20);e.color=r(110),e.primitives2d={circle:n.circle,square:n.square,polygon:n.polygon,triangle:n.triangle},e.primitives3d={cube:n.cube,sphere:n.sphere,geodesicSphere:n.geodesicSphere,cylinder:n.cylinder,torus:n.torus,polyhedron:n.polyhedron},e.booleanOps=r(12),e.transformations=r(7),e.extrusions=r(17),e.maths=r(119),e.text=r(120);var o=r(9);e.CSG=o.CSG;var i=r(4);e.CAG=i.CAG;var s=r(16);e.isCSG=s.isCSG;var a=r(8);e.isCAG=a.isCAG,e.version={build:"0.8.0",date:"2020-05-11T08:55:25.544Z",stamp:1589187325}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var i=r(4),s={center:!1,size:[1,1]};e.square=function(t){var e=n(n({},s),"number"==typeof t?{size:[t,t]}:Array.isArray(t)?{size:o(t)}:t),r=e.center,a=e.size,u="number"==typeof a?[a/2,a/2]:[a[0]/2,a[1]/2],l=u[0],c=u[1],p=r?[0,0]:[l,c];return i.CAG.rectangle({center:p,radius:[l,c]})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calcInterpolationFactor=function(t,e,r){return t.distanceTo(r)/t.distanceTo(e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(11);e.linesIntersect=function(t,e,r,i){if(e.equals(r)||i.equals(t)){if(i.minus(r).unit().plus(e.minus(t).unit()).length()<n.EPS)return!0}else{var s=e.minus(t),a=i.minus(r);if(Math.abs(s.cross(a))<1e-9)return!1;var u=o.solve2Linear(-s.x,a.x,-s.y,a.y,t.x-r.x,t.y-r.y);if(u[0]>1e-6&&u[0]<.999999&&u[1]>1e-5&&u[1]<.999999)return!0}return!1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.fromPoints=function(t,e,r){var o=[];return t.map((function(t){var e=new n.Vector3(t),r=new n.Vertex3(e);o.push(r)})),r?new n.Polygon3(o,e,r):new n.Polygon3(o,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=function(){function t(t){if(null!=t&&4!==t.length)throw new Error("Expecting 4 element array");this.color=t}return t.fromObject=function(e){return new t(e.color)},t.fromColor=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(1===r.length)e=r[0].slice();else{e=[];for(var o=0;o<r.length;o++)e.push(r[o])}if(3===e.length)e.push(1);else if(4!==e.length)throw new Error("setColor expects either an array with 3 or 4 elements, or 3 or 4 parameters.");return new t(e)},t.prototype.getTag=function(){var t=this.tag;return t||(t=n.getTag(),this.tag=t),t},t.prototype.getHash=function(){return this.color?this.color.join("/"):"null"},t}();e.PolygonShared=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3);e.Polygon2D=function(t){return n.fromPoints(t)}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(8);e.union=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,i={extrude2d:!1},s=n({},i),a=0,u=t;u[0].length&&(u=u[0]),"extrude2d"in u[0]&&(s=Object.assign({},i,u[0]),r=u[a++]),r=u[a++],"object"==typeof u[a]&&o.isCAG(u[a])&&s.extrude2d&&(r=u[a].extrude({offset:[0,0,.1]}));for(;a<u.length;a++){var l=u[a];"object"==typeof u[a]&&o.isCAG(u[a])&&s.extrude2d&&(l=u[a].extrude({offset:[0,0,.1]})),r=r.union(l)}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8);e.difference=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=0,i=e;for(i[0].length&&(i=i[0]),t=i[o++];o<i.length;o++)t=n.isCAG(i[o])?t.subtract(i[o]):t.subtract(i[o].setColor(1,1,0));return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(8);e.intersection=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=0,i=e;for(i[0].length&&(i=i[0]),t=i[o++];o<i.length;o++)t=n.isCAG(i[o])?t.intersect(i[o]):t.intersect(i[o].setColor(1,1,0));return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=function(){function t(){}return t.prototype.mirrored=function(t){return this.transform(n.Matrix4x4.mirroring(t))},t.prototype.mirroredX=function(){var t=new n.Plane(n.Vector3.Create(1,0,0),0);return this.mirrored(t)},t.prototype.mirroredY=function(){var t=new n.Plane(n.Vector3.Create(0,1,0),0);return this.mirrored(t)},t.prototype.mirroredZ=function(){var t=new n.Plane(n.Vector3.Create(0,0,1),0);return this.mirrored(t)},t.prototype.translate=function(t){return this.transform(n.Matrix4x4.translation(t))},t.prototype.scale=function(t){return this.transform(n.Matrix4x4.scaling(t))},t.prototype.rotateX=function(t){return this.transform(n.Matrix4x4.rotationX(t))},t.prototype.rotateY=function(t){return this.transform(n.Matrix4x4.rotationY(t))},t.prototype.rotateZ=function(t){return this.transform(n.Matrix4x4.rotationZ(t))},t.prototype.rotate=function(t,e,r){return this.transform(n.Matrix4x4.rotation(t,e,r))},t.prototype.rotateEulerAngles=function(t,e,r,o){o=o||[0,0,0];var i=n.Matrix4x4.rotationZ(t),s=n.Matrix4x4.rotationX(e),a=n.Matrix4x4.rotationZ(r),u=n.Matrix4x4.translation(new n.Vector3(o));return this.transform(a.multiply(s).multiply(i).multiply(u))},t.prototype.rotateEulerXYZ=function(t,e,r,o){o=o||[0,0,0];var i=n.Matrix4x4.rotationX(t),s=n.Matrix4x4.rotationY(e),a=n.Matrix4x4.rotationZ(r),u=n.Matrix4x4.translation(new n.Vector3(o));return this.transform(a.multiply(s).multiply(i).multiply(u))},t}();e.TransformationMethods=o},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(11),s=r(0),a=function(t){function e(e,r){var n=t.call(this)||this,o=new s.Vector2(e);r="string"==typeof r?parseFloat(r):r;var i=o.length();return r*=i,o=o.times(1/i),n.normal=o,n.w=r,n}return o(e,t),e.fromPoints=function(t,r){var n=new s.Vector2(t),o=new s.Vector2(r).minus(n).normal().negated().unit();return new e(o,n.dot(o))},e.prototype.reverse=function(){return new e(this.normal.negated(),-this.w)},e.prototype.equals=function(t){return t.normal.equals(this.normal)&&t.w===this.w},e.prototype.origin=function(){return this.normal.times(this.w)},e.prototype.direction=function(){return this.normal.normal()},e.prototype.xAtY=function(t){return(this.w-this.normal._y*t)/this.normal.x},e.prototype.absDistanceToPoint=function(t){var e=(t=new s.Vector2(t)).dot(this.normal);return Math.abs(e-this.w)},e.prototype.intersectWithLine=function(t){var e=i.solve2Linear(this.normal.x,this.normal.y,t.normal.x,t.normal.y,this.w,t.w);return new s.Vector2(e)},e.prototype.transform=function(t){var r=new s.Vector2(0,0),n=this.normal.times(this.w),o=r.multiply4x4(t),i=this.normal.multiply4x4(t).minus(o),a=n.multiply4x4(t),u=i.dot(a);return new e(i,u)},e}(s.TransformationMethods);e.Line2D=a},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),s=r(11),a=r(0),u=function(t){function e(e,r){var n=t.call(this)||this;return n.point=new a.Vector3(e),n.direction=new a.Vector3(r).unit(),n}return o(e,t),e.fromPoints=function(t,r){var n=new a.Vector3(t);return new e(n,new a.Vector3(r).minus(n))},e.fromPlanes=function(t,r){var n=t.normal.cross(r.normal),o=n.length();if(o<i.EPS)throw new Error("Parallel planes");n=n.times(1/o);var u,l=Math.abs(n.x),c=Math.abs(n.y),p=Math.abs(n.z);if(l>=c&&l>=p){var f=s.solve2Linear(t.normal.y,t.normal.z,r.normal.y,r.normal.z,t.w,r.w);u=new a.Vector3(0,f[0],f[1])}else if(c>=l&&c>=p){f=s.solve2Linear(t.normal.x,t.normal.z,r.normal.x,r.normal.z,t.w,r.w);u=new a.Vector3(f[0],0,f[1])}else{f=s.solve2Linear(t.normal.x,t.normal.y,r.normal.x,r.normal.y,t.w,r.w);u=new a.Vector3(f[0],f[1],0)}return new e(u,n)},e.prototype.intersectWithPlane=function(t){var e=(t.w-t.normal.dot(this.point))/t.normal.dot(this.direction);return this.point.plus(this.direction.times(e))},e.prototype.clone=function(){return new e(this.point.clone(),this.direction.clone())},e.prototype.reverse=function(){return new e(this.point.clone(),this.direction.negated())},e.prototype.transform=function(t){var r=this.point.multiply4x4(t);return new e(r,this.point.plus(this.direction).multiply4x4(t).minus(r))},e.prototype.closestPointOnLine=function(t){var e=new a.Vector3(t).minus(this.point).dot(this.direction)/this.direction.dot(this.direction);return this.point.plus(this.direction.times(e))},e.prototype.distanceToPoint=function(t){var e=new a.Vector3(t),r=this.closestPointOnLine(e);return e.minus(r).length()},e.prototype.equals=function(t){return!!this.direction.equals(t.direction)&&!(this.distanceToPoint(t.point)>i.EPS)},e}(a.TransformationMethods);e.Line3D=u},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=function(){function t(t){void 0===t&&(t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.elements=t}return t.unity=function(){return new t},t.rotationX=function(e){var r=e*Math.PI*(1/180),n=Math.cos(r),o=Math.sin(r);return new t([1,0,0,0,0,n,o,0,0,-o,n,0,0,0,0,1])},t.rotationY=function(e){var r=e*Math.PI*(1/180),n=Math.cos(r),o=Math.sin(r);return new t([n,0,-o,0,0,1,0,0,o,0,n,0,0,0,0,1])},t.rotationZ=function(e){var r=e*Math.PI*(1/180),n=Math.cos(r),o=Math.sin(r);return new t([n,o,0,0,-o,n,0,0,0,0,1,0,0,0,0,1])},t.rotation=function(e,r,n){var i=new o.Vector3(e),s=new o.Vector3(r),a=o.Plane.fromNormalAndPoint(s,i),u=new o.OrthoNormalBasis(a),l=t.translation(i.negated());return l=(l=(l=(l=l.multiply(u.getProjectionMatrix())).multiply(t.rotationZ(n))).multiply(u.getInverseProjectionMatrix())).multiply(t.translation(i))},t.translation=function(e){var r=new o.Vector3(e);return new t([1,0,0,0,0,1,0,0,0,0,1,0,r.x,r.y,r.z,1])},t.mirroring=function(e){var r=e.normal.x,n=e.normal.y,o=e.normal.z,i=e.w;return new t([1-2*r*r,-2*n*r,-2*o*r,0,-2*r*n,1-2*n*n,-2*o*n,0,-2*r*o,-2*n*o,1-2*o*o,0,2*r*i,2*n*i,2*o*i,1])},t.scaling=function(e){var r=new o.Vector3(e);return new t([r.x,0,0,0,0,r.y,0,0,0,0,r.z,0,0,0,0,1])},t.prototype.plus=function(e){for(var r=[],n=0;n<16;n++)r[n]=this.elements[n]+e.elements[n];return new t(r)},t.prototype.minus=function(e){for(var r=[],n=0;n<16;n++)r[n]=this.elements[n]-e.elements[n];return new t(r)},t.prototype.multiply=function(e){var r=this.elements[0],n=this.elements[1],o=this.elements[2],i=this.elements[3],s=this.elements[4],a=this.elements[5],u=this.elements[6],l=this.elements[7],c=this.elements[8],p=this.elements[9],f=this.elements[10],h=this.elements[11],d=this.elements[12],v=this.elements[13],y=this.elements[14],g=this.elements[15],m=e.elements[0],x=e.elements[1],w=e.elements[2],_=e.elements[3],P=e.elements[4],b=e.elements[5],O=e.elements[6],V=e.elements[7],M=e.elements[8],C=e.elements[9],A=e.elements[10],S=e.elements[11],j=e.elements[12],T=e.elements[13],E=e.elements[14],z=e.elements[15],D=[];return D[0]=r*m+n*P+o*M+i*j,D[1]=r*x+n*b+o*C+i*T,D[2]=r*w+n*O+o*A+i*E,D[3]=r*_+n*V+o*S+i*z,D[4]=s*m+a*P+u*M+l*j,D[5]=s*x+a*b+u*C+l*T,D[6]=s*w+a*O+u*A+l*E,D[7]=s*_+a*V+u*S+l*z,D[8]=c*m+p*P+f*M+h*j,D[9]=c*x+p*b+f*C+h*T,D[10]=c*w+p*O+f*A+h*E,D[11]=c*_+p*V+f*S+h*z,D[12]=d*m+v*P+y*M+g*j,D[13]=d*x+v*b+y*C+g*T,D[14]=d*w+v*O+y*A+g*E,D[15]=d*_+v*V+y*S+g*z,new t(D)},t.prototype.clone=function(){return new t(n(this.elements))},t.prototype.rightMultiply1x3Vector=function(t){var e=t._x,r=t._y,n=t._z,i=e*this.elements[0]+r*this.elements[1]+n*this.elements[2]+1*this.elements[3],s=e*this.elements[4]+r*this.elements[5]+n*this.elements[6]+1*this.elements[7],a=e*this.elements[8]+r*this.elements[9]+n*this.elements[10]+1*this.elements[11],u=e*this.elements[12]+r*this.elements[13]+n*this.elements[14]+1*this.elements[15];if(1!==u){var l=1/u;i*=l,s*=l,a*=l}return new o.Vector3(i,s,a)},t.prototype.leftMultiply1x3Vector=function(t){var e=t._x,r=t._y,n=t._z,i=e*this.elements[0]+r*this.elements[4]+n*this.elements[8]+1*this.elements[12],s=e*this.elements[1]+r*this.elements[5]+n*this.elements[9]+1*this.elements[13],a=e*this.elements[2]+r*this.elements[6]+n*this.elements[10]+1*this.elements[14],u=e*this.elements[3]+r*this.elements[7]+n*this.elements[11]+1*this.elements[15];if(1!==u){var l=1/u;i*=l,s*=l,a*=l}return new o.Vector3(i,s,a)},t.prototype.rightMultiply1x2Vector=function(t){var e=t.x,r=t.y,n=e*this.elements[0]+r*this.elements[1]+0*this.elements[2]+1*this.elements[3],i=e*this.elements[4]+r*this.elements[5]+0*this.elements[6]+1*this.elements[7],s=(this.elements[8],this.elements[9],this.elements[10],this.elements[11],e*this.elements[12]+r*this.elements[13]+0*this.elements[14]+1*this.elements[15]);if(1!==s){var a=1/s;n*=a,i*=a,a}return new o.Vector2(n,i)},t.prototype.leftMultiply1x2Vector=function(t){var e=t.x,r=t.y,n=e*this.elements[0]+r*this.elements[4]+0*this.elements[8]+1*this.elements[12],i=e*this.elements[1]+r*this.elements[5]+0*this.elements[9]+1*this.elements[13],s=(this.elements[2],this.elements[6],this.elements[10],this.elements[14],e*this.elements[3]+r*this.elements[7]+0*this.elements[11]+1*this.elements[15]);if(1!==s){var a=1/s;n*=a,i*=a,a}return new o.Vector2(n,i)},t.prototype.isMirroring=function(){var t=new o.Vector3(this.elements[0],this.elements[4],this.elements[8]),e=new o.Vector3(this.elements[1],this.elements[5],this.elements[9]),r=new o.Vector3(this.elements[2],this.elements[6],this.elements[10]);return t.cross(e).dot(r)<0},t}();e.Matrix4x4=i},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),s=function(t){function e(e,r){var n=t.call(this)||this,o=void 0!==r?new i.Vector3(r):e.normal.randomNonParallelVector();return n.v=e.normal.cross(o).unit(),n.u=n.v.cross(e.normal),n.plane=e,n.planeorigin=e.normal.times(e.w),n}return o(e,t),e.GetCartesian=function(t,r){var n,o,s=t+"/"+r;if("X/Y"===s)n=[0,0,1],o=[1,0,0];else if("Y/-X"===s)n=[0,0,1],o=[0,1,0];else if("-X/-Y"===s)n=[0,0,1],o=[-1,0,0];else if("-Y/X"===s)n=[0,0,1],o=[0,-1,0];else if("-X/Y"===s)n=[0,0,-1],o=[-1,0,0];else if("-Y/-X"===s)n=[0,0,-1],o=[0,-1,0];else if("X/-Y"===s)n=[0,0,-1],o=[1,0,0];else if("Y/X"===s)n=[0,0,-1],o=[0,1,0];else if("X/Z"===s)n=[0,-1,0],o=[1,0,0];else if("Z/-X"===s)n=[0,-1,0],o=[0,0,1];else if("-X/-Z"===s)n=[0,-1,0],o=[-1,0,0];else if("-Z/X"===s)n=[0,-1,0],o=[0,0,-1];else if("-X/Z"===s)n=[0,1,0],o=[-1,0,0];else if("-Z/-X"===s)n=[0,1,0],o=[0,0,-1];else if("X/-Z"===s)n=[0,1,0],o=[1,0,0];else if("Z/X"===s)n=[0,1,0],o=[0,0,1];else if("Y/Z"===s)n=[1,0,0],o=[0,1,0];else if("Z/-Y"===s)n=[1,0,0],o=[0,0,1];else if("-Y/-Z"===s)n=[1,0,0],o=[0,-1,0];else if("-Z/Y"===s)n=[1,0,0],o=[0,0,-1];else if("-Y/Z"===s)n=[-1,0,0],o=[0,-1,0];else if("-Z/-Y"===s)n=[-1,0,0],o=[0,0,-1];else if("Y/-Z"===s)n=[-1,0,0],o=[0,1,0];else{if("Z/Y"!==s)throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");n=[-1,0,0],o=[0,0,1]}return new e(new i.Plane(new i.Vector3(n),0),new i.Vector3(o))},e.Z0Plane=function(){return new e(new i.Plane(new i.Vector3([0,0,1]),0),new i.Vector3([1,0,0]))},e.prototype.getProjectionMatrix=function(){return new i.Matrix4x4([this.u.x,this.v.x,this.plane.normal.x,0,this.u.y,this.v.y,this.plane.normal.y,0,this.u.z,this.v.z,this.plane.normal.z,0,0,0,-this.plane.w,1])},e.prototype.getInverseProjectionMatrix=function(){var t=this.plane.normal.times(this.plane.w);return new i.Matrix4x4([this.u.x,this.u.y,this.u.z,0,this.v.x,this.v.y,this.v.z,0,this.plane.normal.x,this.plane.normal.y,this.plane.normal.z,0,t.x,t.y,t.z,1])},e.prototype.to2D=function(t){return new i.Vector2(t.dot(this.u),t.dot(this.v))},e.prototype.to3D=function(t){return this.planeorigin.plus(this.u.times(t.x)).plus(this.v.times(t.y))},e.prototype.line3Dto2D=function(t){var e=t.point,r=t.direction.plus(e),n=this.to2D(e),o=this.to2D(r);return i.Line2D.fromPoints(n,o)},e.prototype.line2Dto3D=function(t){var e=t.origin(),r=t.direction().plus(e),n=this.to3D(e),o=this.to3D(r);return i.Line3D.fromPoints(n,o)},e.prototype.transform=function(t){var r=this.plane.transform(t),n=this.u.transform(t),o=new i.Vector3(0,0,0).transform(t);return new e(r,n.minus(o))},e}(i.TransformationMethods);e.OrthoNormalBasis=s},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),s=r(6),a=r(4),u=r(0),l=function(t){function e(e,r){void 0===r&&(r=!1);var n=t.call(this)||this;n.points=[],n.closed=!1,e=e||[];var o=null;(r=!!r)&&e.length>0&&(o=new u.Vector2(e[e.length-1]));var s=[];return e.forEach((function(t){var e=new u.Vector2(t),r=!1;null!==o&&(r=e.distanceTo(o)<i.EPS);r||s.push(e),o=e})),n.points=s,n.closed=r,n}return o(e,t),e.arc=function(t){void 0===t&&(t={});for(var r=s.parseOptionAs2DVector(t,"center",0),n=s.parseOptionAsFloat(t,"radius",1),o=s.parseOptionAsFloat(t,"startangle",0),a=s.parseOptionAsFloat(t,"endangle",360),l=s.parseOptionAsInt(t,"resolution",i.defaultResolution2D),c=s.parseOptionAsBool(t,"maketangent",!1);a-o>=720;)a-=360;for(;a-o<=-720;)a+=360;var p,f=[],h=Math.abs(a-o);if(h<i.angleEPS)p=u.Vector2.fromAngle(o/180*Math.PI).times(n),f.push(p.plus(r));else{var d=Math.floor(l*h/360)+1,v=.5*d/h;v>.25&&(v=.25);for(var y=c?d+2:d,g=0;g<=y;g++){var m=g;c&&((m=(g-1)*(d-2*v)/d+v)<0&&(m=0),m>d&&(m=d));var x=o+m*(a-o)/d;p=u.Vector2.fromAngle(x/180*Math.PI).times(n),f.push(p.plus(r))}}return new e(f,!1)},e.prototype.concat=function(t){if(this.closed||t.closed)throw new Error("Paths must not be closed");return new e(this.points.concat(t.points))},e.prototype.getPoints=function(){return this.points},e.prototype.appendPoint=function(t){if(this.closed)throw new Error("Path must not be closed");return t=new u.Vector2(t),new e(this.points.concat([t]))},e.prototype.appendPoints=function(t){if(this.closed)throw new Error("Path must not be closed");var r=this.points;return t.forEach((function(t){r.push(new u.Vector2(t))})),new e(r)},e.prototype.close=function(){return new e(this.points,!0)},e.prototype.isClosed=function(){return this.closed},e.prototype.getTurn=function(){for(var t=this.points,e=0,r=t.length-1,n=0;n<t.length;r=n++)e+=t[r].x*t[n].y-t[r].y*t[n].x;return e>0?"clockwise":e<0?"counter-clockwise":"straight"},e.prototype.rectangularExtrude=function(t,e,r){return this.expandToCAG(t/2,r).extrude({offset:[0,0,e]})},e.prototype.expandToCAG=function(t,e){var r,n=[],o=this.points.length,i=0;this.closed&&o>2&&(i=-1);for(var s=i;s<o;s++){var l=s;l<0&&(l=o-1);var c=this.points[l],p=new u.Vertex2(c);if(r&&s>i){var f=new u.Side(r,p);n.push(f)}r=p}return a.CAG.fromSides(n).expandedShell(t,e)},e.prototype.innerToCAG=function(){if(!this.closed)throw new Error("The path should be closed!");return a.CAG.fromPoints(this.points)},e.prototype.transform=function(t){return new e(this.points.map((function(e){return e.multiply4x4(t)})),this.closed)},e.prototype.appendBezier=function(t,r){if(arguments.length<2&&(r={}),this.closed)throw new Error("Path must not be closed");if(!(t instanceof Array))throw new Error("appendBezier: should pass an array of control points");if(t.length<1)throw new Error("appendBezier: need at least 1 control point");if(this.points.length<1)throw new Error("appendBezier: path must already contain a point (the endpoint of the path is used as the starting point for the bezier curve)");var n=s.parseOptionAsInt(r,"resolution",i.defaultResolution2D);n<4&&(n=4);var o=[],a=[];a.push(this.points[this.points.length-1]);for(var l=0;l<t.length;++l){var c=t[l];if(null===c){if(0!==l)throw new Error("appendBezier: null can only be passed as the first control point");if(t.length<2)throw new Error("appendBezier: null can only be passed if there is at least one more control point");var p=void 0;if(this.lastBezierControlPoint)p=this.lastBezierControlPoint;else{if(this.points.length<2)throw new Error("appendBezier: null is passed as a control point but this requires a previous bezier curve or at least two points in the existing path");p=this.points[this.points.length-2]}c=this.points[this.points.length-1].times(2).minus(p)}else c=new u.Vector2(c);a.push(c)}var f=a.length-1,h=1;for(l=0;l<=f;++l)l>0&&(h*=l),o.push(h);var d=[];for(l=0;l<=f;++l){var v=o[f]/(o[l]*o[f-l]);d.push(v)}var y=function(t){for(var e=1,r=Math.pow(1-t,f),n=1!==t?1/(1-t):1,o=new u.Vector2(0,0),i=0;i<=f;++i){i===f&&(r=1);var s=d[i]*e*r;o=o.plus(a[i].times(s)),e*=t,r*=n}return o},g=[],m=[],x=f+1;for(l=0;l<x;++l){var w=l/(x-1),_=y(w);g.push(_),m.push(w)}for(var P=1,b=2*Math.PI/n,O=Math.sin(b);P<g.length-1;){var V=g[P].minus(g[P-1]).unit(),M=g[P+1].minus(g[P]).unit(),C=V.cross(M);if(Math.abs(C)>O){var A=m[P-1],S=m[P+1],j=A+1*(S-A)/3,T=A+2*(S-A)/3,E=y(j),z=y(T);g.splice(P,1,E,z),m.splice(P,1,j,T),--P<1&&(P=1)}else++P}var D=new e(g=this.points.concat(g.slice(1)));return D.lastBezierControlPoint=a[a.length-2],D},e.prototype.appendArc=function(t,r){var n=1e5;if(arguments.length<2&&(r={}),this.closed)throw new Error("Path must not be closed");if(this.points.length<1)throw new Error("appendArc: path must already contain a point (the endpoint of the path is used as the starting point for the arc)");var o,a,l=s.parseOptionAsInt(r,"resolution",i.defaultResolution2D);if(l<4&&(l=4),"xradius"in r||"yradius"in r){if("radius"in r)throw new Error("Should either give an xradius and yradius parameter, or a radius parameter");o=s.parseOptionAsFloat(r,"xradius",0),a=s.parseOptionAsFloat(r,"yradius",0)}else a=o=s.parseOptionAsFloat(r,"radius",0);var c=s.parseOptionAsFloat(r,"xaxisrotation",0),p=s.parseOptionAsBool(r,"clockwise",!1),f=s.parseOptionAsBool(r,"large",!1),h=this.points[this.points.length-1],d=new u.Vector2(t);o=Math.round(o*n)/n,a=Math.round(a*n)/n,d=new u.Vector2(Math.round(d.x*n)/n,Math.round(d.y*n)/n);var v=!p,y=[];if(0===o||0===a)y.push(d);else{o=Math.abs(o),a=Math.abs(a);var g=c*Math.PI/180,m=Math.cos(g),x=Math.sin(g),w=h.minus(d).times(.5),_=Math.round((m*w.x+x*w.y)*n)/n,P=Math.round((-x*w.x+m*w.y)*n)/n,b=new u.Vector2(_,P),O=b.x*b.x/(o*o)+b.y*b.y/(a*a);if(O>1){var V=Math.sqrt(O);o*=V,a*=V,o=Math.round(o*n)/n,a=Math.round(a*n)/n}var M=Math.sqrt((o*o*a*a-o*o*b.y*b.y-a*a*b.x*b.x)/(o*o*b.y*b.y+a*a*b.x*b.x));v===f&&(M=-M);var C=new u.Vector2(o*b.y/a,-a*b.x/o).times(M),A=new u.Vector2(m*C.x-x*C.y,x*C.x+m*C.y).plus(h.plus(d).times(.5)),S=new u.Vector2((b.x-C.x)/o,(b.y-C.y)/a),j=new u.Vector2((-b.x-C.x)/o,(-b.y-C.y)/a),T=S.angleRadians(),E=j.angleRadians(),z=E-T;z%=2*Math.PI,!v&&z>0?z-=2*Math.PI:v&&z<0&&(z+=2*Math.PI);var D=Math.ceil(Math.abs(z)/(2*Math.PI)*l)+1;D<1&&(D=1);for(var k=1;k<=D;k++){var F=T+k/D*z,I=Math.cos(F),B=Math.sin(F),G=new u.Vector2(m*o*I-x*a*B,x*o*I+m*a*B).plus(A);y.push(G)}}var N=new e(y=this.points.concat(y));return N},e}(u.TransformationMethods);e.Path2D=l},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),s=r(0),a=function(t){function e(e,r){var n=t.call(this)||this;return n.normal=e,n.w=r,n}return o(e,t),e.fromObject=function(t){return new e(new s.Vector3(t.normal),("string"==typeof t.w?parseFloat(t.w):t.w)||0)},e.fromVector3Ds=function(t,r,n){var o=r.minus(t).cross(n.minus(t)).unit();return new e(o,o.dot(t))},e.anyPlaneFromVector3Ds=function(t,r,n){var o=r.minus(t),s=n.minus(t);o.length()<i.EPS&&(o=s.randomNonParallelVector()),s.length()<i.EPS&&(s=o.randomNonParallelVector());var a=o.cross(s);return a.length()<i.EPS&&(s=o.randomNonParallelVector(),a=o.cross(s)),new e(a=a.unit(),a.dot(t))},e.fromPoints=function(t,r,n){var o=new s.Vector3(t),i=new s.Vector3(r),a=new s.Vector3(n);return e.fromVector3Ds(o,i,a)},e.fromNormalAndPoint=function(t,r){var n=new s.Vector3(t).unit();return new e(n,new s.Vector3(r).dot(n))},e.prototype.flipped=function(){return new e(this.normal.negated(),-this.w)},e.prototype.getTag=function(){var t=this.tag;return t||(t=i.getTag(),this.tag=t),t},e.prototype.equals=function(t){return this.normal.equals(t.normal)&&this.w===t.w},e.prototype.transform=function(t){var r=t.isMirroring(),n=this.normal.randomNonParallelVector(),o=this.normal.cross(n),i=this.normal.cross(o),s=this.normal.times(this.w),a=s.plus(o),u=s.plus(i);s=s.multiply4x4(t),a=a.multiply4x4(t),u=u.multiply4x4(t);var l=e.fromVector3Ds(s,a,u);return r&&(l=l.flipped()),l},e.prototype.splitLineBetweenPoints=function(t,e){var r=e.minus(t),n=(this.w-this.normal.dot(t))/this.normal.dot(r);return isNaN(n)&&(n=0),n>1&&(n=1),n<0&&(n=0),t.plus(r.times(n))},e.prototype.intersectWithLine=function(t){return t.intersectWithPlane(this)},e.prototype.intersectWithPlane=function(t){return s.Line3D.fromPlanes(this,t)},e.prototype.signedDistanceToPoint=function(t){return this.normal.dot(t)-this.w},e.prototype.toString=function(){return"[normal: "+this.normal.toString()+", w: "+this.w+"]"},e.prototype.mirrorPoint=function(t){var e=this.signedDistanceToPoint(t);return t.minus(this.normal.times(2*e))},e}(s.TransformationMethods);e.Plane=a},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),s=r(4),a=r(57),u=r(2),l=r(3),c=r(0),p=function(t){function e(r,n,o){var s=t.call(this)||this;if(s.vertices=r,s.shared=n||e.defaultShared,s.plane=o||c.Plane.fromVector3Ds(r[0].pos,r[1].pos,r[2].pos),i._CSGDEBUG&&!s.checkIfConvex())throw new Error("Not convex!");return s}return o(e,t),e.fromObject=function(t){var r=t.vertices.map((function(t){return c.Vertex3.fromObject(t)})),n=e.Shared.fromObject(t.shared);return new e(r,n,t.plane?c.Plane.fromObject(t.plane):c.Plane.fromVector3Ds(r[0].pos,r[1].pos,r[2].pos))},e.createFromPoints=function(t,r,n){var o=[];return t.map((function(t){var e=new c.Vector3(t),r=new c.Vertex3(e);o.push(r)})),n?new e(o,r,n):new e(o,r)},e.verticesConvex=function(t,r){var n=t.length;if(n>2)for(var o=t[n-2].pos,i=t[n-1].pos,s=0;s<n;s++){var a=t[s].pos;if(!e.isConvexPoint(o,i,a,r))return!1;o=i,i=a}return!0},e.isConvexPoint=function(t,e,r,n){return e.minus(t).cross(r.minus(e)).dot(n)>=0},e.isStrictlyConvexPoint=function(t,e,r,n){return e.minus(t).cross(r.minus(e)).dot(n)>=i.EPS},e.prototype.checkIfConvex=function(){return e.verticesConvex(this.vertices,this.plane.normal)},e.prototype.setColor=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return this.shared=(t=e.Shared).fromColor.apply(t,r),this},e.prototype.getSignedVolume=function(){for(var t=0,e=0;e<this.vertices.length-2;e++)t+=this.vertices[0].pos.dot(this.vertices[e+1].pos.cross(this.vertices[e+2].pos));return t/=6},e.prototype.getArea=function(){for(var t=0,e=0;e<this.vertices.length-2;e++)t+=this.vertices[e+1].pos.minus(this.vertices[0].pos).cross(this.vertices[e+2].pos.minus(this.vertices[e+1].pos)).length();return t/=2},e.prototype.getTetraFeatures=function(t){var e=this,r=[];return t.forEach((function(t){"volume"===t?r.push(e.getSignedVolume()):"area"===t&&r.push(e.getArea())}),this),r},e.prototype.extrude=function(t){var r=[],n=this;n.plane.normal.dot(t)>0&&(n=n.flipped()),r.push(n);for(var o=n.translate(t),i=this.vertices.length,s=0,a=t.length(),l=0;l<i;l++){var p=[],f=l<i-1?l+1:0,h=s+n.vertices[l].pos.distanceTo(n.vertices[f].pos);p.push(c.Vertex3.fromPosAndUV(n.vertices[l].pos,new c.Vector2(s,0))),p.push(c.Vertex3.fromPosAndUV(o.vertices[l].pos,new c.Vector2(s,a))),p.push(c.Vertex3.fromPosAndUV(o.vertices[f].pos,new c.Vector2(h,a))),p.push(c.Vertex3.fromPosAndUV(n.vertices[f].pos,new c.Vector2(h,0)));var d=new e(p,this.shared);r.push(d),s=h}return o=o.flipped(),r.push(o),u.fromPolygons(r)},e.prototype.translate=function(t){return this.transform(c.Matrix4x4.translation(t))},e.prototype.boundingSphere=function(){if(!this.cachedBoundingSphere){var t=this.boundingBox(),e=t[0].plus(t[1]).times(.5),r=t[1].minus(e).length();this.cachedBoundingSphere=[e,r]}return this.cachedBoundingSphere},e.prototype.boundingBox=function(){if(!this.cachedBoundingBox){var t=void 0,e=void 0,r=this.vertices,n=r.length;e=t=0===n?new c.Vector3(0,0,0):r[0].pos;for(var o=1;o<n;o++){var i=r[o].pos;t=t.min(i),e=e.max(i)}this.cachedBoundingBox=[t,e]}return this.cachedBoundingBox},e.prototype.flipped=function(){var t=this.vertices.map((function(t){return t.flipped()}));t.reverse();var r=this.plane.flipped();return new e(t,this.shared,r)},e.prototype.transform=function(t){var r=this.vertices.map((function(e){return e.transform(t)})),n=this.plane.transform(t);return t.isMirroring()&&r.reverse(),new e(r,this.shared,n)},e.prototype.toString=function(){var t="Polygon plane: "+this.plane.toString()+"\n";return this.vertices.map((function(e){t+="  "+e.toString()+"\n"})),t},e.prototype.projectToOrthoNormalBasis=function(t){var e=this.vertices.map((function(e){return t.to2D(e.pos)})),r=l.fromPointsNoCheck(e),n=r.area();return Math.abs(n)<i.areaEPS?r=new s.CAG:n<0&&(r=r.flipped()),r},e.prototype.solidFromSlices=function(t){return a.solidFromSlices(this,t)},e.defaultShared=new c.PolygonShared(null),e.Shared=c.PolygonShared,e}(c.TransformationMethods);e.Polygon3=p},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(2),i=r(13);e.solidFromSlices=function(t,e){var r,i=[],a=null,u=null,l=null,c=null,p=2,f=!1,h=null;if(e&&(f=Boolean(e.loop),e.numslices&&(p=e.numslices),e.callback&&(r=e.callback)),!r){var d=n.Polygon3.createFromPoints([[0,0,0],[1,0,0],[1,1,0],[0,1,0]]);r=function(t){return 0===t||1===t?d.translate([0,0,t]):null}}for(var v=0,y=p-1;v<=y;v++)if(a=r.call(t,v/y,v)){if(!(a instanceof n.Polygon3))throw new Error("Polygon.solidFromSlices callback error: Polygon expected");a.checkIfConvex(),u?(null===h&&(h=u.plane.signedDistanceToPoint(a.vertices[0].pos)<0),s(i,u,a,h)):l=a,u=a}(c=a,f)?l.vertices.length===c.vertices.length&&l.vertices.every((function(t,e){return t.pos.equals(c.vertices[e].pos)}))||s(i,c,l,Boolean(h)):(i.unshift(h?l:l.flipped()),i.push(h?c.flipped():c));return o.fromPolygons(i)};var s=function(t,e,r,o){var s=e.vertices.slice(0),a=r.vertices.slice(0),u=r.shared||null;s[0].pos.equals(s[s.length-1].pos)||s.push(s[0]),a[0].pos.equals(a[a.length-1].pos)||a.push(a[0]),o&&(s=s.reverse(),a=a.reverse());for(var l,c=a.length-1,p=s.length-1,f=c-p,h=f>0,d=f<0,v=[],y=Math.abs(f);y>0;y--)v.push({len:1/0,index:-1});if(d)for(y=0;y<p;y++){l=s[y].pos.distanceToSquared(s[y+1].pos);for(var g=v.length-1;g>=0;g--)if(v[g].len>l){v[g].len=l,v.index=g;break}}else if(h)for(y=0;y<c;y++){l=a[y].pos.distanceToSquared(a[y+1].pos);for(g=v.length-1;g>=0;g--)if(v[g].len>l){v[g].len=l,v.index=g;break}}v.sort(i.fnSortByIndex);for(var m,x=function(t,e,r,o){return new n.Polygon3([t,e,r],o)},w=s[0],_=a[0],P=0,b=0,O=c+p;P+b<O;){if(v.length){if(h&&b===v[0].index){m=a[++b],t.push(x(m,_,w,u)),_=m,v.shift();continue}if(d&&P===v[0].index){m=s[++P],t.push(x(_,w,m,u)),w=m,v.shift();continue}}(P<p?_.pos.distanceToSquared(s[P+1].pos):1/0)<=(b<c?w.pos.distanceToSquared(a[b+1].pos):1/0)?(m=s[++P],t.push(x(_,w,m,u)),w=m):b<c&&(m=a[++b],t.push(x(m,_,w,u)),_=m)}return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(59),o=r(61),i=function(){function t(t){this.polygonTree=new n.PolygonTreeNode,this.rootnode=new o.Node(null),t&&this.addPolygons(t)}return t.prototype.invert=function(){this.polygonTree.invert(),this.rootnode.invert()},t.prototype.clipTo=function(t,e){e=!!e,this.rootnode.clipTo(t,e)},t.prototype.allPolygons=function(){var t=[];return this.polygonTree.getPolygons(t),t},t.prototype.addPolygons=function(t){var e=this,r=t.map((function(t){return e.polygonTree.addChild(t)}));this.rootnode.addPolygonTreeNodes(r)},t}();e.Tree=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(60),i=function(){function t(){this.parent=null,this.children=[],this.polygon=null,this.removed=!1}return t.prototype.addPolygons=function(t){if(!this.isRootNode())throw new Error("Assertion failed");var e=this;t.map((function(t){e.addChild(t)}))},t.prototype.remove=function(){if(!this.removed){if(this.removed=!0,n._CSGDEBUG){if(this.isRootNode())throw new Error("Assertion failed");if(this.children.length)throw new Error("Assertion failed")}if(this.parent){var t=this.parent.children,e=t.indexOf(this);if(e<0)throw new Error("Assertion failed");t.splice(e,1),this.parent.recursivelyInvalidatePolygon()}}},t.prototype.isRemoved=function(){return this.removed},t.prototype.isRootNode=function(){return!this.parent},t.prototype.invert=function(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()},t.prototype.getPolygon=function(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon},t.prototype.getPolygons=function(t){var e,r,n,o,i=[this],s=[i];for(e=0;e<s.length;++e)for(r=0,n=(i=s[e]).length;r<n;r++)(o=i[r]).polygon?t.push(o.polygon):s.push(o.children)},t.prototype.splitByPlane=function(t,e,r,n,o){if(this.children.length){var i=[this.children],s=void 0,a=void 0,u=void 0,l=void 0,c=void 0;for(s=0;s<i.length;s++)for(a=0,u=(c=i[s]).length;a<u;a++)(l=c[a]).children.length?i.push(l.children):l._splitByPlane(t,e,r,n,o)}else this._splitByPlane(t,e,r,n,o)},t.prototype._splitByPlane=function(t,e,r,i,s){var a=this.polygon;if(a){var u=a.boundingSphere(),l=u[1]+n.EPS,c=t.normal,p=u[0],f=c.dot(p)-t.w;if(f>l)i.push(this);else if(f<-l)s.push(this);else{var h=o.splitPolygonByPlane(t,a);switch(h.type){case 0:e.push(this);break;case 1:r.push(this);break;case 2:i.push(this);break;case 3:s.push(this);break;case 4:if(h.front){var d=this.addChild(h.front);i.push(d)}if(h.back){var v=this.addChild(h.back);s.push(v)}}}}},t.prototype.addChild=function(e){var r=new t;return r.parent=this,r.polygon=e,this.children.push(r),r},t.prototype.invertSub=function(){var t,e,r,n,o=[this],i=[o];for(t=0;t<i.length;t++)for(e=0,r=(o=i[t]).length;e<r;e++)(n=o[e]).polygon&&(n.polygon=n.polygon.flipped()),i.push(n.children)},t.prototype.recursivelyInvalidatePolygon=function(){for(var t=this;t.polygon;)t.polygon=null,t.parent&&(t=t.parent)},t}();e.PolygonTreeNode=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(1);e.splitPolygonByPlane=function(t,e){var r={type:null,front:null,back:null},i=t.normal,s=e.vertices,a=s.length;if(e.plane.equals(t))r.type=0;else{for(var u=t.w,l=!1,c=!1,p=[],f=-o.EPS,h=0;h<a;h++){var d=(C=i.dot(s[h].pos)-u)<0;p.push(d),C>o.EPS&&(l=!0),C<f&&(c=!0)}if(l||c)if(c)if(l){r.type=4;for(var v=[],y=[],g=(d=p[0],0);g<a;g++){var m=s[g],x=g+1;x>=a&&(x=0);var w=p[x];if(d===w)d?y.push(m):v.push(m);else{var _=m.pos,P=s[x].pos,b=n.calcInterpolationFactor(_,P,t.splitLineBetweenPoints(_,P)),O=m.interpolate(s[x],b);d?(y.push(m),y.push(O),v.push(O)):(v.push(m),v.push(O),y.push(O))}d=w}var V=o.EPS*o.EPS;if(y.length>=3){var M=y[y.length-1];for(g=0;g<y.length;g++){(m=y[g]).pos.distanceToSquared(M.pos)<V&&(y.splice(g,1),g--),M=m}}if(v.length>=3)for(M=v[v.length-1],g=0;g<v.length;g++){(m=v[g]).pos.distanceToSquared(M.pos)<V&&(v.splice(g,1),g--),M=m}v.length>=3&&(r.front=new n.Polygon3(v,e.shared,e.plane)),y.length>=3&&(r.back=new n.Polygon3(y,e.shared,e.plane))}else r.type=3;else r.type=2;else{var C=i.dot(e.plane.normal);r.type=C>=0?0:1}}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.parent=t,this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[]}return t.prototype.invert=function(){for(var t,e=[this],r=0;r<e.length;r++){(t=e[r]).plane&&(t.plane=t.plane.flipped()),t.front&&e.push(t.front),t.back&&e.push(t.back);var n=t.front;t.front=t.back,t.back=n}},t.prototype.clipPolygons=function(t,e){var r,n={node:this,polygontreenodes:t},o=[];do{if(r=n.node,t=n.polygontreenodes,r.plane){for(var i=[],s=[],a=e?i:s,u=r.plane,l=t.length,c=0;c<l;c++){var p=t[c];p.isRemoved()||p.splitByPlane(u,a,i,s,i)}r.front&&s.length>0&&o.push({node:r.front,polygontreenodes:s});var f=i.length;if(r.back&&f>0)o.push({node:r.back,polygontreenodes:i});else for(c=0;c<f;c++)i[c].remove()}n=o.pop()}while(void 0!==n)},t.prototype.clipTo=function(t,e){var r=this,n=[];do{r.polygontreenodes.length>0&&t.rootnode.clipPolygons(r.polygontreenodes,e),r.front&&n.push(r.front),r.back&&n.push(r.back),r=n.pop()}while(void 0!==r)},t.prototype.addPolygonTreeNodes=function(e){var r,n={node:this,polygontreenodes:e},o=[];do{if(r=n.node,0!==(e=n.polygontreenodes).length){var i=r;if(!r.plane){var s=e[0].getPolygon().plane;r.plane=s}for(var a=[],u=[],l=0,c=e.length;l<c;++l)e[l].splitByPlane(i.plane,i.polygontreenodes,u,a,u);a.length>0&&(r.front||(r.front=new t(r)),o.push({node:r.front,polygontreenodes:a})),u.length>0&&(r.back||(r.back=new t(r)),o.push({node:r.back,polygontreenodes:u})),n=o.pop()}else n=o.pop()}while(void 0!==n)},t.prototype.getParentPlaneNormals=function(t,e){e>0&&this.parent&&this.parent.plane&&(t.push(this.parent.plane.normal),this.parent.getParentPlaneNormals(t,e-1))},t}();e.Node=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0);function i(t,e,r,n,o,i){var a=n.getTag(),u=o.getTag();if(a===u)throw new Error("Assertion failed");var l=a+"/"+u;if(u+"/"+a in t)return s(t,e,r,o,n,null),null;var c={vertex0:n,vertex1:o,polygonindex:i};return l in t?t[l].push(c):t[l]=[c],a in e?e[a].push(l):e[a]=[l],u in r?r[u].push(l):r[u]=[l],l}function s(t,e,r,n,o,i){var s=n.getTag(),a=o.getTag(),u=s+"/"+a;if(!(u in t))throw new Error("Assertion failed");for(var l=-1,c=t[u],p=0;p<c.length;p++){var f=c[p];if(f.vertex0===n&&(f.vertex1===o&&(null===i||f.polygonindex===i))){l=p;break}}if(l<0)throw new Error("Assertion failed");if(c.splice(l,1),0===c.length&&delete t[u],(l=e[s].indexOf(u))<0)throw new Error("Assertion failed");if(e[s].splice(l,1),0===e[s].length&&delete e[s],(l=r[a].indexOf(u))<0)throw new Error("Assertion failed");r[a].splice(l,1),0===r[a].length&&delete r[a]}e.fixTJunctions=function(t,e){e=e.canonicalized();for(var r={},a=0;a<e.polygons.length;a++){var u=e.polygons[a],l=u.vertices.length;if(l>=3)for(var c=u.vertices[0],p=c.getTag(),f=0;f<l;f++){var h=f+1;h===l&&(h=0);var d=u.vertices[h],v=d.getTag(),y=p+"/"+v,g=v+"/"+p;if(g in r){var m=r[g];m.splice(-1,1),0===m.length&&delete r[g]}else{var x={vertex0:c,vertex1:d,polygonindex:a};y in r?r[y].push(x):r[y]=[x]}c=d,p=v}}var w={},_={},P={},b=!0,O=function(t){b=!1,P[t]=!0,r[t].map((function(e){var r=e.vertex0.getTag(),n=e.vertex1.getTag();r in w?w[r].push(t):w[r]=[t],n in _?_[n].push(t):_[n]=[t]}))};for(var y in r)O(y);if(!b){for(var V=e.polygons.slice(0);;){var M=!0;for(var y in r)M=!1,P[y]=!0;if(M)break;for(var C=!1;;){var A=null;for(var y in P){A=y;break}if(null===A)break;var S=!0;if(A in r){var j=r[A];if(0===j.length)throw new Error("Assertion failed");x=j[0];for(var T=0;T<2;T++){var E=0===T?x.vertex0:x.vertex1,z=0===T?x.vertex1:x.vertex0,D=E.getTag(),k=z.getTag(),F=[];0===T?D in _&&(F=_[D]):D in w&&(F=w[D]);for(var I=function(t){var e=F[t],a=r[e][0],u=0===T?a.vertex0:a.vertex1,l=0===T?a.vertex1:a.vertex0,c=u.getTag();if(l.getTag()!==D)throw new Error("Assertion failed");if(c===k)return s(r,w,_,E,z,null),s(r,w,_,z,E,null),S=!1,T=2,C=!0,"break";var p=E.pos,f=z.pos,h=u.pos.minus(p),d=f.minus(p).dot(h)/h.dot(h);if(d>0&&d<1&&p.plus(h.times(d)).distanceToSquared(f)<n.EPS*n.EPS){for(var v=a.polygonindex,y=V[v],g=a.vertex1.getTag(),m=-1,x=0;x<y.vertices.length;x++)if(y.vertices[x].getTag()===g){m=x;break}if(m<0)throw new Error("Assertion failed");var b=y.vertices.slice(0);b.splice(m,0,z);var O=new o.Polygon3(b,y.shared);if(isNaN(O.plane.w)){var M=!1,A=function(t){O.vertices.forEach((function(e){M||t(e)}))};A((function(t){A((function(e){A((function(r){O.plane=o.Plane.fromPoints(t.pos,e.pos,r.pos),isNaN(O.plane.w)||(M=!0)}))}))}))}V[v]=O,s(r,w,_,a.vertex0,a.vertex1,v);var j=i(r,w,_,a.vertex0,z,v),I=i(r,w,_,z,a.vertex1,v);return null!==j&&(P[j]=!0),null!==I&&(P[I]=!0),S=!1,T=2,C=!0,"break"}},B=0;B<F.length;B++){if("break"===I(B))break}}}S&&delete P[A]}if(!C)break}var G=t(V);G.properties=e.properties,G.isCanonicalized=!0,G.isRetesselated=!0,e=G}return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(25),o=r(1),i=r(0),s=function(){function t(){this.vertexfactory=new n.FuzzyFactory(2,o.EPS)}return t.prototype.getVertex=function(t){var e=[t.pos._x,t.pos._y];return this.vertexfactory.lookupOrCreate(e,(function(e){return t}))},t.prototype.getSide=function(t){var e=this.getVertex(t.vertex0),r=this.getVertex(t.vertex1);return new i.Side(e,r)},t}();e.FuzzyCAGFactory=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(13),s=r(65),a=r(66);e.reTessellateCoplanarPolygons=function(t,e){var r=t.length;if(r>0){for(var u=t[0].plane,l=t[0].shared,c=new o.OrthoNormalBasis(u),p=[],f=[],h=[],d={},v={},y={},g=1/n.EPS*10,m=0;m<r;m++){var x=t[m],w=[],_=[],P=x.vertices.length,b=-1;if(P>0){for(var O=0,V=0,M=0;M<P;M++){var C=c.to2D(x.vertices[M].pos),A=x.vertices[M].uv,S=Math.floor(C.y*g),j=void 0;S in y?j=y[S]:S+1 in y?j=y[S+1]:S-1 in y?j=y[S-1]:(j=C.y,y[S]=C.y),C=o.Vector2.Create(C.x,j),w.push(C),_.push(A);var T=C.y;(0===M||T<O)&&(O=T,b=M),(0===M||T>V)&&(V=T,M),T in v||(v[T]={}),v[T][m]=!0}O>=V?(w=[],_=[],P=0,b=-1):(O in d||(d[O]=[]),d[O].push(m))}w.reverse(),_.reverse(),b=P-b-1,p.push(w),f.push(_),h.push(b)}var E=[];for(var z in v)E.push(z);E.sort(i.fnNumberSort);for(var D=[],k=[],F=function(t){for(var r=[],i=E[t],y=Number(i),g=v[i],m=0;m<D.length;++m){if(g[S=(N=D[m]).polygonindex]){for(var x=p[S],w=f[S],_=x.length,P=N.leftvertexindex,b=N.rightvertexindex;;){if((F=P+1)>=_&&(F=0),x[F].y!==y)break;P=F}if((I=b-1)<0&&(I=_-1),x[I].y===y&&(b=I),P!==N.leftvertexindex&&P===b)D.splice(m,1),--m;else{N.leftvertexindex=P,N.rightvertexindex=b,N.topleft=x[P],N.topleftuv=w[P],N.topright=x[b],N.toprightuv=w[b],(F=P+1)>=_&&(F=0),N.bottomleft=x[F],N.bottomleftuv=w[F];var O=b-1;O<0&&(O=_-1),N.bottomright=x[O],N.bottomrightuv=w[O]}}}var V=void 0;if(t>=E.length-1)D=[],V=null;else{var M=.5*(y+(V=Number(E[t+1]))),C=d[i];for(var A in C){for(var S=C[A],j=(x=p[S],w=f[S],_=x.length,h[S]),T=j;;){if((et=T+1)>=_&&(et=0),x[et].y!==y)break;if(et===j)break;T=et}for(var z=j;;){if((et=z-1)<0&&(et=_-1),x[et].y!==y)break;if(et===T)break;z=et}var F,I;(F=T+1)>=_&&(F=0),(I=z-1)<0&&(I=_-1);var B={polygonindex:S,leftvertexindex:T,rightvertexindex:z,topleft:x[T],topleftuv:w[T],topright:x[z],toprightuv:w[z],bottomleft:x[F],bottomleftuv:w[F],bottomright:x[I],bottomrightuv:w[I]};s.insertSorted(D,B,(function(t,e){var r=a.interpolateBetween2DPointsForY(t.topleft,t.bottomleft,M),n=a.interpolateBetween2DPointsForY(e.topleft,e.bottomleft,M);return r>n?1:r<n?-1:0}))}}for(var G in D){S=(N=D[G]).polygonindex,_=(x=p[S]).length;var N,R=a.interpolateBetween2DPointsForY(N.topleft,N.bottomleft,y),q=o.Vector2.Create(R,y),L=N.topleftuv.lerp(N.bottomleftuv,o.calcInterpolationFactor(N.topleft,N.bottomleft,q));R=a.interpolateBetween2DPointsForY(N.topright,N.bottomright,y);var Z=o.Vector2.Create(R,y),Y=N.toprightuv.lerp(N.bottomrightuv,o.calcInterpolationFactor(N.topright,N.bottomright,Z));R=a.interpolateBetween2DPointsForY(N.topleft,N.bottomleft,V);var U=o.Vector2.Create(R,V),X=N.topleftuv.lerp(N.bottomleftuv,o.calcInterpolationFactor(N.topleft,N.bottomleft,U));R=a.interpolateBetween2DPointsForY(N.topright,N.bottomright,V);var W=o.Vector2.Create(R,V),H={topleft:q,topleftuv:L,topright:Z,toprightuv:Y,bottomleft:U,bottomleftuv:X,bottomright:W,bottomrightuv:N.toprightuv.lerp(N.bottomrightuv,o.calcInterpolationFactor(N.topright,N.bottomright,W)),leftline:o.Line2D.fromPoints(q,U),rightline:o.Line2D.fromPoints(W,Z)};if(r.length>0){var J=r[r.length-1],K=H.topleft.distanceTo(J.topright),Q=H.bottomleft.distanceTo(J.bottomright);K<n.EPS&&Q<n.EPS&&(H.topleft=J.topleft,H.topleftuv=J.topleftuv,H.leftline=J.leftline,H.bottomleft=J.bottomleft,H.bottomleftuv=J.bottomleftuv,r.splice(r.length-1,1))}r.push(H)}if(t>0){for(var $={},tt={},et=0;et<r.length;et++)for(var rt=r[et],nt=0;nt<k.length;nt++)if(!tt[nt]){var ot=k[nt];if(ot.bottomleft.distanceTo(rt.topleft)<n.EPS&&ot.bottomright.distanceTo(rt.topright)<n.EPS){tt[nt]=!0;K=rt.leftline.direction().x-ot.leftline.direction().x,Q=rt.rightline.direction().x-ot.rightline.direction().x;var it=Math.abs(K)<n.EPS,st=Math.abs(Q)<n.EPS;(it||K>=0)&&(st||Q>=0)&&(rt.outpolygon=ot.outpolygon,rt.leftlinecontinues=it,rt.rightlinecontinues=st,$[nt]=!0);break}}var at=function(t){if(!$[t]){var r=k[t];r.outpolygon.rightpoints.push(r.bottomright),r.outpolygon.rightuvcoordinates.push(r.bottomrightuv),r.bottomright.distanceTo(r.bottomleft)>n.EPS&&(r.outpolygon.leftpoints.push(r.bottomleft),r.outpolygon.leftuvcoordinates.push(r.bottomleftuv)),r.outpolygon.leftpoints.reverse(),r.outpolygon.leftuvcoordinates.reverse();var i=r.outpolygon.rightpoints.concat(r.outpolygon.leftpoints),s=r.outpolygon.rightuvcoordinates.concat(r.outpolygon.leftuvcoordinates),a=[];i.map((function(t,e){var r=c.to3D(t),n=o.Vertex3.fromPosAndUV(r,s[e]);a.push(n)}));var p=new o.Polygon3(a,l,u);e.push(p)}};for(nt=0;nt<k.length;nt++)at(nt)}for(et=0;et<r.length;et++){(rt=r[et]).outpolygon?(rt.leftlinecontinues||(rt.outpolygon.leftpoints.push(rt.topleft),rt.outpolygon.leftuvcoordinates.push(rt.topleftuv)),rt.rightlinecontinues||(rt.outpolygon.rightpoints.push(rt.topright),rt.outpolygon.rightuvcoordinates.push(rt.toprightuv))):(rt.outpolygon={leftpoints:[],leftuvcoordinates:[],rightpoints:[],rightuvcoordinates:[]},rt.outpolygon.leftpoints.push(rt.topleft),rt.outpolygon.leftuvcoordinates.push(rt.topleftuv),rt.topleft.distanceTo(rt.topright)>n.EPS&&(rt.outpolygon.rightpoints.push(rt.topright),rt.outpolygon.rightuvcoordinates.push(rt.toprightuv)))}k=r},I=0;I<E.length;I++)F(I)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.insertSorted=function(t,e,r){for(var n=0,o=t.length;o>n;){var i=Math.floor((n+o)/2);r(e,t[i])>0?n=i+1:o=i}t.splice(n,0,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.interpolateBetween2DPointsForY=function(t,e,r){var n,o=r-t.y,i=e.y-t.y;return i<0&&(o=-o,i=-i),n=o<=0?0:o>=i?1:i<1e-10?.5:o/i,t.x+n*(e.x-t.x)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.bounds=function(t){if(!t.cachedBoundingBox){for(var e=new n.Vector3(0,0,0),r=new n.Vector3(0,0,0),o=t.polygons,i=o.length,s=0;s<i;s++){var a=o[s].boundingBox();0===s?(e=a[0],r=a[1]):(e=e.min(a[0]),r=r.max(a[1]))}t.cachedBoundingBox=[e,r]}return t.cachedBoundingBox},e.volume=function(t){var e=t.toTriangles().map((function(t){return t.getTetraFeatures(["volume"])}));return console.log("volume",e),e},e.area=function(t){var e=t.toTriangles().map((function(t){return t.getTetraFeatures(["area"])}));return console.log("area",e),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(4);e.projectToOrthoNormalBasis=function(t,e){var r=[];return t.polygons.filter((function(t){return t.plane.normal.minus(e.plane.normal).lengthSquared()<n.EPS*n.EPS})).map((function(t){var n=t.projectToOrthoNormalBasis(e);n.sides.length>0&&r.push(n)})),(new o.CAG).union(r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(9);e.sectionCut=function(t,e){var r=e.plane,i=e.plane.flipped();r=new o.Plane(r.normal,r.w),i=new o.Plane(i.normal,i.w+5*n.EPS);var s=t.cutByPlane(r);return(s=s.cutByPlane(i)).projectToOrthoNormalBasis(e)},e.cutByPlane=function(t,e){if(0===t.polygons.length)return new i.CSG;var r=e.normal.times(e.w),n=0;t.polygons.map((function(t){t.vertices.map((function(t){var e=t.pos.distanceToSquared(r);e>n&&(n=e)}))})),n=Math.sqrt(n),n*=1.01;var s=[],a=new o.OrthoNormalBasis(e);s.push(o.Vertex3.fromPosAndUV(a.to3D(new o.Vector2(n,-n)),new o.Vector2(n,-n))),s.push(o.Vertex3.fromPosAndUV(a.to3D(new o.Vector2(-n,-n)),new o.Vector2(-n,-n))),s.push(o.Vertex3.fromPosAndUV(a.to3D(new o.Vector2(-n,n)),new o.Vector2(-n,n))),s.push(o.Vertex3.fromPosAndUV(a.to3D(new o.Vector2(n,n)),new o.Vector2(n,n)));var u=new o.Polygon3(s,null,e.flipped()).extrude(e.normal.times(-n)),l=t.intersect(u);return l.properties=t.properties,l}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),o=r(15),i=r(16);e.expand=function(t,e,r){var s;return i.isCSG(t)?(s=(s=t.union(n.expandedShellOfCCSG(t,e,r))).reTesselated()).properties=t.properties:s=t.union(o.expandedShellOfCAG(t,e,r)),s}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),o=r(15),i=r(16);e.contract=function(t,e,r){var s;return i.isCSG(t)?(s=(s=t.subtract(n.expandedShellOfCCSG(t,e,r))).reTesselated()).properties=t.properties:s=t.subtract(o.expandedShellOfCAG(t,e,r)),s}},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),i=r(5),s=r(2),a=function(){function t(t){this.closed=!1,this.connectorsList=n(t)}return t.fromPath2D=function(e,r,n){if(3===arguments.length)return t._fromPath2DTangents(e,r,n);if(2===arguments.length)return t._fromPath2DExplicit(e,r);throw new Error("call with path2D and either 2 direction vectors, or a function returning direction vectors")},t._fromPath2DTangents=function(e,r,n){var o,s=e.points.length,a=new t([new i.Connector(e.points[0],r,t.defaultNormal)]);return e.points.slice(1,s-1).forEach((function(r,n){o=e.points[n+2].minus(e.points[n]).toVector3D(0),a.appendConnector(new i.Connector(r.toVector3D(0),o,t.defaultNormal))}),this),a.appendConnector(new i.Connector(e.points[s-1],n,t.defaultNormal)),a.closed=e.closed,a},t._fromPath2DExplicit=function(e,r){var n=new t(e.points.map((function(e,n){return new i.Connector(e.toVector3D(0),o.Vector3.Create(1,0,0).rotateZ(function(t,e,r){return"function"==typeof t&&(t=t(e,r)),t}(r,e,n)),t.defaultNormal)}),this));return n.closed=e.closed,n},t.prototype.setClosed=function(t){this.closed=!!t},t.prototype.appendConnector=function(t){this.connectorsList.push(t)},t.prototype.followWith=function(t){var e=this;function r(t,e){return"function"==typeof t&&(t=t(e.point,e.axisvector,e.normalvector)),t}this.verify();var n,o=[],i=this.connectorsList[this.connectorsList.length-1],a=r(t,i);return this.connectorsList.forEach((function(s,u){n=r(t,s),u||e.closed?o.push.apply(o,a._toWallPolygons({toConnector1:i,toConnector2:s,cag:n})):o.push.apply(o,n._toPlanePolygons({toConnector:s,flipped:!0})),u!==e.connectorsList.length-1||e.closed||o.push.apply(o,n._toPlanePolygons({toConnector:s})),a=n,i=s})),s.fromPolygons(o).reTesselated().canonicalized()},t.prototype.verify=function(){for(var t,e,r=0;r<this.connectorsList.length-1;r++){if(t=this.connectorsList[r],(e=this.connectorsList[r+1]).point.minus(t.point).dot(t.axisvector)<=0)throw new Error("Invalid ConnectorList. Each connectors position needs to be within a <90deg range of previous connectors axisvector");if(t.axisvector.dot(e.axisvector)<=0)throw new Error("invalid ConnectorList. No neighboring connectors axisvectors may span a >=90deg angle")}},t.defaultNormal=[0,0,1],t}();e.ConnectorList=a},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),s=r(0),a=function(t){function e(e,r){var n=t.call(this)||this;return n.vertex0=e,n.vertex1=r,n}return o(e,t),e.fromObject=function(t){return new e(s.Vertex2.fromObject(t.vertex0),s.Vertex2.fromObject(t.vertex1))},e._fromFakePolygon=function(t){if(t.vertices.length<4)return null;var r=[],n=t.vertices.filter((function(t,e){return t.pos.z>0&&(r.push(e),!0)})).map((function(t){return new s.Vector2(t.pos.x,t.pos.y)}));if(2!==n.length)throw new Error("Assertion failed: _fromFakePolygon: not enough points found");var o=r[1]-r[0];if(1!==o&&3!==o)throw new Error("Assertion failed: _fromFakePolygon: unknown index ordering");return 1===o&&n.reverse(),new e(new s.Vertex2(n[0]),new s.Vertex2(n[1]))},e.prototype.toString=function(){return this.vertex0+" -> "+this.vertex1},e.prototype.toPolygon3D=function(t,e){var r=[new s.Vertex3(this.vertex0.pos.toVector3D(t)),new s.Vertex3(this.vertex1.pos.toVector3D(t)),new s.Vertex3(this.vertex1.pos.toVector3D(e)),new s.Vertex3(this.vertex0.pos.toVector3D(e))];return new s.Polygon3(r)},e.prototype.transform=function(t){var r=this.vertex0.pos.transform(t),n=this.vertex1.pos.transform(t);return new e(new s.Vertex2(r),new s.Vertex2(n))},e.prototype.flipped=function(){return new e(this.vertex1,this.vertex0)},e.prototype.direction=function(){return this.vertex1.pos.minus(this.vertex0.pos)},e.prototype.getTag=function(){var t=this.tag;return t||(t=i.getTag(),this.tag=t),t},e.prototype.lengthSquared=function(){var t=this.vertex1.pos.x-this.vertex0.pos.x,e=this.vertex1.pos.y-this.vertex0.pos.y;return t*t+e*e},e.prototype.length=function(){return Math.sqrt(this.lengthSquared())},e}(s.TransformationMethods);e.Side=a},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),s=function(t){function e(r,n){var o=t.call(this)||this;return"object"==typeof r&&null!==r?Array.isArray(r)?(o._x=r[0]||0,o._y=r[1]||0):r instanceof e||r instanceof i.Vector3?(o._x=r.x,o._y=r.y):(o._x=("x"in r?"string"==typeof r.x?parseFloat(r.x):r.x:0)||0,o._y=("y"in r?"string"==typeof r.y?parseFloat(r.y):r.y:0)||0):(o._x=("string"==typeof r?parseFloat(r):r)||0,o._y=("string"==typeof n?parseFloat(n):n)||0),o}return o(e,t),e.fromAngle=function(t){return e.fromAngleRadians(t)},e.fromAngleDegrees=function(t){var r=Math.PI*t/180;return e.fromAngleRadians(r)},e.fromAngleRadians=function(t){return e.Create(Math.cos(t),Math.sin(t))},e.Create=function(t,r){return new e(t,r)},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){throw new Error("Vector2 is immutable")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){throw new Error("Vector2 is immutable")},enumerable:!0,configurable:!0}),e.prototype.toVector3D=function(t){return void 0===t&&(t=0),new i.Vector3(this._x,this._y,t)},e.prototype.equals=function(t){return this._x===t._x&&this._y===t._y},e.prototype.clone=function(){return e.Create(this._x,this._y)},e.prototype.negated=function(){return e.Create(-this._x,-this._y)},e.prototype.plus=function(t){return e.Create(this._x+t._x,this._y+t._y)},e.prototype.minus=function(t){return e.Create(this._x-t._x,this._y-t._y)},e.prototype.times=function(t){return e.Create(this._x*t,this._y*t)},e.prototype.dividedBy=function(t){return e.Create(this._x/t,this._y/t)},e.prototype.dot=function(t){return this._x*t._x+this._y*t._y},e.prototype.lerp=function(t,e){return this.plus(t.minus(this).times(e))},e.prototype.length=function(){return Math.sqrt(this.dot(this))},e.prototype.distanceTo=function(t){return this.minus(t).length()},e.prototype.distanceToSquared=function(t){return this.minus(t).lengthSquared()},e.prototype.lengthSquared=function(){return this.dot(this)},e.prototype.unit=function(){return this.dividedBy(this.length())},e.prototype.cross=function(t){return this._x*t._y-this._y*t._x},e.prototype.normal=function(){return e.Create(this._y,-this._x)},e.prototype.multiply4x4=function(t){return t.leftMultiply1x2Vector(this)},e.prototype.transform=function(t){return t.leftMultiply1x2Vector(this)},e.prototype.angle=function(){return this.angleRadians()},e.prototype.angleDegrees=function(){return 180*this.angleRadians()/Math.PI},e.prototype.angleRadians=function(){return Math.atan2(this._y,this._x)},e.prototype.min=function(t){return e.Create(Math.min(this._x,t._x),Math.min(this._y,t._y))},e.prototype.max=function(t){return e.Create(Math.max(this._x,t._x),Math.max(this._y,t._y))},e.prototype.toString=function(){return"("+this._x.toFixed(5)+", "+this._y.toFixed(5)+")"},e.prototype.abs=function(){return e.Create(Math.abs(this._x),Math.abs(this._y))},e}(i.TransformationMethods);e.Vector2=s},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(0),s=function(t){function e(r,n,o){var s=t.call(this)||this;return"object"==typeof r?Array.isArray(r)?(s._x=r[0]||0,s._y=r[1]||0,s._z=r[2]||0):r instanceof i.Vector2?(s._x=r.x,s._y=r.y,s._z=0):r instanceof e?(s._x=r.x,s._y=r.y,s._z=r.z):(s._x=("x"in r?"string"==typeof r.x?parseFloat(r.x):r.x:0)||0,s._y=("y"in r?"string"==typeof r.y?parseFloat(r.y):r.y:0)||0,s._z=("z"in r?"string"==typeof r.z?parseFloat(r.z):r.z:0)||0):(s._x=("string"==typeof r?parseFloat(r):r)||0,s._y=("string"==typeof n?parseFloat(n):n)||0,s._z=("string"==typeof o?parseFloat(o):o)||0),s}return o(e,t),e.Create=function(t,r,n){return new e(t,r,n)},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){throw new Error("Vector3 is immutable")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){throw new Error("Vector3 is immutable")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){throw new Error("Vector3 is immutable")},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return e.Create(this._x,this._y,this._z)},e.prototype.negated=function(){return e.Create(-this._x,-this._y,-this._z)},e.prototype.abs=function(){return e.Create(Math.abs(this._x),Math.abs(this._y),Math.abs(this._z))},e.prototype.plus=function(t){return e.Create(this._x+t._x,this._y+t._y,this._z+t._z)},e.prototype.minus=function(t){return e.Create(this._x-t._x,this._y-t._y,this._z-t._z)},e.prototype.times=function(t){return e.Create(this._x*t,this._y*t,this._z*t)},e.prototype.dividedBy=function(t){return e.Create(this._x/t,this._y/t,this._z/t)},e.prototype.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z},e.prototype.lerp=function(t,e){return this.plus(t.minus(this).times(e))},e.prototype.lengthSquared=function(){return this.dot(this)},e.prototype.length=function(){return Math.sqrt(this.lengthSquared())},e.prototype.unit=function(){return this.dividedBy(this.length())},e.prototype.cross=function(t){return e.Create(this._y*t._z-this._z*t._y,this._z*t._x-this._x*t._z,this._x*t._y-this._y*t._x)},e.prototype.distanceTo=function(t){return this.minus(t).length()},e.prototype.distanceToSquared=function(t){return this.minus(t).lengthSquared()},e.prototype.equals=function(t){return this._x===t._x&&this._y===t._y&&this._z===t._z},e.prototype.multiply4x4=function(t){return t.leftMultiply1x3Vector(this)},e.prototype.transform=function(t){return t.leftMultiply1x3Vector(this)},e.prototype.toString=function(){return"("+this._x.toFixed(5)+", "+this._y.toFixed(5)+", "+this._z.toFixed(5)+")"},e.prototype.randomNonParallelVector=function(){var t=this.abs();return t._x<=t._y&&t._x<=t._z?e.Create(1,0,0):t._y<=t._x&&t._y<=t._z?e.Create(0,1,0):e.Create(0,0,1)},e.prototype.min=function(t){return e.Create(Math.min(this._x,t._x),Math.min(this._y,t._y),Math.min(this._z,t._z))},e.prototype.max=function(t){return e.Create(Math.max(this._x,t._x),Math.max(this._y,t._y),Math.max(this._z,t._z))},e}(i.TransformationMethods);e.Vector3=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),i=function(){function t(t){this.pos=t}return t.fromObject=function(e){return new t(new o.Vector2(e.pos._x,e.pos._y))},t.prototype.toString=function(){return"("+this.pos.x.toFixed(5)+","+this.pos.y.toFixed(5)+")"},t.prototype.getTag=function(){var t=this.tag;return t||(t=n.getTag(),this.tag=t),t},t}();e.Vertex2=i},function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),s=r(0),a=function(t){function e(e){var r=t.call(this)||this;return r.pos=e,r.uv=new s.Vector2(0,0),r}return o(e,t),e.fromObject=function(t){return new e(new s.Vector3(t.pos))},e.fromPosAndUV=function(t,r){var n=new e(t);return n.uv=r,n},e.prototype.flipped=function(){return this},e.prototype.getTag=function(){var t=this.tag;return t||(t=i.getTag(),this.tag=t),t},e.prototype.interpolate=function(t,r){var n=this.pos.lerp(t.pos,r),o=this.uv.lerp(t.uv,r);return e.fromPosAndUV(n,o)},e.prototype.transform=function(t){var r=this.pos.multiply4x4(t);return e.fromPosAndUV(r,this.uv)},e.prototype.toString=function(){return this.pos.toString()},e}(s.TransformationMethods);e.Vertex3=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.area=function(t){var e=0;return t.sides.map((function(t){e+=t.vertex0.pos.cross(t.vertex1.pos)})),e*=.5},e.getBounds=function(t){var e,r=e=0===t.sides.length?new n.Vector2(0,0):t.sides[0].vertex0.pos;return t.sides.map((function(t){e=(e=e.min(t.vertex0.pos)).min(t.vertex1.pos),r=(r=r.max(t.vertex0.pos)).max(t.vertex1.pos)})),[e,r]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(30);e.extrudeInPlane=function(t,e,r,i,s){return o.extrudeInOrthonormalBasis(t,n.OrthoNormalBasis.GetCartesian(e,r),i,s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(6),i=r(2),s=r(5),a=r(0),u=r(9);e.extrude=function(t,e){if(0===t.sides.length)return new u.CSG;var r=o.parseOptionAs3DVector(e,"offset",[0,0,1]),l=o.parseOptionAsFloat(e,"twistangle",0),c=o.parseOptionAsInt(e,"twiststeps",n.defaultResolution3D);if(0===r.z)throw new Error("offset cannot be orthogonal to Z axis");(0===l||c<1)&&(c=1);var p=a.Vector3.Create(0,1,0),f=[];f=(f=f.concat(t._toPlanePolygons({translation:[0,0,0],normalVector:p,flipped:!(r.z<0)}))).concat(t._toPlanePolygons({translation:r,normalVector:p.rotateZ(l),flipped:r.z<0}));for(var h=0;h<c;h++){var d=new s.Connector(r.times(h/c),[0,0,r.z],p.rotateZ(h*l/c)),v=new s.Connector(r.times((h+1)/c),[0,0,r.z],p.rotateZ((h+1)*l/c));f=f.concat(t._toWallPolygons({toConnector1:d,toConnector2:v},h))}return i.fromPolygons(f)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(6),i=r(0),s=r(5),a=r(2);e.rotateExtrude=function(t,e){void 0===e&&(e={});var r=o.parseOptionAsFloat(e,"angle",360),u=o.parseOptionAsInt(e,"resolution",n.defaultResolution3D);r=r>360?r%360:r;var l=[0,0,0],c=i.Vector3.Create(0,1,0),p=[0,0,1],f=[],h=new s.Connector(l,c,p);if(r>0&&r<360){var d=new s.Connector(l,c.rotateZ(-r),p);f=(f=f.concat(t._toPlanePolygons({toConnector:h,flipped:!0}))).concat(t._toPlanePolygons({toConnector:d}))}for(var v,y=h,g=r/u,m=g;m<=r+n.EPS;m+=g)v=new s.Connector(l,c.rotateZ(-m),p),f=f.concat(t._toWallPolygons({toConnector1:y,toConnector2:v},0)),y=v;return a.fromPolygons(f).reTesselated()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linear_extrude=function(t,e){var r=Object.assign({},{height:1,slices:10,twist:0,center:!1},t),n=r.height,o=r.twist,i=r.slices,s=r.center,a=e.extrude({offset:[0,0,n],twistangle:o,twiststeps:i});if(!0===s){var u=a.getBounds(),l=u[1].plus(u[0]).times(-.5);a=a.translate(l)}return a}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(84),o=r(85),i=r(86),s=r(87),a=r(0),u=r(2),l=r(3),c={fn:32,startAngle:0,angle:360,overflow:"cap"};e.rotate_extrude=function(t,e){var r=(t=Object.assign({},c,t)).fn,p=t.startAngle,f=t.angle,h=t.overflow;if("cap"!==h)throw new Error("only capping of overflowing points is supported !");arguments.length<2&&(e=t);var d=f>0,v=d?s.clamp(p+f,0,360):s.clamp(p+f,-360,0),y=Math.max(Math.floor(Math.abs(v)/45),1,r),g=1e-5,m=i.cagToPointsArray(e),x=m.filter((function(t){return t[0]<0})),w=m.filter((function(t){return t[0]>=0})),_=x.length>0&&w.length>0;_&&"cap"===h&&(x.length>w.length?m=m.map((function(t){return[Math.min(t[0],0),t[1]]})):w.length>=x.length&&(m=m.map((function(t){return[Math.max(t[0],0),t[1]]}))));for(var P=[],b=function(t){for(var e=0;e<m.length-1;e++){var r=m[e],i=m[e+1],s=a.Matrix4x4.rotationZ((t-1)/y*f+p),u=a.Matrix4x4.rotationZ(t/y*f+p),c=o.rightMultiply1x3VectorToArray(s,[r[0],0,r[1]]),h=o.rightMultiply1x3VectorToArray(u,[r[0],0,r[1]]),v=o.rightMultiply1x3VectorToArray(s,[i[0],0,i[1]]),x=o.rightMultiply1x3VectorToArray(u,[i[0],0,i[1]]),w=!1;Math.abs(c[0]-h[0])<g&&Math.abs(v[1]-x[1])<g&&(w=!0),d?(P.push(n.polygonFromPoints([c,v,x])),w||P.push(n.polygonFromPoints([x,h,c]))):(w||P.push(n.polygonFromPoints([c,h,x])),P.push(n.polygonFromPoints([x,v,c])))}if(Math.abs(f)<360){var _=l.fromPoints(m),b=a.Matrix4x4.rotationX(90).multiply(a.Matrix4x4.rotationZ(-p)),O=_._toPlanePolygons({flipped:d}).map((function(t){return t.transform(b)})),V=a.Matrix4x4.rotationX(90).multiply(a.Matrix4x4.rotationZ(-f-p)),M=_._toPlanePolygons({flipped:!d}).map((function(t){return t.transform(V)}));P=P.concat(O).concat(M)}},O=1;O<y+1;O++)b(O);return u.fromPolygons(P).reTesselated().canonicalized()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.polygonFromPoints=function(t){var e=t.map((function(t){return new n.Vertex3(new n.Vector3(t))}));return new n.Polygon3(e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rightMultiply1x3VectorToArray=function(t,e){var r=e[0],n=e[1],o=e[2],i=r*t.elements[0]+n*t.elements[1]+o*t.elements[2]+1*t.elements[3],s=r*t.elements[4]+n*t.elements[5]+o*t.elements[6]+1*t.elements[7],a=r*t.elements[8]+n*t.elements[9]+o*t.elements[10]+1*t.elements[11],u=r*t.elements[12]+n*t.elements[13]+o*t.elements[14]+1*t.elements[15];if(1!==u){var l=1/u;i*=l,s*=l,a*=l}return[i,s,a]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cagToPointsArray=function(t){var e;return"sides"in t?(e=[],t.sides.forEach((function(t){e.push([t.vertex0.pos.x,t.vertex0.pos.y]),e.push([t.vertex1.pos.x,t.vertex1.pos.y])}))):"points"in t&&(e=t.points.map((function(t){return[t.x,t.y]}))),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=function(t,e,r){return Math.min(Math.max(t,e),r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.rectangular_extrude=function(t,e){var r=Object.assign({},{w:1,h:1,fn:8,closed:!1},e),o=r.w,i=r.h,s=r.fn,a=r.closed;return new n.Path2D(t,a).rectangularExtrude(o,i,s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.cagOutlinePaths=function(t){var e=t.canonicalized(),r={},o={};e.sides.map((function(t){var e=t.getTag();r[e]=t;var n=t.vertex0.getTag();n in o||(o[n]=[]),o[n].push(e)}));for(var i=[];;){var s=null;for(var a in o){var u=o[a];s=u[0],u.splice(0,1),0===u.length&&delete o[a];break}if(null===s)break;for(var l=[],c=r[s],p=c.vertex0.getTag();;){l.push(c.vertex0.pos);var f=c.vertex1.getTag();if(f===p)break;if(!(f in o))throw new Error("Area is not closed!");var h=o[f],d=-1;if(1===h.length)d=0;else for(var v=null,y=c.direction().angleDegrees(),g=0;g<h.length;g++){var m=h[g],x=r[m].direction().angleDegrees()-y;x<-180&&(x+=360),x>=180&&(x-=360),(d<0||null===v||x>v)&&(d=g,v=x)}var w=h[d];h.splice(d,1),0===h.length&&delete o[f],c=r[w]}l.length>0&&l.push(l.shift());var _=new n.Path2D(l,!0);i.push(_)}return i}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),o=r(1),i=r(3),s=r(0);e.circle=function(t){void 0===t&&(t={});for(var e=n.parseOptionAs2DVector(t,"center",[0,0]),r=n.parseOptionAsFloat(t,"radius",1),a=n.parseOptionAsInt(t,"resolution",o.defaultResolution2D),u=[],l=0;l<a;l++){var c=2*Math.PI*l/a,p=s.Vector2.fromAngleRadians(c).times(r).plus(e);u.push(p)}return i.fromPoints(u)},e.ellipse=function(t){void 0===t&&(t={});var e=n.parseOptionAs2DVector(t,"center",[0,0]),r=n.parseOptionAs2DVector(t,"radius",[1,1]);r=r.abs();var a=n.parseOptionAsInt(t,"resolution",o.defaultResolution2D),u=new s.Path2D([[e.x,e.y+r.y]]);return u=(u=(u=u.appendArc([e.x,e.y-r.y],{xradius:r.x,yradius:r.y,xaxisrotation:0,resolution:a,clockwise:!0,large:!1})).appendArc([e.x,e.y+r.y],{xradius:r.x,yradius:r.y,xaxisrotation:0,resolution:a,clockwise:!0,large:!1})).close(),i.fromPath2(u)},e.rectangle=function(t){var e,r;if(void 0===t&&(t={}),"corner1"in t||"corner2"in t){if("center"in t||"radius"in t)throw new Error("rectangle: should either give a radius and center parameter, or a corner1 and corner2 parameter");var o=n.parseOptionAs2DVector(t,"corner1",[0,0]),a=n.parseOptionAs2DVector(t,"corner2",[1,1]);e=o.plus(a).times(.5),r=a.minus(o).times(.5)}else e=n.parseOptionAs2DVector(t,"center",[0,0]),r=n.parseOptionAs2DVector(t,"radius",[1,1]);r=r.abs();var u=new s.Vector2(r.x,-r.y),l=[e.plus(r),e.plus(u),e.minus(r),e.minus(u)];return i.fromPoints(l)},e.roundedRectangle=function(t){var r,i;if(void 0===t&&(t={}),"corner1"in t||"corner2"in t){if("center"in t||"radius"in t)throw new Error("roundedRectangle: should either give a radius and center parameter, or a corner1 and corner2 parameter");var a=n.parseOptionAs2DVector(t,"corner1",[0,0]),u=n.parseOptionAs2DVector(t,"corner2",[1,1]);r=a.plus(u).times(.5),i=u.minus(a).times(.5)}else r=n.parseOptionAs2DVector(t,"center",[0,0]),i=n.parseOptionAs2DVector(t,"radius",[1,1]);i=i.abs();var l=n.parseOptionAsFloat(t,"roundradius",.2),c=n.parseOptionAsInt(t,"resolution",o.defaultResolution2D),p=Math.min(i.x,i.y);p-=.1,l=Math.min(l,p),l=Math.max(0,l),i=new s.Vector2(i.x-l,i.y-l);var f=e.rectangle({center:r,radius:i});return l>0&&(f=f.expand(l,c)),f}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(4),i={r:1,fn:32,center:!1};e.circle=function(t){var e=n(n({},i),"number"==typeof t?{r:t}:t),r=e.r,s=e.fn,a=e.center?[0,0]:[r,r];return o.CAG.circle({center:a,radius:r,resolution:s})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3);e.polygon=function(t){var e=[];return t.paths&&t.paths.length&&t.paths[0].length?("number"!=typeof t.points[0][0]&&(t.points=t.points.reduce((function(t,e){return t.concat(e)}))),t.paths.forEach((function(r,n){e.push([]),r.forEach((function(r){return e[n].push(t.points[r])}))}))):t.paths&&t.paths.length?t.paths.forEach((function(r){return e.push(t.points[r])})):e=t.length?t:t.points,n.fromPoints(e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3);e.triangle=function(){var t=arguments;return t[0]&&t[0].length&&(t=t[0]),n.fromPoints(t)}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)n[o]=i[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var i=r(7),s=r(10),a={size:1,center:!1,round:!1,radius:0,fn:8};e.cube=function(t){var e=n(n({},a),"number"==typeof t?{size:[t,t,t]}:Array.isArray(t)?{size:t}:t),r=e.round,u=e.radius,l=e.fn,c=e.size,p=e.center,f=Array.isArray(c)?c:[c,c,c],h=f[0],d=f[1],v=f[2],y=(r||u)&&(u||(h+d+v)/30)||0,g=[h/2,d/2,v/2],m=y?s.roundedCube({radius:o(g),roundradius:y,resolution:l}):s.cube({radius:o(g)}),x=Array.isArray(p)?[+!p[0]*g[0],+!p[1]*g[1],+!p[2]*g[2]]:p?[0,0,0]:o(g);return x[0]||x[1]||x[2]?i.translate(x,m):m}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.translate=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.length>=1&&e[0].length?e[0]:e,o=n[0];if(n.length>1)for(var i=1;i<n.length;i++)o=o.union(n[i]);return o.translate(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scale=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.length>=1&&e[0].length?e[0]:e,o=n[0];if(n.length>1)for(var i=1;i<n.length;i++)o=o.union(n[i]);return o.scale(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rotate=function(){var t,e,r,n=1,o=arguments;for(o[0].length?(r=o[0],e=1,o[1].length&&(o=o[1],e=0)):(n=o[0],r=o[1],e=2,o[2].length&&(o=o[2],e=0)),t=o[e++];e<o.length;e++)t=t.union(o[e]);return 1!==n?t.rotate([0,0,0],r,n):t.rotateX(r[0]).rotateY(r[1]).rotateZ(r[2])}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.transform=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var o,i=e.length>=1&&e[0].length?e[0]:e,s=i[0];if(i.length>1)for(var a=1;a<i.length;a++)s=s.union(i[a]);if(!Array.isArray(t))throw new Error("Matrix needs to be an array");return t.forEach((function(t){if(!Number.isFinite(t))throw new Error("you can only use a flat array of valid, finite numbers (float and integers)")})),o=new n.Matrix4x4(t),s.transform(o)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.center=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=e.length>=1&&e[0].length?e[0]:e,o=n[0];if(n.length>1)for(var i=1;i<n.length;i++)o=o.union(n[i]);return Array.isArray(t)||(t=[t,t,t]),o.center(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.mirror=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var o=e.length>=1&&e[0].length?e[0]:e,i=o[0];if(o.length>1)for(var s=1;s<o.length;s++)i=i.union(o[s]);var a=new n.Plane(new n.Vector3(t[0],t[1],t[2]).unit(),0);return i.mirrored(a)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expand=function(t,e,r){return r.expand(t,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.contract=function(t,e,r){return r.contract(t,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minkowski=function(){console.log("minkowski() not yet implemented")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(105),o=function(){function t(){this.points=null,this.indices=null}return t.prototype.getIndices=function(){return this.indices},t.prototype.clear=function(){this.indices=null,this.points=null},t.prototype.ccw=function(t,e,r){var n=(this.points[e].x-this.points[t].x)*(this.points[r].y-this.points[t].y)-(this.points[e].y-this.points[t].y)*(this.points[r].x-this.points[t].x);return n<1e-5?0:n},t.prototype.angle=function(t,e){return Math.atan2(this.points[e].y-this.points[t].y,this.points[e].x-this.points[t].x)},t.prototype.distance=function(t,e){return(this.points[e].x-this.points[t].x)*(this.points[e].x-this.points[t].x)+(this.points[e].y-this.points[t].y)*(this.points[e].y-this.points[t].y)},t.prototype.compute=function(t){if(this.indices=null,!(t.length<3)){this.points=t;for(var e=0,r=1;r<this.points.length;r++)this.points[r].y===this.points[e].y?this.points[r].x<this.points[e].x&&(e=r):this.points[r].y<this.points[e].y&&(e=r);var o=[],i=0,s=0;for(r=0;r<this.points.length;r++)r!==e&&((i=this.angle(e,r))<0&&(i+=Math.PI),s=this.distance(e,r),o.push(new n.ConvexHullPoint(r,i,s)));o.sort((function(t,e){return t.compare(e)}));var a,u=new Array(this.points.length+1),l=2;for(r=0;r<this.points.length;r++)r!==e&&(u[l]=o[l-2].index,l++);u[0]=u[this.points.length],u[1]=e;var c=2;for(r=3;r<=this.points.length;r++){for(;this.ccw(u[c-1],u[c],u[r])<=0;)c--;c++,a=u[r],u[r]=u[c],u[c]=a}this.indices=new Array(c);for(r=0;r<c;r++)this.indices[r]=u[r+1]}},t}();e.ConvexHull=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.index=t,this.angle=e,this.distance=r}return t.prototype.compare=function(t){return this.angle<t.angle?-1:this.angle>t.angle?1:this.distance<t.distance?-1:this.distance>t.distance?1:0},t}();e.ConvexHullPoint=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(12),o=r(31);e.chain_hull=function(t,e){var r=arguments,i=!1,s=0;void 0!==r[s].closed&&(i=r[s++].closed),r[s].length&&(r=r[s]);for(var a=[],u=r.length-(i?0:1),l=0;l<u;l++)a.push(o.hull(r[l],r[(l+1)%r.length]));return n.union(a)}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(32),i=r(7),s=r(10),a={r:1,fn:32,type:"normal"};e.sphere=function(t){var e=n(n({},a),"number"==typeof t?{r:t}:t),r=e.r,u=e.fn,l=e.center,c=e.type,p=Array.isArray(l)?[+!l[0]*r,+!l[1]*r,+!l[2]*r]:"boolean"!=typeof l||l?[0,0,0]:[r,r,r],f="geodesic"===c?o.geodesicSphere({r:r,fn:u}):s.sphere({radius:r,resolution:u});return p[0]||p[1]||p[2]?i.translate(p,f):f}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),o=r(10);e.cylinder=function(t){var e,r={r:1,r1:1,r2:1,h:1,fn:32,round:!1},i=Object.assign({},r,t),s=i.r1,a=i.r2,u=i.h,l=i.fn,c=i.round,p=[0,0,0],f=arguments;if(t&&t.d&&(s=a=t.d/2),t&&t.r&&(s=t.r,a=t.r),t&&t.h&&(u=t.h),t&&(t.r1||t.r2)&&(s=t.r1,a=t.r2,t.h&&(u=t.h)),t&&(t.d1||t.d2)&&(s=t.d1/2,a=t.d2/2),f&&f[0]&&f[0].length&&(s=(f=f[0])[0],a=f[1],u=f[2],4===f.length&&(l=f[3])),t&&t.start&&t.end)e=c?o.roundedCylinder({start:t.start,end:t.end,radiusStart:s,radiusEnd:a,resolution:l}):o.cylinder({start:t.start,end:t.end,radiusStart:s,radiusEnd:a,resolution:l});else{e=c?o.roundedCylinder({start:[0,0,0],end:[0,0,u],radiusStart:s,radiusEnd:a,resolution:l}):o.cylinder({start:[0,0,0],end:[0,0,u],radiusStart:s,radiusEnd:a,resolution:l});var h=s>a?s:a;t&&t.center&&t.center.length?p=[t.center[0]?0:h,t.center[1]?0:h,t.center[2]?-u/2:0]:t&&!0===t.center?p=[0,0,-u/2]:t&&!1===t.center&&(p=[0,0,0]),e=p[0]||p[1]||p[2]?n.translate(p,e):e}return e}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(20),i=r(17),s=r(7),a={ri:1,ro:4,fni:16,fno:32,roti:0};e.torus=function(t){var e=n(n({},a),t),r=e.ri,u=e.ro,l=e.fni,c=e.fno,p=e.roti,f=o.circle({r:r,fn:Math.max(3,l),center:!0});return p&&(f=f.rotateZ(p)),i.rotate_extrude({fn:Math.max(3,c)},s.translate([u,0,0],f))}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(111)),n(r(34)),n(r(113)),n(r(114)),n(r(115)),n(r(116)),n(r(117)),n(r(35)),n(r(118))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(34);e.color=function(t){for(var e,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i=0,s=r;for("string"==typeof t&&(t=n.css2rgb(t)),Number.isFinite(s[i])&&(t=t.concat(s[i]),i++),Array.isArray(s[i])&&(s=s[i],i=0),e=s[i++];i<s.length;i++)e=e.union(s[i]);return e.setColor(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cssColors3ub={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rgb2hsl=function(t,e,r){Array.isArray(t)&&(r=t[2],e=t[1],t=t[0]);var n,o=Math.max(t,e,r),i=Math.min(t,e,r),s=0,a=(o+i)/2;if(o===i)s=n=0;else{var u=o-i;switch(n=a>.5?u/(2-o-i):u/(o+i),o){case t:s=(e-r)/u+(e<r?6:0);break;case e:s=(r-t)/u+2;break;case r:s=(t-e)/u+4}s/=6}return[s,n,a]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rgb2html=function(t,e,r){return Array.isArray(t)&&(r=t[2],e=t[1],t=t[0]),"#"+Number(16777216+255*t*65536+255*e*256+255*r).toString(16).substring(1,7)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rgb2hsv=function(t,e,r){Array.isArray(t)&&(r=t[2],e=t[1],t=t[0]);var n,o=Math.max(t,e,r),i=Math.min(t,e,r),s=0,a=o,u=o-i;if(n=0===o?0:u/o,o===i)s=0;else{switch(o){case t:s=(e-r)/u+(e<r?6:0);break;case e:s=(r-t)/u+2;break;case r:s=(t-e)/u+4}s/=6}return[s,n,a]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.html2rgb=function(t){var e=0,r=0,n=0;return 7===t.length&&(e=parseInt("0x"+t.slice(1,3),16)/255,r=parseInt("0x"+t.slice(3,5),16)/255,n=parseInt("0x"+t.slice(5,7),16)/255),[e,r,n]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hsv2rgb=function(t,e,r){var n,o,i;Array.isArray(t)&&(r=t[2],e=t[1],t=t[0]);var s=Math.floor(6*t),a=6*t-s,u=r*(1-e),l=r*(1-a*e),c=r*(1-(1-a)*e);switch(s%6){case 0:n=r,o=c,i=u;break;case 1:n=l,o=r,i=u;break;case 2:n=u,o=r,i=c;break;case 3:n=u,o=l,i=r;break;case 4:n=c,o=u,i=r;break;case 5:n=r,o=u,i=l}return[n,o,i]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(35);e.hsl2rgb=function(t,e,r){var o,i,s;if(Array.isArray(t)&&(r=t[2],e=t[1],t=t[0]),0===e)o=i=s=r;else{var a=r<.5?r*(1+e):r+e-r*e,u=2*r-a;o=n.hue2rgb(u,a,t+1/3),i=n.hue2rgb(u,a,t),s=n.hue2rgb(u,a,t-1/3)}return[o,i,s]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=2*Math.PI;function o(t){return Math.floor(t)}function i(t){return Math.abs(t)}e.sin=function(t){return Math.sin(t/360*n)},e.cos=function(t){return Math.cos(t/360*n)},e.asin=function(t){return Math.asin(t)/360*n},e.acos=function(t){return Math.acos(t)/360*n},e.tan=function(t){return Math.tan(t/360*n)},e.atan=function(t){return Math.atan(t)/360*n},e.atan2=function(t,e){return Math.atan2(t,e)/360*n},e.ceil=function(t){return Math.ceil(t)},e.floor=o,e.abs=i,e.min=function(t,e){return t<e?t:e},e.max=function(t,e){return t>e?t:e},e.rands=function(t,e,r,n){for(var o=new Array(r),i=0;i<r;i++)o[i]=Math.random()*(e-t)+t},e.log=function(t){return Math.log(t)},e.lookup=function(t,e){for(var r=0,n=0;n<e.length;n++){var o=e[n];if(o[0]>=t){o=e[--n];var s=e[n+1],a=0;return o[0]!==s[0]&&(a=i((t-o[0])/(s[0]-o[0]))),r=a>0?o[1]*(1-a)+s[1]*a:o[1]}}return r},e.pow=function(t,e){return Math.pow(t,e)},e.sign=function(t){return t<0?-1:t>1?1:0},e.sqrt=function(t){return Math.sqrt(t)},e.round=function(t){return o(t+.5)}},function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(36)),n(r(121)),n(r(18)),n(r(19)),n(r(123)),n(r(37))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(18);e.vector_char=function(t,e,r){return n.vectorChar({xOffset:t,yOffset:e},r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hersheyFont={height:14,32:[16],33:[10,5,21,5,7,,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,,12,21,12,14],35:[21,11,25,4,-7,,17,25,10,-7,,4,12,18,12,,3,6,17,6],36:[20,8,25,8,-4,,12,25,12,-4,,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,,3,18,13,12,,13,18,3,12],43:[26,13,18,13,0,,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,,12,16,10,14,9,11,9,8,10,6,11,5,,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,,9,21,17,0,,4,7,14,7],66:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,,4,21,17,21,,4,11,12,11,,4,0,17,0],70:[18,4,21,4,0,,4,21,17,21,,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,,13,8,18,8],72:[22,4,21,4,0,,18,21,18,0,,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,,18,21,4,7,,9,12,18,0],76:[17,4,21,4,0,,4,0,16,0],77:[24,4,21,4,0,,4,21,12,0,,20,21,12,0,,20,21,20,0],78:[22,4,21,4,0,,4,21,18,0,,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,,12,4,18,-2],82:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,,17,21,9,0],87:[24,2,21,7,0,,12,21,7,0,,12,21,17,0,,22,21,17,0],88:[20,3,21,17,0,,17,21,3,0],89:[18,1,21,9,11,9,0,,17,21,9,11],90:[20,17,21,3,0,,3,21,17,21,,3,0,17,0],91:[14,4,25,4,-7,,5,25,5,-7,,4,25,11,25,,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,,10,25,10,-7,,3,25,10,25,,3,-7,10,-7],94:[16,6,15,8,18,10,15,,3,12,8,17,13,12,,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,,14,14,4,4,,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0,,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,,15,14,15,0],118:[16,2,14,8,0,,14,14,8,0],119:[22,3,14,7,0,,11,14,7,0,,11,14,15,0,,19,14,15,0],120:[17,3,14,14,0,,14,14,3,0],121:[16,2,14,8,0,,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,,3,14,14,14,,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(37);e.vector_text=function(t,e,r){return n.vectorText({xOffset:t,yOffset:e},r)}}])}));